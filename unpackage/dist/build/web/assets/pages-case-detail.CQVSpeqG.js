import{d as e,r as a,l,x as s,a as t,o as c,c as i,w as u,b as o,e as n,f as r,F as d,h as f,t as g,z as _,A as m,m as v,s as p,B as y,S as k,j as w,i as h,u as C,g as F,D as x,y as I,p as b,v as T,k as z}from"./index-H1zobiUJ.js";import{r as R,_ as S,a as j}from"./uni-app.es.B9r4ma60.js";const B=j(e({__name:"detail",setup(e){const j=a(!1),B=a(!1),P=a(!1),D=a(""),A=a({}),$=a([]),q=a([]),E=a([]),G=a([]),H=a([]),J=a(4.8),K=a([]),L=a([]),M=()=>{p({title:"正在连接设计师",icon:"loading"})},N=()=>{p({title:"查看更多评价",icon:"none"})},O=()=>{y({scrollTop:0,duration:300})};return l((()=>{const e=s(),a=e[e.length-1].options;a&&a.id&&(D.value=a.id,(async e=>{if(e){P.value=!0;try{const a=await v.callFunction({name:"getCaseDetail",data:{id:e}});if(0===a.result.code){const e=a.result.data;A.value={title:e.title,roomType:e.roomType,area:e.area,style:e.style,ownerIntro:e.ownerIntro},e.mainImages&&e.mainImages.length>0&&($.value=e.mainImages),e.sceneImages&&e.sceneImages.length>0&&(q.value=e.sceneImages),e.furnitureCategories&&e.furnitureCategories.length>0&&(E.value=e.furnitureCategories),e.designerSuggestions&&e.designerSuggestions.length>0&&(G.value=e.designerSuggestions),e.colorPalette&&e.colorPalette.length>0&&(H.value=e.colorPalette),e.overallRating&&(J.value=e.overallRating),e.userReviews&&e.userReviews.length>0&&(K.value=e.userReviews),e.similarCases&&e.similarCases.length>0&&(L.value=e.similarCases),void 0!==e.isFavorite&&(j.value=e.isFavorite)}else p({title:a.result.message||"获取案例详情失败",icon:"none"})}catch(a){console.error("获取案例详情失败:",a),p({title:"网络错误，请重试",icon:"none"})}finally{P.value=!1}}})(a.id))})),(e,a)=>{const l=T,s=z,v=k,y=w,j=h,P=C,D=R(t("uni-icons"),S);return c(),i(j,{class:"container"},{default:u((()=>[o(j,{class:"top-section"},{default:u((()=>[o(v,{class:"main-swiper","indicator-dots":!0,autoplay:!0,interval:4e3,duration:500},{default:u((()=>[(c(!0),n(d,null,r($.value,((e,a)=>(c(),i(s,{key:a},{default:u((()=>[o(l,{src:e,mode:"aspectFill",class:"main-image"},null,8,["src"])])),_:2},1024)))),128))])),_:1}),o(j,{class:"case-info-overlay"},{default:u((()=>[o(y,{class:"case-title"},{default:u((()=>[f(g(A.value.title),1)])),_:1}),o(j,{class:"case-tags"},{default:u((()=>[o(y,{class:"tag"},{default:u((()=>[f(g(A.value.roomType),1)])),_:1}),o(y,{class:"tag"},{default:u((()=>[f(g(A.value.area),1)])),_:1}),o(y,{class:"tag"},{default:u((()=>[f(g(A.value.style),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(P,{class:"content-scroll","scroll-y":""},{default:u((()=>[o(j,{class:"case-content-section"},{default:u((()=>[o(j,{class:"section-header"},{default:u((()=>[o(y,{class:"section-title"},{default:u((()=>[f("案例详情")])),_:1})])),_:1}),o(j,{class:"owner-intro"},{default:u((()=>[o(y,{class:"intro-title"},{default:u((()=>[f("业主简介")])),_:1}),o(y,{class:"intro-text"},{default:u((()=>[f(g(A.value.ownerIntro),1)])),_:1})])),_:1}),o(j,{class:"scene-gallery"},{default:u((()=>[o(y,{class:"gallery-title"},{default:u((()=>[f("实景展示")])),_:1}),o(P,{class:"gallery-scroll","scroll-x":""},{default:u((()=>[(c(!0),n(d,null,r(q.value,((e,a)=>(c(),i(j,{class:"gallery-item",key:a,onClick:e=>(e=>{const a=q.value.map((e=>e.image));I({urls:a,current:a[e]})})(a)},{default:u((()=>[o(l,{src:e.image,mode:"aspectFill",class:"gallery-image"},null,8,["src"]),e.productTag?(c(),i(j,{key:0,class:"product-tag"},{default:u((()=>[o(y,null,{default:u((()=>[f(g(e.productTag),1)])),_:2},1024)])),_:2},1024)):F("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),o(j,{class:"furniture-section"},{default:u((()=>[o(j,{class:"section-header"},{default:u((()=>[o(y,{class:"section-title"},{default:u((()=>[f("案例家具")])),_:1})])),_:1}),(c(!0),n(d,null,r(E.value,((e,a)=>(c(),i(j,{key:a,class:"category-group"},{default:u((()=>[o(y,{class:"category-title"},{default:u((()=>[f(g(e.name),1)])),_:2},1024),o(P,{class:"product-scroll","scroll-x":""},{default:u((()=>[(c(!0),n(d,null,r(e.products,((e,a)=>(c(),i(j,{class:"product-item",key:a,onClick:a=>(e=>{e.id?b({url:`/pages/index/detail?id=${e.id}`}):p({title:"产品信息不完整",icon:"none"})})(e)},{default:u((()=>[o(l,{src:e.image,mode:"aspectFill",class:"product-image"},null,8,["src"]),o(j,{class:"product-info"},{default:u((()=>[o(y,{class:"product-name"},{default:u((()=>[f(g(e.name),1)])),_:2},1024),o(y,{class:"product-desc"},{default:u((()=>[f(g(e.description),1)])),_:2},1024),o(j,{class:"product-price"},{default:u((()=>[o(y,{class:"price-symbol"},{default:u((()=>[f("¥")])),_:1}),o(y,{class:"price-value"},{default:u((()=>[f(g(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),o(j,{class:"suggestion-section"},{default:u((()=>[o(j,{class:"section-header"},{default:u((()=>[o(y,{class:"section-title"},{default:u((()=>[f("搭配建议")])),_:1})])),_:1}),o(j,{class:"suggestion-card"},{default:u((()=>[o(y,{class:"card-title"},{default:u((()=>[f("设计师建议")])),_:1}),o(j,{class:"suggestion-tags"},{default:u((()=>[(c(!0),n(d,null,r(G.value,((e,a)=>(c(),i(y,{class:"suggestion-tag",key:a},{default:u((()=>[f(g(e),1)])),_:2},1024)))),128))])),_:1})])),_:1}),o(j,{class:"color-recommendation"},{default:u((()=>[o(y,{class:"card-title"},{default:u((()=>[f("色彩搭配")])),_:1}),o(j,{class:"color-palette"},{default:u((()=>[(c(!0),n(d,null,r(H.value,((e,a)=>(c(),i(j,{class:"color-item",key:a,style:x({backgroundColor:e.hex})},{default:u((()=>[o(y,{class:"color-name"},{default:u((()=>[f(g(e.name),1)])),_:2},1024)])),_:2},1032,["style"])))),128))])),_:1})])),_:1})])),_:1}),o(j,{class:"review-section"},{default:u((()=>[o(j,{class:"section-header"},{default:u((()=>[o(y,{class:"section-title"},{default:u((()=>[f("用户评价")])),_:1}),o(j,{class:"rating-display"},{default:u((()=>[o(D,{type:"star-filled",size:"16",color:"#FFB800"}),o(y,{class:"rating-text"},{default:u((()=>[f(g(J.value),1)])),_:1})])),_:1})])),_:1}),(c(!0),n(d,null,r(K.value,((e,a)=>(c(),i(j,{class:"review-item",key:a},{default:u((()=>[o(j,{class:"review-header"},{default:u((()=>[o(l,{src:e.avatar,class:"user-avatar"},null,8,["src"]),o(j,{class:"user-info"},{default:u((()=>[o(y,{class:"username"},{default:u((()=>[f(g(e.username),1)])),_:2},1024),o(j,{class:"review-rating"},{default:u((()=>[(c(),n(d,null,r(5,(a=>o(D,{key:a,type:a<=e.rating?"star-filled":"star",size:"12",color:"#FFB800"},null,8,["type"]))),64))])),_:2},1024)])),_:2},1024)])),_:2},1024),o(y,{class:"review-content"},{default:u((()=>[f(g(e.content),1)])),_:2},1024),e.images?(c(),i(P,{key:0,class:"review-images","scroll-x":""},{default:u((()=>[(c(!0),n(d,null,r(e.images,((a,s)=>(c(),i(l,{key:s,src:a,class:"review-image",onClick:a=>((e,a)=>{I({urls:e,current:e[a]})})(e.images,s)},null,8,["src","onClick"])))),128))])),_:2},1024)):F("",!0)])),_:2},1024)))),128)),o(j,{class:"more-reviews-btn",onClick:N},{default:u((()=>[o(y,null,{default:u((()=>[f("查看更多评价")])),_:1})])),_:1})])),_:1}),o(j,{class:"interaction-section"},{default:u((()=>[o(j,{class:"action-buttons"},{default:u((()=>[o(j,{class:"action-btn primary",onClick:M},{default:u((()=>[o(D,{type:"chat",size:"20",color:"#ffffff"}),o(y,null,{default:u((()=>[f("咨询设计师")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),_(o(j,{class:"back-to-top",onClick:O},{default:u((()=>[o(D,{type:"up",size:"24",color:"#ffffff"})])),_:1},512),[[m,B.value]])])),_:1})}}}),[["__scopeId","data-v-c75ad523"]]);export{B as default};
