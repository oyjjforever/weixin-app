import{d as a,r as e,l,a as s,o as t,c,w as u,b as o,e as i,f as n,F as d,h as r,g as f,z as _,A as v,m as p,s as m,B as y,j as g,i as k,u as b,n as C,t as h,C as z,p as x,v as j}from"./index-H1zobiUJ.js";import{r as w,_ as F,a as S}from"./uni-app.es.B9r4ma60.js";const T=S(a({__name:"index",setup(a){const S=e(!1),T=e(!0),A=e(!1),B=e("all"),I=e(1),L=e(10),M=e([{label:"全部",value:"all"},{label:"现代简约",value:"modern"},{label:"北欧风格",value:"nordic"},{label:"中式风格",value:"chinese"},{label:"美式风格",value:"american"},{label:"欧式风格",value:"european"}]),$=e([]),q=async(a=!1)=>{if(!S.value){S.value=!0;try{const e=await p.callFunction({name:"getCaseList",data:{page:a?1:I.value,pageSize:L.value,style:B.value}});if(0===e.result.code){const{cases:l,hasMore:s}=e.result.data;a?($.value=l||[],I.value=1):$.value=[...$.value,...l||[]],T.value=s,I.value++}else m({title:e.result.message||"获取案例列表失败",icon:"none"})}catch(e){console.error("获取案例列表失败:",e),m({title:"网络错误，请重试",icon:"none"})}finally{S.value=!1}}},D=a=>{x({url:`/pages/case/detail?id=${a._id||a.id}`})},E=()=>{!S.value&&T.value&&q(!1)},G=()=>{y({scrollTop:0,duration:300})},H=()=>{B.value="all",I.value=1,q(!0)},J=()=>{I.value=1,q(!0)};return l((()=>{q(!0)})),(a,e)=>{const l=g,p=k,m=b,y=j,x=w(s("uni-icons"),F);return t(),c(p,{class:"container"},{default:u((()=>[o(p,{class:"filter-bar"},{default:u((()=>[o(m,{class:"filter-scroll","scroll-x":""},{default:u((()=>[(t(!0),i(d,null,n(M.value,((a,e)=>(t(),c(p,{class:C(["filter-item",{active:B.value===a.value}]),key:e,onClick:e=>{return l=a.value,B.value=l,I.value=1,void q(!0);var l}},{default:u((()=>[o(l,null,{default:u((()=>[r(h(a.label),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),o(m,{class:"case-list","scroll-y":"",onScrolltolower:E},{default:u((()=>[(t(!0),i(d,null,n($.value,((a,e)=>(t(),c(p,{class:"case-item",key:e,onClick:e=>D(a)},{default:u((()=>[o(p,{class:"image-container"},{default:u((()=>[o(y,{src:a.image,mode:"aspectFill",class:"case-image","lazy-load":!0},null,8,["src"]),o(p,{class:"image-overlay"},{default:u((()=>[o(p,{class:"room-type"},{default:u((()=>[r(h(a.roomType),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(p,{class:"case-info"},{default:u((()=>[o(l,{class:"case-title"},{default:u((()=>[r(h(a.title),1)])),_:2},1024),o(l,{class:"case-desc"},{default:u((()=>[r(h(a.description),1)])),_:2},1024),o(p,{class:"case-meta"},{default:u((()=>[o(p,{class:"meta-item"},{default:u((()=>[o(x,{type:"home",size:"14",color:"#999"}),o(l,null,{default:u((()=>[r(h(a.area),1)])),_:2},1024)])),_:2},1024),o(p,{class:"meta-item"},{default:u((()=>[o(x,{type:"person",size:"14",color:"#999"}),o(l,null,{default:u((()=>[r(h(a.designer),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(p,{class:"case-footer"},{default:u((()=>[o(p,{class:"price-section"},{default:u((()=>[o(l,{class:"price-label"},{default:u((()=>[r("套餐价格")])),_:1}),o(p,{class:"price-container"},{default:u((()=>[o(l,{class:"price-symbol"},{default:u((()=>[r("¥")])),_:1}),o(l,{class:"price-value"},{default:u((()=>[r(h(a.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(p,{class:"detail-btn",onClick:z((e=>D(a)),["stop"])},{default:u((()=>[o(l,null,{default:u((()=>[r("查看详情")])),_:1}),o(x,{type:"right",size:"14",color:"#666"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),T.value?(t(),c(p,{key:0,class:"load-more"},{default:u((()=>[o(l,null,{default:u((()=>[r("加载更多...")])),_:1})])),_:1})):$.value.length>0?(t(),c(p,{key:1,class:"no-more"},{default:u((()=>[o(l,null,{default:u((()=>[r("没有更多案例了")])),_:1})])),_:1})):f("",!0),0!==$.value.length||S.value?f("",!0):(t(),c(p,{key:2,class:"empty-state"},{default:u((()=>[o(p,{class:"empty-content"},{default:u((()=>[o(x,{type:"home",size:"80",color:"#d9d9d9"}),o(l,{class:"empty-title"},{default:u((()=>[r("暂无案例数据")])),_:1}),o(l,{class:"empty-desc"},{default:u((()=>[r("当前筛选条件下没有找到相关案例")])),_:1}),o(p,{class:"empty-actions"},{default:u((()=>[o(p,{class:"empty-action",onClick:H},{default:u((()=>[o(l,{class:"action-text"},{default:u((()=>[r("重置筛选")])),_:1})])),_:1}),o(p,{class:"empty-action primary",onClick:J},{default:u((()=>[o(l,{class:"action-text"},{default:u((()=>[r("刷新数据")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),S.value&&0===$.value.length?(t(),c(p,{key:3,class:"loading-state"},{default:u((()=>[o(x,{type:"spinner-cycle",size:"40",color:"#999"}),o(l,{class:"loading-text"},{default:u((()=>[r("正在加载案例...")])),_:1})])),_:1})):f("",!0)])),_:1}),_(o(p,{class:"back-to-top",onClick:G},{default:u((()=>[o(x,{type:"up",size:"24",color:"#ffffff"})])),_:1},512),[[v,A.value]])])),_:1})}}}),[["__scopeId","data-v-937ab6b0"]]);export{T as default};
