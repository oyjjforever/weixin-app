"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const l=e.defineComponent({__name:"index",setup(l){const a=e.ref(!1),o=e.ref(!0),t=e.ref(!1),u=e.ref("all"),n=e.ref(1),r=e.ref(10),i=e.ref([{label:"全部",value:"all"},{label:"现代简约",value:"modern"},{label:"北欧风格",value:"nordic"},{label:"中式风格",value:"chinese"},{label:"美式风格",value:"american"},{label:"欧式风格",value:"european"}]),v=e.ref([]),s=async(l=!1)=>{if(!a.value){a.value=!0;try{const t=await e.nr.callFunction({name:"getCaseList",data:{page:l?1:n.value,pageSize:r.value,style:u.value}});if(0===t.result.code){const{cases:e,hasMore:a}=t.result.data;l?(v.value=e||[],n.value=1):v.value=[...v.value,...e||[]],o.value=a,n.value++}else e.index.showToast({title:t.result.message||"获取案例列表失败",icon:"none"})}catch(t){console.error("获取案例列表失败:",t),e.index.showToast({title:"网络错误，请重试",icon:"none"})}finally{a.value=!1}}},c=l=>{e.index.navigateTo({url:`/pages/case/detail?id=${l._id||l.id}`})},d=()=>{!a.value&&o.value&&s(!1)},p=()=>{e.index.pageScrollTo({scrollTop:0,duration:300})},f=()=>{u.value="all",n.value=1,s(!0)},g=()=>{n.value=1,s(!0)};return e.onMounted((()=>{s(!0)})),(l,r)=>e.e({a:e.f(i.value,((l,a,o)=>({a:e.t(l.label),b:a,c:u.value===l.value?1:"",d:e.o((e=>{return a=l.value,u.value=a,n.value=1,void s(!0);var a}),a)}))),b:e.f(v.value,((l,a,o)=>({a:l.image,b:e.t(l.roomType),c:e.t(l.title),d:e.t(l.description),e:"298d1d60-0-"+o,f:e.t(l.area),g:"298d1d60-1-"+o,h:e.t(l.designer),i:e.t(l.price),j:"298d1d60-2-"+o,k:e.o((e=>c(l)),a),l:a,m:e.o((e=>c(l)),a)}))),c:e.p({type:"home",size:"14",color:"#999"}),d:e.p({type:"person",size:"14",color:"#999"}),e:e.p({type:"right",size:"14",color:"#666"}),f:o.value},(o.value||v.value.length,{}),{g:v.value.length>0,h:0===v.value.length&&!a.value},0!==v.value.length||a.value?{}:{i:e.p({type:"home",size:"80",color:"#d9d9d9"}),j:e.o(f),k:e.o(g)},{l:a.value&&0===v.value.length},a.value&&0===v.value.length?{m:e.p({type:"spinner-cycle",size:"40",color:"#999"})}:{},{n:e.o(d),o:e.p({type:"up",size:"24",color:"#ffffff"}),p:t.value,q:e.o(p)})}});l.__runtimeHooks=1,wx.createPage(l);
