{"version":3,"file":"config.js","sources":["uni_modules/uni-stat/utssdk/common/config.uts"],"sourcesContent":["\r\nimport { UniStatOptions, UniStatCollectItemsOptions } from '../interface.uts'\r\n// 访问开始即启动小程序，访问结束结分为：进入后台超过5min、在前台无任何操作超过30min、在新的来源打开小程序；\r\nexport const sys = uni.getSystemInfoSync()\nexport const device = uni.getDeviceInfo()\nexport const sysAppBase = uni.getAppBaseInfo();\r\nexport const STAT_VERSION = sys.uniCompilerVersion\r\n\r\nexport const PAGE_PVER_TIME = 1800 // 页面在前台无操作结束访问时间 单位s\r\nexport const APP_PVER_TIME = 300 // 应用在后台结束访问时间 单位s\r\nexport const OPERATING_TIME = 10 // 数据上报时间 单位s\r\nexport const DIFF_TIME = 60 * 1000 * 60 * 24\r\n\r\nclass ConfigData {\r\n\tstatic __config_instance : ConfigData | null = null;\r\n\r\n\tpublic static getInstance() : ConfigData {\r\n\t\tif (ConfigData.__config_instance == null) {\r\n\t\t\tConfigData.__config_instance = new ConfigData()\r\n\t\t}\r\n\r\n\t\treturn ConfigData.__config_instance as ConfigData\r\n\t}\r\n\tprivate options : UniStatOptions | null = null\r\n\tprivate constructor() {\r\n\t\t// 私有构造函数，防止通过 new Singleton() 创建新实例\r\n\t}\r\n\r\n\tsetOptions(options : UniStatOptions | null) {\r\n\t\t// 处理参数默认值\r\n\t\t// 判断是否存在 options \r\n\t\tif (options == null) {\r\n\t\t\toptions = {} as UniStatOptions\r\n\t\t}\n\t\t\n\t\t// 是否开启统计，默认true\n\t\tif (options.enable == null) {\n\t\t\toptions.enable = true\n\t\t}\n\t\t\r\n\t\t// 是否开启debug，默认false\r\n\t\tif (options.debug == null) {\r\n\t\t\toptions.debug = false\r\n\t\t}\r\n\t\t// 上报周期，默认 10s \r\n\t\tif (options.reportInterval == null) {\r\n\t\t\toptions.reportInterval = 10\r\n\t\t}\r\n\r\n\t\t// 采集项配置\r\n\t\tif (options.collectItems == null) {\r\n\t\t\toptions.collectItems = {} as UniStatCollectItemsOptions\r\n\t\t}\r\n\t\tlet collectItems = options.collectItems as UniStatCollectItemsOptions\r\n\t\t// 是否开启推送，默认为false\r\n\t\tif (collectItems.uniPushClientID === null) {\r\n\t\t\tcollectItems.uniPushClientID = false\r\n\t\t}\r\n\r\n\t\t// 是否开启页面采集，默认为 true\r\n\t\tif (collectItems.uniStatPageLog === null) {\r\n\t\t\tcollectItems.uniStatPageLog = true\r\n\t\t}\r\n\t\toptions.collectItems = collectItems\r\n\r\n\t\tthis.options = options\r\n\t}\r\n\tgetOptions() : UniStatOptions {\r\n\t\t// 如果没有参数，获取参数时设置为默认值\r\n\t\tif (this.options == null) {\r\n\t\t\tthis.setOptions(null)\r\n\t\t}\n\t\treturn this.options as UniStatOptions\r\n\t}\r\n}\r\n\r\nexport const Config =  ConfigData.getInstance()"],"names":["uni","UniStatOptions","UniStatCollectItemsOptions"],"mappings":";;;MAGa,MAAMA,cAAG,MAAC,kBAAmB;MAC7B,SAASA,cAAG,MAAC,cAAe;MAC5B,aAAaA,cAAG,MAAC,eAAiB;AAClC,MAAA,eAAe,IAAI;AAEnB,MAAA,iBAAiB;AACjB,MAAA,gBAAgB;AAChB,MAAA,iBAAiB;AAG9B,MAAM,WAAU;AAAA,EAGR,OAAO,cAAW;AACxB,QAAI,WAAW,qBAAqB,MAAM;AACzC,iBAAW,oBAAoB,IAAI;IACnC;AAED,WAAO,WAAW;AAAA,EAClB;AAAA,EAED,cAAA;AADQ,SAAO,UAA2B;AAAA,EAGzC;AAAA,EAED,WAAW,UAA+B,MAAA;AAGzC,QAAI,WAAW,MAAM;AACpB,gBAAO,IAAAC,oDAAG,CAAA,CAAoB;AAAA,IAC9B;AAGD,QAAI,QAAQ,UAAU,MAAM;AAC3B,cAAQ,SAAS;AAAA,IACjB;AAGD,QAAI,QAAQ,SAAS,MAAM;AAC1B,cAAQ,QAAQ;AAAA,IAChB;AAED,QAAI,QAAQ,kBAAkB,MAAM;AACnC,cAAQ,iBAAiB;AAAA,IACzB;AAGD,QAAI,QAAQ,gBAAgB,MAAM;AACjC,cAAQ,eAAe,IAAAC,qCAAA,2BAAA,CAAgC,CAAA;AAAA,IACvD;AACD,QAAI,eAAe,QAAQ;AAE3B,QAAI,aAAa,oBAAoB,MAAM;AAC1C,mBAAa,kBAAkB;AAAA,IAC/B;AAGD,QAAI,aAAa,mBAAmB,MAAM;AACzC,mBAAa,iBAAiB;AAAA,IAC9B;AACD,YAAQ,eAAe;AAEvB,SAAK,UAAU;AAAA,EACf;AAAA,EACD,aAAU;AAET,QAAI,KAAK,WAAW,MAAM;AACzB,WAAK,WAAW,IAAI;AAAA,IACpB;AACD,WAAO,KAAK;AAAA,EACZ;;AA3DM,WAAiB,oBAAuB;MA8DnC,SAAU,WAAW,YAAW;;;;;;;;;"}