{"version":3,"file":"js_sdk.js","sources":["uni_modules/uni-pay-x/js_sdk/js_sdk.uts"],"sourcesContent":["function checkPlatform() {\n\t// #ifdef H5\n\ttype SystemInfo = {\n\t\twin: boolean,\n\t\tmac: boolean,\n\t\txll: boolean\n\t};\n\tlet system = {\n\t\twin: false,\n\t\tmac: false,\n\t\txll: false\n\t} as SystemInfo;\n\tlet p = navigator.platform;\n\t\n\tsystem.win = p.indexOf(\"Win\") == 0;\n\tsystem.mac = p.indexOf(\"Mac\") == 0;\n\tsystem.x11 = p == \"X11\" || p.indexOf(\"Linux\") == 0;\n\tif (system.win || system.mac || system.xll) {\n\t\tlet ua = navigator.userAgent.toLowerCase();\n\t\tif (ua.indexOf(\"micromessenger\") > -1) {\n\t\t\t// 微信开发者工具下访问（注意微信开发者工具下无法唤起微信公众号支付）\n\t\t\treturn \"pc-weixin\";\n\t\t} else {\n\t\t\treturn \"pc\";\n\t\t}\n\t} else {\n\t\tif (p.indexOf(\"iPhone\") > -1 || p.indexOf(\"iPad\") > -1) {\n\t\t\treturn \"ios\";\n\t\t} else {\n\t\t\treturn \"android\";\n\t\t}\n\t}\n\t// #endif\n}\n\n/**\n * 获取当前H5所在的环境\n */\nfunction getH5Env() {\n\t// #ifdef H5\n\tconst ua = window.navigator.userAgent.toLowerCase();\n\tconst isWeixin = /micromessenger/i.test(ua);\n\tconst isAlipay = /alipay/i.test(ua);\n\tconst isMiniProgram = /miniprogram/i.test(ua);\n\tif (isWeixin) {\n\t\tif (isMiniProgram) {\n\t\t\treturn \"mp-weixin\";\n\t\t} else {\n\t\t\treturn \"h5-weixin\";\n\t\t}\n\t} else if (isAlipay) {\n\t\tif (isMiniProgram) {\n\t\t\treturn \"mp-alipay\";\n\t\t} else {\n\t\t\treturn \"h5-alipay\";\n\t\t}\n\t}\n\treturn \"h5\";\n\t// #endif\n}\n\n// json2的属性全部赋值给json1\nfunction objectAssign(json1:UTSJSONObject,json2:UTSJSONObject) :UTSJSONObject{\n\tfor(let key in json2) {\n\t\tjson1[key] = json2[key];\n\t}\n\treturn json1;\n}\n\nfunction getWeixinCode () : Promise<string>{\n\treturn new Promise((resolve, reject) => {\n\t\t// #ifdef MP-WEIXIN\n\t\tuni.login({\n\t\t\tprovider: 'weixin',\n\t\t\tsuccess(res) {\n\t\t\t\tresolve(res.code)\n\t\t\t},\n\t\t\tfail(err) {\n\t\t\t\treject(new Error('获取微信code失败'))\n\t\t\t}\n\t\t})\n\t\t// #endif\n\t\t// #ifndef MP-WEIXIN\n\t\tresolve('')\n\t\t// #endif\n\t})\n};\n\nfunction getAlipayCode () : Promise<string>{\n\treturn new Promise((resolve, reject) => {\n\t\t// #ifdef MP-ALIPAY\n\t\tuni.login({\n\t\t\tprovider: 'alipay',\n\t\t\tsuccess(res) {\n\t\t\t\tresolve(res.code);\n\t\t\t},\n\t\t\tfail(err) {\n\t\t\t\treject(new Error('获取支付宝code失败，可能是没有关联appid或你的支付宝开发者工具还没有登录'));\n\t\t\t}\n\t\t});\n\t\t// #endif\n\t\t// #ifndef MP-ALIPAY\n\t\tresolve('');\n\t\t// #endif\n\t});\n\t\n};\n\nexport {\n\tcheckPlatform,\n\tgetH5Env,\n\tobjectAssign,\n\tgetWeixinCode,\n\tgetAlipayCode\n};"],"names":["uni"],"mappings":";;AA8DA,SAAS,aAAa,OAAoB,OAAmB;AAC5D,WAAQ,OAAO,OAAO;AACrB,UAAM,GAAG,IAAI,MAAM,GAAG;AAAA,EACtB;AACD,SAAO;AACR;AAEA,SAAS,gBAAa;AACrB,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAM;AAElCA,wBAAI,MAAM,IAAA,cAAA;AAAA,MACT,UAAU;AAAA,MACV,QAAQ,KAAG;AACV,gBAAQ,IAAI,IAAI;AAAA,MAChB;AAAA,MACD,KAAK,KAAG;AACP,eAAO,IAAI,MAAM,YAAY,CAAC;AAAA,MAC9B;AAAA,IACD,CAAA,CAAA;AAAA,EAKF,CAAC;AACF;;;"}