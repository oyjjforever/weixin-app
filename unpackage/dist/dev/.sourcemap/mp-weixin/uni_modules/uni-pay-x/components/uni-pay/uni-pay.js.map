{"version":3,"file":"uni-pay.js","sources":["uni_modules/uni-pay-x/components/uni-pay/uni-pay.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/VzovV29ya3BsYWNlLzIu5bCP56iL5bqPL2xpaGFpLWFwcC91bmlfbW9kdWxlcy91bmktcGF5LXgvY29tcG9uZW50cy91bmktcGF5L3VuaS1wYXkudXZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"uni-pay\">\n\n\t\t<!-- PC版收银台弹窗开始 -->\n\t\t<uni-pay-popup v-if=\"modeCom == 'pc'\" ref=\"payPopup\" type=\"center\" :safe-area=\"false\">\n\t\t\t<view class=\"pc-pay-popup\">\n\t\t\t\t<view class=\"pc-pay-popup-title\"><text class=\"text\">收银台</text></view>\n\t\t\t\t<view class=\"pc-pay-popup-flex\">\n\t\t\t\t\t<view class=\"pc-pay-popup-qrcode-box\">\n\t\t\t\t\t\t<image class=\"pc-pay-popup-qrcode-image\" :src=\"orderRes['qr_code_image']\"></image>\n\t\t\t\t\t\t<view class=\"pc-pay-popup-amount-box\">\n\t\t\t\t\t\t\t<view class=\"pc-pay-popup-amount-tips\">\n\t\t\t\t\t\t\t\t<text class=\"text\" v-if=\"orderRes['provider'] == 'wxpay'\">微信扫一扫付款</text>\n\t\t\t\t\t\t\t\t<text class=\"text\" v-else-if=\"orderRes['provider'] == 'alipay'\">支付宝扫一扫付款</text>\n\t\t\t\t\t\t\t\t<text class=\"text\" v-else>扫一扫付款</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"pc-pay-popup-amount\"><text class=\"text\">{{ (totalFeeCom / 100).toFixed(2) }}</text></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"pc-pay-popup-complete-button\" v-if=\"orderRes['qr_code_image']\">\n\t\t\t\t\t\t\t<button type=\"primary\" @click=\"_getOrder()\">我已完成支付</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"pc-pay-popup-provider-list\">\n\t\t\t\t\t\t<view class=\"pc-pay-popup-provider-item\" v-if=\"currentProviders.indexOf('wxpay') > -1\" :class=\"myOptions['provider'] == 'wxpay' ? 'active' : ''\"\n\t\t\t\t\t\t\t@click=\"_pcChooseProvider('wxpay')\">\n\t\t\t\t\t\t\t<image :src=\"images['wxpay']\" class=\"pc-pay-popup-provider-image\"></image>\n\t\t\t\t\t\t\t<text class=\"pc-pay-popup-provider-text\">微信支付</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"pc-pay-popup-provider-item\" v-if=\"currentProviders.indexOf('alipay') > -1\" :class=\"myOptions['provider'] == 'alipay' ? 'active' : ''\"\n\t\t\t\t\t\t\t@click=\"_pcChooseProvider('alipay')\">\n\t\t\t\t\t\t\t<image :src=\"images['alipay']\" class=\"pc-pay-popup-provider-image\"></image>\n\t\t\t\t\t\t\t<text class=\"pc-pay-popup-provider-text\">支付宝支付</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"pc-pay-popup-logo\">\n\t\t\t\t\t\t\t<image class=\"image\" :src=\"logo\" mode=\"widthFix\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-pay-popup>\n\t\t<!-- PC版收银台弹窗结束 -->\n\n\t\t<!-- 手机版收银台弹窗开始 -->\n\t\t<uni-pay-popup v-else ref=\"payPopup\" type=\"bottom\" :safe-area=\"false\">\n\t\t\t<view class=\"mobile-pay-popup\" :style=\"'min-height: '+height+';'\">\n\t\t\t\t<view class=\"mobile-pay-popup-title\"><text class=\"text\">收银台</text></view>\n\t\t\t\t<view class=\"mobile-pay-popup-amount-box\">\n\t\t\t\t\t<view><text class=\"text\">待支付金额：</text></view>\n\t\t\t\t\t<view class=\"mobile-pay-popup-amount\"><text class=\"text\">{{ (totalFeeCom / 100).toFixed(2) }}</text></view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mobile-pay-popup-provider-list\">\n\t\t\t\t\t<view class=\"uni-list\">\n\n\t\t\t\t\t\t<view class=\"uni-list-item\" v-if=\"currentProviders.indexOf('wxpay') > -1\" @click=\"createOrderByProvider('wxpay')\">\n\t\t\t\t\t\t\t<view class=\"uni-list-item__container container--right\">\n\t\t\t\t\t\t\t\t<view class=\"uni-list-item__header\">\n\t\t\t\t\t\t\t\t\t<image :src=\"images['wxpay']\" class=\"image\"></image>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"uni-list-item__content uni-list-item__content--center\">\n\t\t\t\t\t\t\t\t\t<text class=\"text\">微信支付</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"arrowright\"></view>\n\t\t\t\t\t\t</view>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-pay-popup>\n\t\t<!-- 手机版收银台弹窗结束 -->\n\n\t\t<!-- 二维码支付弹窗开始 -->\n\t\t<uni-pay-popup ref=\"qrcodePopup\" type=\"center\" :safe-area=\"false\" :animation=\"false\" :mask-click=\"false\" @close=\"clearQrcode\">\n\t\t\t<view class=\"qrcode-popup-content\">\n\t\t\t\t<image :src=\"orderRes['qr_code_image']\" class=\"qrcode-image\"></image>\n\t\t\t\t<view class=\"qrcode-popup-info\">\n\t\t\t\t\t<view class=\"qrcode-popup-info-fee-box\">\n\t\t\t\t\t\t<view class=\"qrcode-popup-info-fee\">\n\t\t\t\t\t\t\t<text class=\"text\">{{ (totalFeeCom / 100).toFixed(2) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"qrcode-popup-info-fee-unit\">\n\t\t\t\t\t\t\t<text class=\"text\">元</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-if=\"myOptions['provider'] == 'wxpay'\"><text>请用微信扫码支付</text></view>\n\t\t\t\t\t<view v-else-if=\"myOptions['provider'] == 'alipay'\"><text>请用支付宝扫码支付</text></view>\n\t\t\t\t</view>\n\t\t\t\t<button type=\"primary\" @click=\"_getOrder()\" class=\"qrcode-popup-btn-primary\">我已完成支付</button>\n\t\t\t\t<view class=\"qrcode-popup-cancel\" @click=\"closePopup('qrcodePopup')\"><text class=\"qrcode-popup-cancel-text\">暂不支付</text></view>\n\t\t\t</view>\n\t\t</uni-pay-popup>\n\t\t<!-- 二维码支付弹窗结束 -->\n\n\t\t<!-- 外部浏览器确认支付弹窗开始 -->\n\t\t<uni-pay-popup ref=\"payConfirmPopup\" type=\"center\" :safe-area=\"false\" :animation=\"false\" :mask-click=\"false\">\n\t\t\t<view class=\"pay-confirm-popup-content\">\n\t\t\t\t<view class=\"pay-confirm-popup-title\"><text>请确认支付是否已完成</text></view>\n\t\t\t\t<view><button type=\"primary\" @click=\"_getOrder()\">已完成支付</button></view>\n\t\t\t\t<view class=\"pay-confirm-popup-refresh\"><button type=\"default\" @click=\"_afreshPayment()\">支付遇到问题，重新支付</button></view>\n\t\t\t\t<view class=\"pay-confirm-popup-cancel\" @click=\"closePopup('payConfirmPopup')\"><text>暂不支付</text></view>\n\t\t\t</view>\n\t\t</uni-pay-popup>\n\t\t<!-- 外部浏览器确认支付弹窗结束 -->\n\n\n\t</view>\n</template>\n\n<script lang=\"uts\">\n\timport { checkPlatform, objectAssign, getWeixinCode, getAlipayCode } from \"../../js_sdk/js_sdk\"\n\texport default {\n\t\tname: \"uni-pay\",\n\t\temits: [\"success\", \"cancel\", \"fail\", \"create\", \"mounted\", \"qrcode\"],\n\t\tprops: {\n\t\t\t/**\n\t\t\t * Banner广告位id\n\t\t\t */\n\t\t\tadpid: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * 是否自动跳转到插件内置的支付成功页面（具有看广告功能，可以增加开发者收益）默认true\n\t\t\t */\n\t\t\ttoSuccessPage: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\t/**\n\t\t\t * 支付成功后，点击查看订单按钮时跳转的页面地址\n\t\t\t */\n\t\t\treturnUrl: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * 支付结果页主色调，默认支付宝小程序为#108ee9，其他端均为#01be6e\n\t\t\t * 建议：绿色系 #01be6e 蓝色系 #108ee9 咖啡色 #816a4e 粉红 #fe4070 橙黄 #ffac0c 橘黄 #ff7100\n\t\t\t */\n\t\t\tmainColor: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * 收银台模式\n\t\t\t * mobile 手机版\n\t\t\t * pc 电脑版\n\t\t\t */\n\t\t\tmode: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * PC收银台模式时，展示的logo\n\t\t\t */\n\t\t\tlogo: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"/static/logo.png\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * 收银台高度（默认70vh）\n\t\t\t */\n\t\t\theight: {\n\t\t\t\ttype: [String],\n\t\t\t\tdefault: \"70vh\"\n\t\t\t},\n\t\t\t/**\n\t\t\t * 是否打印运行过程日志\n\t\t\t */\n\t\t\tdebug: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t// 支付参数\n\t\t\t\tmyOptions: {} as UTSJSONObject,\n\t\t\t\t// 支付云对象返回结果\n\t\t\t\torderRes: {\n\t\t\t\t\torder: \"\",\n\t\t\t\t\torder_no: \"\",\n\t\t\t\t\tout_trade_no: \"\",\n\t\t\t\t\tprovider: \"\",\n\t\t\t\t\tprovider_pay_type: \"\",\n\t\t\t\t\terrCode: 0,\n\t\t\t\t} as UTSJSONObject,\n\t\t\t\timages: {\n\t\t\t\t\twxpay: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABC9JREFUeF7tWk1a20AMlUzv0bDr13AAYAOcpLCBcoqQU1DYEE6C2QAHIP26q3sPPOqniU2cZMYj+SeGxN5kEXlm9ObpjaQxwpY/uOX+Qw9Az4AtR6APgS0nQC+CfQi0FQLfrvcHXwAGPP4bQMK/fy5f7O9HehphwPfb/dOIogEhHQHBcamDCDESPoIxMQPTNSi1ABj+OrwDpNMaO5og4P2bMZOugFADwNTewWhU0/FVzAgnKZnxuoFQAbB3vX9MET7U2PHgq4R09vv8ZRI0bMhADMDw9uAhGN8NLQrWyAYRAGt1PgcRIU5TOms7JIIAdOL8nElJauikTRBKAdi7ObwioFFTzHaMw3mBzRV8DwKOXy+ertpagxcAq/YR/g2d6TlNrUDu4EiiE0Why4T1rgyINoXRC4DgjE+mF8+7RYAkp4RrRyVztRUKTgCkuz89fz4pAiB5z7WbklBrKxScAEgWxI6joZPXy5c4B0H0nkPdhzcHFIxxhHgZ8OA7AgMnAMObA479UnF6H5twQpF5RBMdibPDvB4AAAL6IZ0rNbTb9IngAyC8IwJ0K5okQBgzqFEKSV4wcXg17bxl8fIiJXFc0bHAgYLjYlHEFaZlVUQDoAIbcVZaN1VRrgAgUfImASiKW6Yh4pAohmHVQqpLABI0dMYiKhJPCeoV0ueuQsDmEJrkSeJ/bqNJnOqfApqVzWznzrdYWkvzhnUDYGnPKLTdV5gpfLiOqJUIaTefF8RKH6wxtAOX2IdA8NcCmmRItmBLfVF5jRBnR58kGQtWlGUJlBeAxpQ5A4eFKTu/ufLzPQv1f2mRRDiZ/nyyYwYrypI0OlQOc/9PsgshDsh2v+BUwTFnD3K5DglVlD4WlDZEsqywNgiK2F9gQBkLi7EtyV59WhBsiTURCjy5QZMgYRn9cxbZWgCQ+IKlnH2sFQYTURHmCYMgAJaKs9aYPkXNXGK6QhQdt9xeC4UhTC+eV/wVASASmrKj6IMA4NIBMQDsX1VN4IlbuU0K7vmiQS0G5EOpmiW6I1Dpjtp8pYc5yxYVj0RtXcMJcwDFSiqYLh2x+QgqAJwnAuEEydxbkZtdj+fKPVfwbPIq7KngqvMVX4WoAmDBAcH9HTMmXw23s0LJSlPOOsZx0l8VAu/0Fzjuc2Td3aY5zf1VoZgBvPgmvuhoIrFSMSXQThcDoJo0YLxGLfBSv5IINgVC1XxCOb/oZrkTBtRJqkQgKG6ROgPgPbGq/6HVIiYK51WngAj5ikbBhoZi3FALbHmozhlQXFChTc75g6wRM2ufzb9N/IwMcG0wg8HZJf9HBF/tFZnBBBH+cW/BpBDnd4XLDNJcon4oBiiY7jS194mEI0IaSz+12ygAclSYEcXvFsqA3UgANEzqAdCgtYm2PQM2cVc1PvUM0KC1ibY9AzZxVzU+bT0D/gPs/oxfcUEcJAAAAABJRU5ErkJggg==\",\n\t\t\t\t\talipay: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA2FJREFUeF7tmU122jAQx2cMB2hp9yULeK+naHISwhJyiIRDBJaQkwRO0fdgEWff0h4ANH0yFc+m+hhbckKNvJUsaX76z4ckhAv/8MLthwggKuDCCUQXuHABxCAYXSC6wIUTiC7wFgL4MPveTaj9optrO+696ya8yeQRQFRAdIEYAxoVBD/PNtdCwHWpDIJwr+1PMCk1DgAkCSx/jHrLsv/p+lfKAp3HzQOYDAqxKtcYBJPtXe/B1Y3TXgmATGst0WIrgAC7JmBINOQsNN8HE0zfVQFlFxzrgFgHNLQOkNJuQ7vrcgkS1CXEua5fgnDj+l+172CX/h59Tbn9Of0qBUE1cGe2ngPhLWeiEH0krFDBT63HC8Cnx/VtFuFDfgl90UOldDvuX4WcSo7lBSD0YuR4H6ebZwRNkRUw9xdSah1G+IzZmW5IW7ERDX/e9Rc+YwerBEMvQo1nrhfqkf/ZuYCxxK5J/t4AjkFQBi71CXxFoFSWq2XTlkn+AndXodNf5SwgT4J7gnttoNL6BqUEmCZET/tkvzQZYj5g1Sf/0goIkfcJYIkEK5HsFnkYnen6BXQptUb5lwJgMz4zCihXD/BqAwVDuoy+Uqx399kACrkZaYECVjY5qxJZXpoQwrcDHB6UghfVvPssAMo35W4R7oZVg5EMmAJxUCZ2CNzfVJ2Pm6qdleDBNwFClaHZdRrQAEhWe25VSPCuAMo1tnQhdIzMNUixfDYBqAOGVQEKQB15OFMCwXPV3QsFww7g73E39Pudr/Gn0EyplQPXCkBF/5AKsBtPKRA+AdKAEx/0BhYLL9nHFkhZLiBvbkOcxFzG5wPtoe7gBUrrTiMttqO+8ebZCkAtWErs17jHvrrSLcj+lkCpKeV5g/ABIA05lqgVM4Er2nPhZgev7DHGnToLG+ALIC9budgWwoRzyuMUPlzj8waVBuELIFOB5iksi7xIKQh8PS4wu8/j+a3vBScbRAgABVfg5BZbH6SFgP0kVIl7UCjNja4RCkAGwecaPLDhp4yNsSYkADlp/mncdNLLu8fpud9XQK7//wERGoBrAefSfgRBsLI9pTtPg+diUNV1yLuJypVg1Un/p/8arwDXZkQALkJNb48KaPoOu+yLCnARanp7VEDTd9hlX1SAi1DT2/8AaakVXysj5qkAAAAASUVORK5CYII=\"\n\t\t\t\t} as UTSJSONObject,\n\t\t\t\toriginalRroviders: [\"wxpay\", \"alipay\"] as Array<string>,\n\t\t\t\tcurrentProviders: [\"wxpay\", \"alipay\"] as Array<string>,\n\t\t\t\topenid: \"\"\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\n\t\t\tif (this.openid == \"\") {\n\t\t\t\tnew Promise(async (resolve, reject) => {\n\t\t\t\t\tlet code = await this.getCode();\n\t\t\t\t\tlet res = await this.getOpenid({\n\n\t\t\t\t\t\tprovider: \"wxpay\",\n\n\n\n\n\t\t\t\t\t\tcode\n\t\t\t\t\t});\n\t\t\t\t\tresolve(res);\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tif (res['openid'] != null) {\n\t\t\t\t\t\tthis.openid = res['openid'];\n\t\t\t\t\t}\n\t\t\t\t}).catch((err) => {\n\t\t\t\t\treject(err);\n\t\t\t\t})\n\t\t\t}\n\n\n\n\t\t\t// 如果是微信小程序，则设置只支持微信支付\n\t\t\tthis.originalRroviders = [\"wxpay\"];\n\t\t\tthis.currentProviders = JSON.parse(JSON.stringify(this.originalRroviders));\n\n\n\n\n\n\n\t\t\tlet insideData = {\n\t\t\t\timages: this.images as UTSJSONObject,\n\t\t\t\toriginalRroviders: this.originalRroviders as Array<string>,\n\t\t\t\tcurrentProviders: this.currentProviders as Array<string>,\n\t\t\t} as UTSJSONObject;\n\t\t\tthis.$emit(\"mounted\", insideData);\n\t\t},\n\t\tmethods: {\n\t\t\t// 发起支付 - 打开支付选项弹窗\n\t\t\tasync open(options : UTSJSONObject) : Promise<void> {\n\t\t\t\tlet provider = options['provider'] as string | null;\n\t\t\t\tif (provider != null && provider != \"\") {\n\t\t\t\t\tlet providers : Array<string> = [];\n\t\t\t\t\tthis.originalRroviders.map((item : string) => {\n\t\t\t\t\t\tif (provider == item) {\n\t\t\t\t\t\t\tproviders.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.currentProviders = providers;\n\t\t\t\t\toptions['provider'] = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.currentProviders = JSON.parse(JSON.stringify(this.originalRroviders)) as Array<string>;\n\t\t\t\t}\n\t\t\t\tthis.myOptions = options;\n\t\t\t\tif (this.currentProviders.length == 1) {\n\t\t\t\t\tthis.createOrder({ provider: this.currentProviders[0] });\n\t\t\t\t} else {\n\t\t\t\t\tif (this.modeCom == \"pc\") {\n\t\t\t\t\t\tthis._pcChooseProvider(this.currentProviders[0]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.openPopup(\"payPopup\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateOrderByProvider(provider : string) {\n\t\t\t\tthis.createOrder({\n\t\t\t\t\tprovider\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 创建支付\n\t\t\tasync createOrder(data : UTSJSONObject) : Promise<void> {\n\t\t\t\tlet options = this.myOptions;\n\t\t\t\toptions['qr_code'] = false;\n\t\t\t\toptions = objectAssign(options, data);\n\t\t\t\tif (options['provider'] == \"appleiap\") {\n\t\t\t\t\t// 苹果虚拟支付走特殊逻辑\n\n\n\n\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\t\tcontent: \"请在iOS系统中执行\",\n\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t})\n\n\t\t\t\t}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t\tlet createOrderData = {\n\t\t\t\t\tprovider: options['provider'],\n\t\t\t\t\ttotal_fee: options.getNumber('total_fee'),\n\t\t\t\t\torder_no: options['order_no'],\n\t\t\t\t\tout_trade_no: options['out_trade_no'],\n\t\t\t\t\tdescription: options['description'],\n\t\t\t\t\ttype: options['type'],\n\t\t\t\t\tqr_code: options.getBoolean('qr_code'),\n\t\t\t\t\tcustom: options.getJSON('custom'),\n\t\t\t\t\tother: options.getJSON('other'),\n\t\t\t\t\twxpay_virtual: options.getJSON('wxpay_virtual'), // 微信小程序虚拟支付需要\n\t\t\t\t} as UTSJSONObject;\n\n\n\n\n\n\n\t\t\t\tif (this.openid != \"\") {\n\t\t\t\t\tcreateOrderData['openid'] = this.openid;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.createOrder(createOrderData);\n\t\t\t\t\tif (res['errCode'] == 0) {\n\t\t\t\t\t\tthis.$emit(\"create\", res);\n\t\t\t\t\t\tif (res['qr_code'] != null && res['qr_code'] == true && options.getBoolean('cancel_popup') != true) {\n\t\t\t\t\t\t\tthis.orderRes = res;\n\t\t\t\t\t\t\t// 展示组件内置的二维码弹窗\n\t\t\t\t\t\t\tif (this.modeCom == \"pc\") {\n\t\t\t\t\t\t\t\tthis.openPopup(\"payPopup\");\n\t\t\t\t\t\t\t\tthis._pcChooseProvider(options['provider'] as string);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.openPopup(\"qrcodePopup\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 调起支付\n\t\t\t\t\t\t\tthis.orderPayment(res);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$emit(\"fail\", res);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.$emit(\"fail\", {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 调起支付\n\t\t\torderPayment(res : UTSJSONObject) {\n\t\t\t\tthis.orderRes = res;\n\t\t\t\tif (res['qr_code'] != null && res['qr_code'] != \"\") {\n\t\t\t\t\tthis.$emit(\"qrcode\", res);\n\t\t\t\t}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t\tlet _order = res.get('order');\n\t\t\t\tlet orderStr = typeof _order == \"string\" ? _order as string : JSON.stringify(_order) as string;\n\t\t\t\tuni.__f__('log','at uni_modules/uni-pay-x/components/uni-pay/uni-pay.uvue:407','orderStr: ', orderStr)\n\t\t\t\tuni.requestPayment({\n\t\t\t\t\tprovider: res['provider'] as string,\n\t\t\t\t\torderInfo: orderStr,\n\n\t\t\t\t\t..._order,\n\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tuni.__f__('log','at uni_modules/uni-pay-x/components/uni-pay/uni-pay.uvue:415',\"requestPaymentSuccess\", JSON.stringify(res))\n\t\t\t\t\t\tthis._getOrder();\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tuni.__f__('log','at uni_modules/uni-pay-x/components/uni-pay/uni-pay.uvue:419',\"requestPaymentFail\", JSON.stringify(err))\n\t\t\t\t\t\tlet errCode = err.errCode;\n\t\t\t\t\t\tlet errMsg = err.errMsg;\n\t\t\t\t\t\tif (errCode == 700601 || errMsg.indexOf(\"fail cancel\") > -1) {\n\t\t\t\t\t\t\t// 用户取消支付\n\t\t\t\t\t\t\tthis.$emit(\"cancel\", {\n\t\t\t\t\t\t\t  errCode: errCode,\n\t\t\t\t\t\t\t  errMsg: errMsg\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 发起支付失败\n\t\t\t\t\t\t\tuni.__f__('error','at uni_modules/uni-pay-x/components/uni-pay/uni-pay.uvue:430',\"uni.requestPayment:fail\", err);\n\t\t\t\t\t\t\tthis.$emit(\"fail\", {\n\t\t\t\t\t\t\t\terrCode: errCode,\n\t\t\t\t\t\t\t\terrMsg: errMsg\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t},\n\t\t\t// 打开弹窗\n\t\t\topenPopup(name : string) {\n\t\t\t\tlet popupRef = this.$refs[name] as UniPayPopupComponentPublicInstance;\n\t\t\t\tpopupRef.open();\n\t\t\t},\n\t\t\t// 关闭弹窗\n\t\t\tclosePopup(name : string) {\n\t\t\t\tlet popupRef = this.$refs[name] as UniPayPopupComponentPublicInstance;\n\t\t\t\tpopupRef.close();\n\t\t\t},\n\t\t\t// 查询订单（查询支付情况）\n\t\t\tasync getOrder(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.getOrder(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 发起退款（此接口需要admin角色才可以访问）\n\t\t\tasync refund(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.refund(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 查询退款（查询退款情况）\n\t\t\tasync getRefund(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.getRefund(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 关闭订单\n\t\t\tasync closeOrder(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.closeOrder(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 获取支持的支付供应商\n\t\t\tasync getPayProviderFromCloud(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.getPayProviderFromCloud(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 获取支付配置内的appid（主要用于获取获取微信公众号的appid，用以获取code）\n\t\t\tasync getProviderAppId(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.getProviderAppId(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 根据code获取openid\n\t\t\tasync getOpenid(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.getOpenid(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 验证iosIap苹果内购支付凭据\n\t\t\tasync verifyReceiptFromAppleiap(data : UTSJSONObject) : Promise<UTSJSONObject> {\n\t\t\t\ttry {\n\t\t\t\t\t// 引入支付云对象\n\t\t\t\t\tconst uniPayCo = uniCloud.importObject(\"uni-pay-co\");\n\t\t\t\t\tlet res = await uniPayCo.verifyReceiptFromAppleiap(data);\n\t\t\t\t\treturn res;\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\terrCode: -1,\n\t\t\t\t\t\terrMsg: (err as Error).message\n\t\t\t\t\t} as UTSJSONObject\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 支付成功后的逻辑\n\t\t\tpaySuccess(res : UTSJSONObject) {\n\t\t\t\tthis.closePopup(\"payPopup\");\n\t\t\t\tthis.closePopup(\"payConfirmPopup\");\n\t\t\t\tthis.clearQrcode();\n\t\t\t\tlet toSuccessPage = this.toSuccessPage as boolean;\n\t\t\t\tif (toSuccessPage) {\n\t\t\t\t\t// 跳转到支付成功的内置页面\n\t\t\t\t\tthis.pageToSuccess(res);\n\t\t\t\t}\n\t\t\t\tthis.$emit(\"success\", res);\n\t\t\t},\n\t\t\tpageToSuccess(res : UTSJSONObject) {\n\t\t\t\tlet out_trade_no = res['out_trade_no'] as string;\n\t\t\t\tlet pay_order = res.getJSON('pay_order') as UTSJSONObject;\n\t\t\t\tlet order_no = pay_order['order_no'] as string;\n\t\t\t\t//let pay_date = pay_order['pay_date'];\n\t\t\t\tlet total_fee = pay_order.getNumber('total_fee');\n\t\t\t\tif (total_fee == null) {\n\t\t\t\t\ttotal_fee = 0;\n\t\t\t\t}\n\t\t\t\tlet returnUrl = this.returnUrl as string;\n\t\t\t\tlet adpid = this.adpid as string;\n\t\t\t\tlet mainColor = this.mainColor as string;\n\n\t\t\t\tif (this.modeCom != \"pc\") {\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: `/uni_modules/uni-pay-x/pages/success/success?out_trade_no=${out_trade_no}&order_no=${order_no}&total_fee=${total_fee}&adpid=${adpid}&return_url=${returnUrl}&main_color=${mainColor}`\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (returnUrl != \"\") {\n\t\t\t\t\t\tlet url = returnUrl + `?out_trade_no=${out_trade_no}&order_no=${order_no}`;\n\t\t\t\t\t\tif (url.indexOf(\"/\") != 0) url = `/${url}`;\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 监听 - 关闭二维码弹窗\n\t\t\tclearQrcode() {\n\t\t\t\tthis.orderRes[\"codeUrl\"] = \"\";\n\t\t\t\tthis.orderRes[\"qr_code_image\"] = \"\";\n\t\t\t},\n\t\t\t// 内部函数查询支付状态\n\t\t\tasync _getOrder() : Promise<void> {\n\t\t\t\tlet out_trade_no = this.orderRes[\"out_trade_no\"] as string;\n\t\t\t\tlet res = await this.getOrder({\n\t\t\t\t\tout_trade_no,\n\t\t\t\t\tawait_notify: true\n\t\t\t\t});\n\t\t\t\tif (res['errCode'] == 0) {\n\t\t\t\t\tlet has_paid = res.getBoolean('has_paid');\n\t\t\t\t\tif (has_paid != null && has_paid == true) {\n\t\t\t\t\t\tthis.closePopup(\"qrcodePopup\");\n\t\t\t\t\t\tthis.paySuccess(res);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 重新发起支付\n\t\t\t_afreshPayment() {\n\t\t\t\tthis.orderPayment(this.orderRes);\n\t\t\t},\n\t\t\t// pc版弹窗选择支付方式\n\t\t\t_pcChooseProvider(provider : string) {\n\t\t\t\tlet _provider : string = this.myOptions[\"provider\"] as string;\n\t\t\t\tif (provider != _provider) {\n\t\t\t\t\tthis.createOrder({ provider: provider })\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 苹果虚拟支付支付逻辑\n\t\t\tasync _appleiapCreateOrder(options : UTSJSONObject) : Promise<void>{\n\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请在iOS系统中打开\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t},\n\t\t\t// 苹果虚拟支付未完成订单检测\n\t\t\tappleiapRestore() {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\t},\n\n\t\t\t// 获取code\n\t\t\tasync getCode() : Promise<string>{\n\n\t\t\t\treturn getWeixinCode();\n\n\n\n\n\t\t\t},\n\n\t\t},\n\t\twatch: {\n\n\t\t},\n\t\tcomputed: {\n\t\t\tmodeCom() : string {\n\t\t\t\tlet mode = this.mode as string;\n\t\t\t\tif (mode != \"\") return mode;\n        let systemInfo = uni.getDeviceInfo();\n\t\t\t\treturn systemInfo.deviceType == \"pc\" ? \"pc\" : \"mobile\";\n\t\t\t},\n\t\t\ttotalFeeCom() : number {\n\t\t\t\tlet totalFee = this.myOptions.getNumber('total_fee');\n\t\t\t\treturn totalFee != null ? totalFee : 0;\n\t\t\t}\n\t\t},\n\t}\n</script>\n<style lang=\"scss\" scoped>\n\t$bgcolor: #f3f3f3;\n\n\t.uni-pay {}\n\n\t/* 手机版收银台弹窗开始 */\n\t.mobile-pay-popup {\n\t\twidth: 100%;\n\t\tmin-height: 450px;\n\t\tbackground-color: $bgcolor;\n\t\tborder-radius: 15px 15px 0 0;\n\t\toverflow: hidden;\n\n\t\t.mobile-pay-popup-title {\n\t\t\tbackground-color: #ffffff;\n\t\t\tpadding: 10px;\n\n\t\t\t.text {\n\t\t\t\ttext-align: center;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 20px;\n\t\t\t}\n\t\t}\n\n\t\t.mobile-pay-popup-amount-box {\n\t\t\tbackground-color: #ffffff;\n\t\t\tpadding: 15px;\n\n\t\t\t.mobile-pay-popup-amount {\n\t\t\t\tmargin-top: 10px;\n\n\t\t\t\t.text {\n\t\t\t\t\tcolor: #e43d33;\n\t\t\t\t\tfont-size: 30px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.mobile-pay-popup-provider-list {\n\t\t\tbackground-color: #ffffff;\n\t\t\tmargin-top: 10px;\n\n\t\t\t.uni-list {\n\t\t\t\tdisplay: flex;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tposition: relative;\n\t\t\t\tflex-direction: column;\n\n\t\t\t\t.uni-list-item {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground-color: #fff;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\tborder-bottom: 1px solid #f8f8f8;\n\n\n\n\n\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tbackground-color: #f1f1f1;\n\t\t\t\t\t}\n\n\t\t\t\t\t.uni-list-item__container {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: row;\n\t\t\t\t\t\tpadding: 12px 15px;\n\t\t\t\t\t\tpadding-left: 15px;\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\toverflow: hidden;\n\n\t\t\t\t\t\t.uni-list-item__header {\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tflex-direction: row;\n\t\t\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t\t\t.image {\n\t\t\t\t\t\t\t\twidth: 26px;\n\t\t\t\t\t\t\t\theight: 26px;\n\t\t\t\t\t\t\t\tmargin-right: 9px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.container--right {\n\t\t\t\t\t\tpadding-right: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t.uni-list-item__content {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tpadding-right: 8px;\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\toverflow: hidden;\n\n\t\t\t\t\t\t.text {\n\t\t\t\t\t\t\tcolor: #3b4144;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.uni-list-item__content--center {\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.arrowright {\n\t\t\t\t\t\tborder-top: 1px solid #bbbbbb;\n\t\t\t\t\t\tborder-right: 1px solid #bbbbbb;\n\t\t\t\t\t\twidth: 8px;\n\t\t\t\t\t\theight: 8px;\n\t\t\t\t\t\tmargin-right: 15px;\n\t\t\t\t\t\ttransform: rotate(45deg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 手机版收银台弹窗结束 */\n\n\t/* PC版收银台弹窗开始 */\n\t.pc-pay-popup {\n\t\twidth: 800px;\n\t\theight: 600px;\n\t\tbackground-color: $bgcolor;\n\t\tborder-radius: 10px;\n\t\toverflow: hidden;\n\n\t\t.pc-pay-popup-title {\n\t\t\tbackground-color: #ffffff;\n\t\t\theight: 66px;\n\n\t\t\t.text {\n\t\t\t\ttext-align: center;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 20px;\n\t\t\t\tline-height: 66px;\n\t\t\t}\n\t\t}\n\n\t\t.pc-pay-popup-flex {\n\t\t\twidth: 100%;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\n\t\t\t.pc-pay-popup-qrcode-box {\n\t\t\t\theight: 534px;\n\t\t\t\tflex: 1;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\n\t\t\t\t.pc-pay-popup-qrcode-image {\n\t\t\t\t\twidth: 225px;\n\t\t\t\t\theight: 225px;\n\t\t\t\t}\n\n\t\t\t\t.pc-pay-popup-amount-box {\n\t\t\t\t\t.pc-pay-popup-amount-tips {\n\t\t\t\t\t\tmargin-top: 20px;\n\n\t\t\t\t\t\t.text {\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.pc-pay-popup-amount {\n\t\t\t\t\t\tmargin-top: 20px;\n\n\t\t\t\t\t\t.text {\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tcolor: #dd524d;\n\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\tfont-size: 32px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.pc-pay-popup-complete-button {\n\t\t\t\t\tmargin-top: 20px;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t.pc-pay-popup-provider-list {\n\t\t\t\twidth: 300px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\n\t\t\t\t.pc-pay-popup-provider-item {\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t.pc-pay-popup-provider-image {\n\t\t\t\t\t\twidth: 60px;\n\t\t\t\t\t\theight: 60px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.pc-pay-popup-provider-text {\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.pc-pay-popup-provider-item.active {\n\t\t\t\t\tbackground-color: #ffffff;\n\t\t\t\t}\n\n\t\t\t\t.pc-pay-popup-provider-item:hover {\n\t\t\t\t\tbackground-color: #ffffff;\n\n\n\n\n\t\t\t\t}\n\n\t\t\t\t.pc-pay-popup-logo {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\n\t\t\t\t\t.image {\n\t\t\t\t\t\twidth: 120px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\t/* PC版收银台弹窗结束 */\n\n\t/* 二维码支付弹窗开始 */\n\t.qrcode-popup-content {\n\t\twidth: 300px;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 5px;\n\t\tpadding: 20px;\n\t\tbox-sizing: border-box;\n\t\ttext-align: center;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\t.qrcode-image {\n\t\t\twidth: 225px;\n\t\t\theight: 225px;\n\t\t}\n\n\t\t.qrcode-popup-info {\n\t\t\tpadding: 10px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: center;\n\n\t\t\t.qrcode-popup-info-fee-box {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tmargin-bottom: 3px;\n\n\t\t\t\t.qrcode-popup-info-fee {\n\t\t\t\t\t.text {\n\t\t\t\t\t\tcolor: red;\n\t\t\t\t\t\tfont-size: 30px;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.qrcode-popup-info-fee-unit {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\talign-items: flex-end;\n\t\t\t\t\tpadding-bottom: 5px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.qrcode-popup-btn-primary {\n\t\t\twidth: 260px;\n\t\t}\n\n\t\t.qrcode-popup-cancel {\n\t\t\tmargin-top: 10px;\n\t\t\twidth: 260px;\n\n\t\t\t.qrcode-popup-cancel-text {\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 二维码支付弹窗结束 */\n\n\t/* 外部浏览器H5支付弹窗确认开始 */\n\t.pay-confirm-popup-content {\n\t\twidth: 275px;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 5px;\n\t\tpadding: 20px;\n\n\t\t.pay-confirm-popup-title {\n\t\t\ttext-align: center;\n\t\t\tpadding: 10px 0;\n\t\t\tmargin-bottom: 15px;\n\t\t}\n\n\t\t.pay-confirm-popup-refresh {\n\t\t\tmargin-top: 10px;\n\t\t}\n\n\t\t.pay-confirm-popup-cancel {\n\t\t\tmargin-top: 10px;\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\n\t/* 外部浏览器H5支付弹窗确认结束 */\n</style>\n","import Component from 'W:/Workplace/2.小程序/lihai-app/uni_modules/uni-pay-x/components/uni-pay/uni-pay.uvue'\nwx.createComponent(Component)"],"names":["defineComponent","reject","__awaiter","objectAssign","uni","uniCloud","res","getWeixinCode"],"mappings":"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"}