{"version":3,"file":"index.js","sources":["store/index.uts"],"sourcesContent":["export type SafeArea = {\r\n  top : number,\r\n  right : number,\r\n  bottom : number,\r\n  left : number,\r\n  width : number,\r\n  height : number,\r\n}\r\n\nexport const AGREE_PRIVACY = 'UNI-PRIVACY-AGREE'\n\r\ntype State = {\r\n  lifeCycleNum : number,\r\n  // 状态栏高度\r\n  statusBarHeight : number,\r\n  safeArea : SafeArea\r\n  // 设备像素比\r\n  devicePixelRatio : number\r\n  // 事件判断回调\r\n  eventCallbackNum: number\r\n  // 是否匹配左侧窗口\r\n  noMatchLeftWindow:boolean\r\n  // 当前激活的tab页\r\n  active: string\r\n  leftWinActive:string\n  // 是否同意隐私政策\n  agreeToPrivacy: boolean | null\n  // 是否同意截屏\n  allowCapture: boolean,\r\n  // 是否暗黑主题（适配web端）\r\n  isDarkMode: boolean\n  // 是否无网环境\n  netless: boolean\r\n}\n\nconst getAgreePrivacy = () => {\n  const data = uni.getStorageSync(AGREE_PRIVACY)\n  if (typeof data === 'boolean') {\n    return data\n  }\n  if (data == null) {\n    return null\n  }\n    return null\n}\n\r\nexport const state = reactive({\r\n  lifeCycleNum: 0,\r\n  statusBarHeight: 0,\r\n  devicePixelRatio: 1,\r\n  eventCallbackNum: 0,\r\n  noMatchLeftWindow: true,\r\n  active: 'componentPage',\r\n  leftWinActive: '/pages/component/view/view',\r\n  safeArea: {\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    width: 0,\r\n    height: 0,\r\n  },\n  agreeToPrivacy: getAgreePrivacy(),\n  allowCapture: true,\r\n  isDarkMode:false,\n  netless: false\r\n} as State)\r\n\r\nexport const setLifeCycleNum = (num : number) => {\r\n  state.lifeCycleNum = num\r\n}\r\n\r\nexport const setEventCallbackNum = (num : number) => {\r\n  state.eventCallbackNum = num\r\n}\r\n\r\nexport const setStatusBarHeight = (height : number) => {\r\n  state.statusBarHeight = height\r\n}\r\n\r\nexport const setSafeArea = (value : SafeArea) => {\r\n  state.safeArea = value\r\n}\r\n\r\nexport const setDevicePixelRatio = (devicePixelRatio : number) => {\r\n  state.devicePixelRatio = devicePixelRatio\r\n}\r\n\r\nexport const setMatchLeftWindow = (matchLeftWindow:boolean) => {\r\n  state.noMatchLeftWindow = !matchLeftWindow\r\n}\r\n\r\nexport const setActive = (tabPage:string) => {\r\n  state.active = tabPage\r\n}\r\n\r\nexport const setLeftWinActive = (leftWinActive:string) => {\r\n  state.leftWinActive = leftWinActive\r\n}\r\n\nexport const setAgreeToPrivacy = (agree: boolean) => {\n  state.agreeToPrivacy = agree\n  uni.setStorageSync(AGREE_PRIVACY, agree);\n}\r\n\nexport const setAllowCapture = (allow: boolean) => {\n  state.allowCapture = allow\n}\r\n\r\n// 检查系统主题\r\nexport const checkSystemTheme = () => {\r\n  // #ifdef WEB || MP\r\n  const info = uni.getAppBaseInfo();\r\n  state.isDarkMode = info.hostTheme === 'dark';\r\n  uni.onHostThemeChange((result) => {\r\n    state.isDarkMode = result.hostTheme === 'dark';\r\n  });\r\n  // #endif\r\n  // #ifdef APP\r\n  uni.getSystemInfo({\r\n    success: (res : GetSystemInfoResult) => {\r\n      const appTheme = res.appTheme == \"auto\" ? res.osTheme! : res.appTheme!\r\n      state.isDarkMode = appTheme.trim() == 'dark';\r\n    }\r\n  })\r\n  uni.onAppThemeChange((res : AppThemeChangeResult) => {\r\n    state.isDarkMode = res.appTheme.trim() == 'dark';\r\n  })\r\n  // #endif\r\n}\n\nexport const setNetless = (netless: boolean) => {\n  state.netless = netless\n}\r\n\r\n"],"names":["uni","reactive"],"mappings":";;MAAY,iBAAQ,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASb,MAAM,gBAAgB;MAExB,cAAK,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBV,MAAM,kBAAkB,MAAA;AACtB,QAAM,OAAOA,cAAAA,MAAI,eAAe,aAAa;AAC7C,MAAI,OAAO,SAAS,WAAW;AAC7B,WAAO;AAAA,EACR;AACD,MAAI,QAAQ,MAAM;AAChB,WAAO;AAAA,EACR;AACC,SAAO;AACX;AAEO,MAAM,QAAQC,cAAAA,SAAS,IAAA,MAAA;AAAA,EAC5B,cAAc;AAAA,EACd,iBAAiB;AAAA,EACjB,kBAAkB;AAAA,EAClB,kBAAkB;AAAA,EAClB,mBAAmB;AAAA,EACnB,QAAQ;AAAA,EACR,eAAe;AAAA,EACf,UAAU,IAAA,SAAA;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,OAAO;AAAA,IACP,QAAQ;AAAA,GACT;AAAA,EACD,gBAAgB,gBAAiB;AAAA,EACjC,cAAc;AAAA,EACd,YAAW;AAAA,EACX,SAAS;AACD,CAAA,CAAA;AAEH,MAAM,kBAAkB,CAAC,QAAY;AAC1C,QAAM,eAAe;AACvB;AAwCa,MAAA,mBAAmB,MAAA;AAE9B,QAAM,OAAOD,oBAAI;AACjB,QAAM,aAAa,KAAK,cAAc;AACtCA,sBAAI,kBAAkB,CAAC,WAAM;AAC3B,UAAM,aAAa,OAAO,cAAc;AAAA,EAC1C,CAAC;AAaH;;;;"}