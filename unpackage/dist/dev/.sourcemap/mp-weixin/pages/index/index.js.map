{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["\r\n<template>\r\n  <view class=\"container\">\r\n    <!-- 通知轮播图区域 -->\r\n    <NoticeSwiper\r\n      :noticeList=\"noticeList\"\r\n      @click=\"handleNoticeClick\"\r\n    />\r\n\r\n    <!-- 顶部导航 -->\r\n    <!-- <view class=\"header\">\r\n      <uni-icons type=\"back\" size=\"24\" color=\"#333\"></uni-icons>\r\n      <text class=\"title\">品牌系列</text>\r\n      <view class=\"header-right\">\r\n        <uni-icons type=\"search\" size=\"24\" color=\"#333\"></uni-icons>\r\n        <uni-icons type=\"notification\" size=\"24\" color=\"#333\"></uni-icons>\r\n      </view>\r\n    </view> -->\r\n\r\n    <!-- 轮播图区域 -->\r\n    <view class=\"swiper-section\" v-if=\"swiperList.length > 0\">\r\n      <swiper class=\"swiper\" circular autoplay interval=\"3000\">\r\n        <swiper-item v-for=\"(item, index) in swiperList\" :key=\"index\">\r\n          <view class=\"swiper-item\">\r\n            <image :src=\"item.image\" mode=\"aspectFill\"></image>\r\n            <view class=\"swiper-info\">\r\n              <text class=\"swiper-title\">{{ item.title }}</text>\r\n              <text class=\"swiper-desc\">{{ item.description }}</text>\r\n            </view>\r\n            <!-- <view class=\"favorite-btn\">\r\n              <uni-icons :type=\"item.isFavorite ? 'heart-filled' : 'heart'\" size=\"24\" color=\"#ff4757\"></uni-icons>\r\n            </view> -->\r\n          </view>\r\n        </swiper-item>\r\n      </swiper>\r\n    </view>\r\n\r\n    <!-- 轮播图空状态 -->\r\n    <view class=\"swiper-empty\" v-else-if=\"!loading\">\r\n      <view class=\"empty-banner\">\r\n        <uni-icons type=\"image\" size=\"48\" color=\"#d9d9d9\"/>\r\n        <text class=\"empty-banner-text\">暂无轮播内容</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 热门推荐 -->\r\n    <view class=\"recommend-section\">\r\n      <view class=\"section-header\">\r\n        <text class=\"section-title\">热门推荐</text>\r\n      </view>\r\n      <scroll-view class=\"product-list\" scroll-y>\r\n        <!-- 产品列表 -->\r\n        <view v-for=\"(item, index) in productList\" :key=\"index\" class=\"product-card\" @click=\"goToDetail(item)\">\r\n          <image class=\"product-image\" :src=\"item.image\" mode=\"aspectFill\"></image>\r\n          <view class=\"product-info\">\r\n            <text class=\"product-name\">{{ item.name }}</text>\r\n            <text class=\"product-desc\">{{ item.description }}</text>\r\n            <!-- <view class=\"product-meta\">\r\n              <text class=\"designer\">设计师：{{ item.designer }}</text>\r\n              <view class=\"duration\">\r\n                <uni-icons type=\"calendar\" size=\"14\" color=\"#999\"></uni-icons>\r\n                <text>{{ item.duration }}</text>\r\n              </view>\r\n            </view> -->\r\n            <view class=\"product-footer\">\r\n              <view class=\"difficulty\">\r\n                <text>{{ item.difficulty }}</text>\r\n                <uni-icons type=\"star\" size=\"14\" color=\"#ff4757\"></uni-icons>\r\n              </view>\r\n              <text class=\"rating\">{{ item.rating }}</text>\r\n            </view>\r\n          </view>\r\n          <!-- <view class=\"favorite-icon\">\r\n            <uni-icons :type=\"item.isFavorite ? 'heart-filled' : 'heart'\" size=\"20\" color=\"#ff4757\"></uni-icons>\r\n          </view> -->\r\n        </view>\r\n\r\n        <!-- 产品列表空状态 -->\r\n        <view class=\"product-empty\" v-if=\"productList.length === 0 && !loading\">\r\n          <view class=\"empty-content\">\r\n            <uni-icons type=\"shop\" size=\"64\" color=\"#d9d9d9\"/>\r\n            <text class=\"empty-title\">暂无推荐产品</text>\r\n            <text class=\"empty-desc\">当前没有可展示的产品信息</text>\r\n            <view class=\"empty-action\" @click=\"refreshData\">\r\n              <text class=\"action-text\">重新加载</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- 加载状态 -->\r\n        <view class=\"loading-state\" v-if=\"loading\">\r\n          <uni-icons type=\"spinner-cycle\" size=\"32\" color=\"#999\"/>\r\n          <text class=\"loading-text\">加载中...</text>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n\r\n\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport NoticeSwiper from '@/components/NoticeSwiper.vue';\r\n\r\nconst swiperList = ref([]);\r\nconst productList = ref([]);\r\nconst noticeList = ref([]);\r\nconst loading = ref(false);\r\n\r\n// 获取通知列表数据\r\nconst getNoticeList = async () => {\r\n  try {\r\n    const result = await uniCloud.callFunction({\r\n      name: 'getNoticeList',\r\n      data: {\r\n        limit: 5\r\n      }\r\n    });\r\n    \r\n    if (result.result.code === 0) {\r\n      noticeList.value = result.result.data.notices || [];\r\n    }\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/index/index.vue:125','获取通知列表失败:', error);\r\n  }\r\n};\r\n\r\n// 获取产品列表数据\r\nconst getProductList = async () => {\r\n  loading.value = true;\r\n  try {\r\n    const result = await uniCloud.callFunction({\r\n      name: 'getProductList',\r\n      data: {\r\n        page: 1,\r\n        pageSize: 20\r\n      }\r\n    });\r\n    \r\n    if (result.result.code === 0) {\r\n      const { products, banners } = result.result.data;\r\n      productList.value = products || [];\r\n      swiperList.value = banners || [];\r\n    } else {\r\n      uni.showToast({\r\n        title: result.result.message || '获取数据失败',\r\n        icon: 'none'\r\n      });\r\n    }\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/index/index.vue:152','获取产品列表失败:', error);\r\n    uni.showToast({\r\n      title: '网络错误，请重试',\r\n      icon: 'none'\r\n    });\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// 页面加载时获取数据\r\nonMounted(() => {\r\n  getNoticeList();\r\n  getProductList();\r\n});\r\n\r\n// 处理通知点击\r\nconst handleNoticeClick = (notice: any) => {\r\n  const { linkType, linkUrl, _id } = notice;\r\n  \r\n  switch (linkType) {\r\n    case 'page':\r\n      uni.navigateTo({\r\n        url: linkUrl,\r\n        fail: () => {\r\n          uni.switchTab({\r\n            url: linkUrl,\r\n            fail: () => {\r\n              uni.showToast({\r\n                title: '页面跳转失败',\r\n                icon: 'none'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      break;\r\n    case 'url':\r\n\r\n\r\n\r\n\r\n      uni.showModal({\r\n        title: '提示',\r\n        content: '是否在浏览器中打开链接？',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            plus.runtime.openURL(linkUrl);\r\n          }\r\n        }\r\n      });\r\n\r\n      break;\r\n    case 'product':\r\n      uni.navigateTo({\r\n        url: `/pages/index/detail?id=${linkUrl}`,\r\n        fail: () => {\r\n          uni.showToast({\r\n            title: '产品详情跳转失败',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      });\r\n      break;\r\n    case 'none':\r\n    default:\r\n      // 跳转到通知详情页\r\n      uni.navigateTo({\r\n        url: `/pages/notice/detail?id=${_id}`,\r\n        fail: () => {\r\n          uni.showToast({\r\n            title: '通知详情跳转失败',\r\n            icon: 'none'\r\n          });\r\n        }\r\n      });\r\n      break;\r\n  }\r\n};\r\n\r\n// 跳转到产品详情页\r\nconst goToDetail = (product: any) => {\r\n  uni.navigateTo({\r\n    url: `/pages/index/detail?id=${product._id || product.id}`\r\n  });\r\n};\r\n\r\n// 跳转到案例详情页\r\nconst viewCaseDetail = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/case/detail'\r\n  });\r\n};\r\n\r\n// 跳转到案例列表页\r\nconst viewCaseList = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/case/index'\r\n  });\r\n};\r\n\r\n// 刷新数据\r\nconst refreshData = () => {\r\n  getNoticeList();\r\n  getProductList();\r\n};\r\n</script>\r\n\r\n<style>\r\npage {\r\n  height: 100%;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20rpx 30rpx;\r\n  background-color: #fff;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  gap: 30rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.swiper-section {\r\n  margin: 20rpx;\r\n  border-radius: 20rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.swiper {\r\n  height: 400rpx;\r\n}\r\n\r\n.swiper-item {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.swiper-item image {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.swiper-info {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 30rpx;\r\n  background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));\r\n}\r\n\r\n.swiper-title {\r\n  display: block;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  font-weight: bold;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.swiper-desc {\r\n  font-size: 14px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n.favorite-btn {\r\n  position: absolute;\r\n  top: 20rpx;\r\n  right: 20rpx;\r\n  padding: 10rpx;\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n  border-radius: 50%;\r\n}\r\n\r\n.recommend-section {\r\n  flex: 1;\r\n  margin: 20rpx;\r\n  background-color: #fff;\r\n  border-radius: 20rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 30rpx;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.section-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.see-all {\r\n  font-size: 14px;\r\n  color: #ff4757;\r\n}\r\n\r\n.product-list {\r\n  height: calc(100% - 100rpx);\r\n  overflow: auto;\r\n}\r\n\r\n.product-card {\r\n  display: flex;\r\n  padding: 30rpx;\r\n  border-bottom: 1px solid #eee;\r\n  position: relative;\r\n}\r\n\r\n.product-image {\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  border-radius: 10rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.product-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.product-name {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.product-desc {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 20rpx;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  overflow: hidden;\r\n}\r\n\r\n.product-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.designer {\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n.duration {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n.product-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.difficulty {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.rating {\r\n  font-size: 14px;\r\n  color: #ff4757;\r\n  font-weight: bold;\r\n}\r\n\r\n.favorite-icon {\r\n  position: absolute;\r\n  top: 30rpx;\r\n  right: 30rpx;\r\n}\r\n\r\n/* 轮播图空状态 */\r\n.swiper-empty {\r\n  margin: 20rpx;\r\n  border-radius: 20rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  background-color: #fff;\r\n}\r\n\r\n.empty-banner {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 400rpx;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.empty-banner-text {\r\n  margin-top: 20rpx;\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n/* 产品列表空状态 */\r\n.product-empty {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 400rpx;\r\n}\r\n\r\n.empty-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60rpx 40rpx;\r\n}\r\n\r\n.empty-title {\r\n  font-size: 16px;\r\n  color: #666;\r\n  font-weight: 500;\r\n  margin: 24rpx 0 16rpx;\r\n  text-align: center;\r\n}\r\n\r\n.empty-desc {\r\n  font-size: 14px;\r\n  color: #999;\r\n  text-align: center;\r\n  line-height: 1.5;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.empty-action {\r\n  padding: 16rpx 32rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  border: 1px solid #e0e0e0;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.empty-action:active {\r\n  background-color: #e8e8e8;\r\n  transform: scale(0.98);\r\n}\r\n\r\n.action-text {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n/* 加载状态 */\r\n.loading-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60rpx 40rpx;\r\n}\r\n\r\n.loading-text {\r\n  margin-top: 20rpx;\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/APP_WORKPLACE/其他/lxjj-app/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uniCloud","uni","onMounted","MiniProgramPage"],"mappings":"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"}