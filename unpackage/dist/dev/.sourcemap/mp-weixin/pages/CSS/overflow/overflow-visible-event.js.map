{"version":3,"file":"overflow-visible-event.js","sources":["pages/CSS/overflow/overflow-visible-event.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQ1NTXG92ZXJmbG93XG92ZXJmbG93LXZpc2libGUtZXZlbnQudXZ1ZQ"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view>\r\n      <text style=\"font-size: 15px;\">overflow=visible 父view（绿色），子view（红色），点击超出父view区域的部分也可触发事件。</text>\r\n      <view class=\"backgroundview\">\r\n        <view id=\"parent\" class=\"box-visible-border-radius\">\r\n          <view id=\"child\" style=\"width: 50px; height: 150px; background-color: red;\" @click=\"handleClickOverflowPart\"\r\n            @touchmove=\"handleTouchMoveOverflowPart\" @touchstart=\"handleTouchStartOverflowPart\"\r\n            @touchend=\"handleTouchEndOverflowPart\">\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <text style=\"font-size: 15px;\">overflow=visible组件的子view （绿色）被position:\r\n        absolute的view（红色）遮挡时，点击事件测试。</text>\r\n      <view style=\"width: 300px;height: 300px;background-color: white;\">\r\n        <view style=\"overflow:visible;height: 100px;width: 100%;\">\r\n          <view style=\"background-color: green;height: 100px;width: 100%;\" @click=\"handleClick('green')\">\r\n          </view>\r\n        </view>\r\n        <view id=\"absolute-view\" style=\"position: absolute;background-color: red;width: 100px;height: 200px;right: 0px;\"\r\n          @click=\"handleClick('red')\">\r\n        </view>\r\n      </view>\r\n      <text style=\"font-size: 15px;\">overflow=visible组件设置hover-class的测试</text>\r\n      <view class=\"backgroundview\">\r\n        <view class=\"box-visible-border-radius\" hover-class=\"hover-class\">\r\n          <view style=\"background-color: red;height: 100px;width: 100px;margin-left: 20px;margin-top: 20px;\">\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <text style=\"font-size: 15px;\">overflow=visible组件多层级设置测试</text>\r\n      <view class=\"backgroundview\">\r\n        <view id=\"deep-overflow\" style=\"overflow: visible;\">\r\n          <view style=\"overflow: visible;background-color: red;width: 100px;height: 100px;\" @click=\"handleClick('red')\">\r\n          </view>\r\n        </view>\r\n        <view style=\"overflow: visible;\">\r\n          <view style=\"overflow: visible;background-color: green;width: 100px;height: 100px;\">\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        jest_result: false,\r\n        jest_click_x: -1,\r\n        jest_click_y: -1,\r\n        jest_parent_top: -1.0,\r\n        startX: 0,\r\n        startY: 0,\r\n        moveX: 0,\r\n        moveY: 0,\r\n        oldX: 0,\r\n        oldY: 0,\r\n        moveEl: null as UniElement | null\r\n      }\r\n    },\r\n    onReady() {\r\n      this.moveEl = uni.getElementById('parent')\r\n    },\r\n    methods: {\r\n      handleClickOverflowPart() {\r\n        uni.__f__('log','at pages/CSS/overflow/overflow-visible-event.uvue:72',\"click\");\r\n        this.jest_result = true;\r\n        uni.showToast({ \"title\": \"点击红色区域\" })\r\n      },\r\n      handleTouchStartOverflowPart(e : UniTouchEvent) {\r\n        this.startX = e.changedTouches[0].clientX\r\n        this.startY = e.changedTouches[0].clientY\r\n      },\r\n      handleTouchMoveOverflowPart(e : UniTouchEvent) {\r\n        uni.__f__('log','at pages/CSS/overflow/overflow-visible-event.uvue:81',\"touchmove:\" + e.touches[0].clientX + \",\" + e.touches[0].clientY);\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const difX = e.changedTouches[0].clientX\r\n        const difY = e.changedTouches[0].clientY\r\n        this.moveX = difX - this.startX + this.oldX\r\n        this.moveY = difY - this.startY + this.oldY\r\n        this.moveEl?.style?.setProperty('transform', `translate(${this.moveX}px,${this.moveY}px)`)\r\n      },\r\n      handleTouchEndOverflowPart(_ : UniTouchEvent) {\r\n        this.oldX = this.moveX\r\n        this.oldY = this.moveY\r\n      },\r\n      handleClick(str : string) {\r\n        uni.__f__('log','at pages/CSS/overflow/overflow-visible-event.uvue:95',`点击了 ${str} view`);\r\n        if (str == 'red') {\r\n          this.jest_result = true;\r\n        }\r\n      },\r\n      async jest_getRect() {\r\n        const rect = await uni.getElementById('child')!.getBoundingClientRectAsync()!\r\n        let ratio = 1\r\n        if (uni.getSystemInfoSync().platform == 'android'){\r\n          ratio = uni.getSystemInfoSync().devicePixelRatio\r\n        }\r\n        this.jest_click_x = rect.x * ratio + 30\r\n        this.jest_click_y = rect.bottom * ratio - 30\r\n      },\r\n      jest_getParentRect() {\r\n        const transform = uni.getElementById('parent')?.style.getPropertyValue(\"transform\")\r\n        if (transform != null) {\r\n          let value = transform as string\r\n          value = value.split(\",\")[1].slice(0, -3)\r\n          let ratio = 1\r\n          if (uni.getSystemInfoSync().platform == 'android'){\r\n            ratio = uni.getSystemInfoSync().devicePixelRatio\r\n          }\r\n          this.jest_parent_top = Math.round((parseFloat(value) * ratio))\r\n        }\r\n      },\r\n      async jest_getAbsoluteViewRect() {\r\n        const rect = await uni.getElementById('absolute-view')!.getBoundingClientRectAsync()!\r\n        const systemInfo = uni.getSystemInfoSync()\r\n        const titleBarHeight = systemInfo.screenHeight - systemInfo.windowHeight\r\n        let ratio = 1\r\n        if (uni.getSystemInfoSync().platform == 'android'){\r\n          ratio = uni.getSystemInfoSync().devicePixelRatio\r\n        }\r\n        this.jest_click_x = rect.x * ratio + 30\r\n        this.jest_click_y = (rect.top + titleBarHeight) * ratio + 30\r\n      },\r\n      async jest_scrollToDeepOverflow() {\r\n        const scrollView = uni.getElementById('scroll-view') as UniScrollViewElement\r\n        const rect = await uni.getElementById('deep-overflow')!.getBoundingClientRectAsync()!\r\n        scrollView.scrollTo(0, rect.top)\r\n        setTimeout(() => {\r\n          const systemInfo = uni.getSystemInfoSync()\r\n          let ratio = 1\r\n          if (uni.getSystemInfoSync().platform == 'android'){\r\n            ratio = uni.getSystemInfoSync().devicePixelRatio\r\n          }\r\n          const titleBarHeight = systemInfo.screenHeight - systemInfo.windowHeight\r\n          uni.getElementById('deep-overflow')!.getBoundingClientRectAsync()!.then((afterRect: DOMRect) => {\r\n            this.jest_click_x = afterRect.x * ratio + 30\r\n            this.jest_click_y = (afterRect.top + titleBarHeight) * ratio + 30\r\n          })\r\n        }, 200)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .backgroundview {\r\n    width: 300px;\r\n    height: 300px;\r\n    margin-bottom: 20px;\r\n    background-color: white;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .box-visible-border-radius {\r\n    width: 100px;\r\n    height: 100px;\r\n    border-radius: 20px;\r\n    overflow: visible;\r\n    background-color: green;\r\n  }\r\n\r\n  .hover-class {\r\n    background-color: aqua;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/CSS/overflow/overflow-visible-event.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}