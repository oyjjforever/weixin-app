{"version":3,"file":"scroll-fold-nav.js","sources":["pages/template/scroll-fold-nav/scroll-fold-nav.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcdGVtcGxhdGVcc2Nyb2xsLWZvbGQtbmF2XHNjcm9sbC1mb2xkLW5hdi51dnVl"],"sourcesContent":["<template>\r\n  <scroll-view @scroll=\"onScroll\" class=\"page\" show-scrollbar=\"false\">\r\n    <view ref=\"seatbar\" class=\"seatbar\"></view>\r\n\r\n    <view class=\"content\">\r\n      <view class=\"content-item\">\r\n        <text class=\"text\">1. 当前示例监听了 scroll-view 的 scroll 事件 ，滚动页面实时监听scrollTop。</text>\r\n        <text class=\"text\">2. 使用 ref 直接获取元素的节点，并在 scroll 事件中通过节点的 setProperty\r\n          方法来修改搜索导航栏的高度、位置和背景颜色等样式，从而达到滚动折叠的效果。</text>\r\n        <text class=\"text\">3. 请向上\\向下滚动页面观察效果。</text>\r\n      </view>\r\n      <view class=\"content-item\" v-for=\"(item,index) in 20\" :key=\"index\">\r\n        <text class=\"text\">content-{{item}}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view ref=\"navigatorbar\" class=\"navigatorbar\">\r\n      <view class=\"titlebar\">\r\n        <view class=\"backview\" @tap=\"back\">\r\n          <image class=\"back\" src=\"/static/template/scroll-fold-nav/back.png\" mode=\"widthFix\"></image>\r\n        </view>\r\n        <text ref=\"title\" class=\"title\">DCloud 为开发者而生</text>\r\n      </view>\r\n      <view ref=\"searchbar\" class=\"searchbar\" @tap=\"search\">\r\n        <image class=\"searchimg\" src=\"/static/template/scroll-fold-nav/search.png\" mode=\"widthFix\"></image>\r\n        <text class=\"searchinput\">请输入你要搜索的内容</text>\r\n        <text class=\"searchbutton\">搜索</text>\r\n      </view>\r\n    </view>\r\n  </scroll-view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  //导航栏高度\r\n  const NAVIBARHEIGHT = 88;\r\n  //搜索栏高度\r\n  const SEARCHBARHEIGHT = 40;\r\n  //返回键按钮宽度\r\n  const BACKWIDTH = 32;\r\n  export default {\r\n    data() {\r\n      return {\r\n        statusBarHeight: 0,\r\n        nviBarHeight: 0,\r\n        naviElement: null as UniElement | null,\r\n        titleElement: null as UniElement | null,\r\n        searchElement: null as UniElement | null,\r\n        seatElement: null as UniElement | null\r\n      }\r\n    },\r\n    onLoad() {\r\n\r\n        this.statusBarHeight = uni.getWindowInfo().statusBarHeight;\r\n\r\n\r\n      this.nviBarHeight = NAVIBARHEIGHT + this.statusBarHeight;\r\n    },\r\n    onReady() {\r\n      this.naviElement = this.$refs['navigatorbar'] as UniElement;\r\n      this.searchElement = this.$refs['searchbar'] as UniElement;\r\n      this.titleElement = this.$refs['title'] as UniElement;\r\n      this.seatElement = this.$refs['seatbar'] as UniElement;\r\n      this.setStyle();\r\n    },\r\n    onResize(_ : OnResizeOptions) {\r\n\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n    methods: {\r\n      onScroll(e : ScrollEvent) {\r\n        let offset = e.detail.scrollTop>SEARCHBARHEIGHT?SEARCHBARHEIGHT:e.detail.scrollTop;//(e.detail.scrollTop<0?0:e.detail.scrollTop)\r\n        this.naviElement?.style?.setProperty('height', (this.nviBarHeight -offset)+'px');\r\n        this.titleElement?.style?.setProperty('opacity', (1-offset/SEARCHBARHEIGHT).toString());\r\n        this.searchElement?.style?.setProperty('left', ((offset<0)?0:BACKWIDTH*offset/SEARCHBARHEIGHT)+'px');\r\n      },\r\n      back() {\r\n        uni.navigateBack();\r\n      },\r\n      search() {\r\n        uni.showToast({\r\n          title: '暂不支持',\r\n          icon: 'none'\r\n        });\r\n      },\r\n      setStyle() {\r\n        this.naviElement?.style?.setProperty('padding-top', this.statusBarHeight + 'px');\r\n        this.naviElement?.style?.setProperty('height', (NAVIBARHEIGHT + this.statusBarHeight) + 'px');\r\n        this.seatElement?.style?.setProperty('height', (NAVIBARHEIGHT + this.statusBarHeight) + 'px');\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n.page {\r\n  flex: 1;\r\n  background-color: #f5f5f5;\r\n}\r\n.navigatorbar {\r\n  position: fixed;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  border-bottom: 1px solid #efefef;\r\n  width: 100%;\r\n  background-color: #f5f5f5;\r\n}\r\n.titlebar {\r\n  flex-direction: row;\r\n  align-items: center;\r\n  height: 44px;\r\n}\r\n.backview {\r\n  width: 44px;\r\n  height: 44px;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.back {\r\n  width: 20px;\r\n}\r\n.title {\r\n  margin: 0px 2px;\r\n}\r\n.searchbar {\r\n  position: absolute;\r\n  bottom: 2px;\r\n  left: 0px;\r\n  right: 0px;\r\n  background-color: #FFFFFF;\r\n  border: 1px solid #fbdf0d;\r\n  height: 32px;\r\n  border-radius: 100px;\r\n  margin: 6px 12px;\r\n  padding: 8px;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.searchimg {\r\n  width: 15px;\r\n}\r\n.searchinput {\r\n  flex-grow: 1;\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n.searchbutton {\r\n  font-size: 12px;\r\n  background-color: #ff6900;\r\n  color: #FFF;\r\n  padding: 5px 8px;\r\n  border-radius: 100px;\r\n}\r\n.seatbar {\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n.content {\r\n  padding: 5px 15px;\r\n}\r\n.content-item {\r\n  padding: 15px;\r\n  margin: 5px 0;\r\n  background-color: #fff;\r\n  border-radius: 5px;\r\n}\r\n.text {\r\n  font-size: 14px;\r\n  color: #666;\r\n  line-height: 20px;\r\n}\r\n\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/template/scroll-fold-nav/scroll-fold-nav.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;;AAkCE,MAAM,gBAAgB;AAEtB,MAAM,kBAAkB;AAExB,MAAM,YAAY;AAClB,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,aAAa;AAAA,MACb,cAAc;AAAA,MACd,eAAe;AAAA,MACf,aAAa;AAAA;EAEhB;AAAA,EACD,SAAM;AAEF,SAAK,kBAAkBC,cAAAA,MAAI,cAAa,EAAG;AAG7C,SAAK,eAAe,gBAAgB,KAAK;AAAA,EAC1C;AAAA,EACD,UAAO;AACL,SAAK,cAAc,KAAK,MAAM,cAAc;AAC5C,SAAK,gBAAgB,KAAK,MAAM,WAAW;AAC3C,SAAK,eAAe,KAAK,MAAM,OAAO;AACtC,SAAK,cAAc,KAAK,MAAM,SAAS;AACvC,SAAK,SAAQ;AAAA,EACd;AAAA,EACD,SAAS,GAAmB;AAAA,EAO3B;AAAA,EACD,SAAS;AAAA,IACP,SAAS,GAAe;;AACtB,UAAI,SAAS,EAAE,OAAO,YAAU,kBAAgB,kBAAgB,EAAE,OAAO;AACzE,OAAA,MAAA,KAAA,KAAK,mDAAa,WAAK,QAAA,OAAA,SAAA,OAAA,GAAE,YAAY,UAAW,KAAK,eAAc,SAAQ,IAAI;AAC/E,OAAA,MAAA,KAAA,KAAK,oDAAc,WAAK,QAAA,OAAA,SAAA,OAAA,GAAE,YAAY,YAAY,IAAE,SAAO,iBAAiB,SAAU,CAAA;AACtF,OAAA,MAAA,KAAA,KAAK,qDAAe,WAAK,QAAA,OAAA,SAAA,OAAA,GAAE,YAAY,SAAU,SAAO,IAAG,IAAE,YAAU,SAAO,mBAAiB,IAAI;AAAA,IACpG;AAAA,IACD,OAAI;AACFA,oBAAG,MAAC,aAAY;AAAA,IACjB;AAAA,IACD,SAAM;AACJA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACP,CAAA;AAAA,IACF;AAAA,IACD,WAAQ;;AACN,OAAA,WAAA,KAAK,iBAAW,QAAA,OAAA,SAAA,OAAA,GAAE,WAAO,QAAA,OAAA,SAAA,OAAA,GAAA,YAAY,eAAe,KAAK,kBAAkB,IAAI;AAC/E,OAAA,MAAA,KAAA,KAAK,mDAAa,WAAK,QAAA,OAAA,SAAA,OAAA,GAAE,YAAY,UAAW,gBAAgB,KAAK,kBAAmB,IAAI;AAC5F,OAAA,MAAA,KAAA,KAAK,mDAAa,WAAK,QAAA,OAAA,SAAA,OAAA,GAAE,YAAY,UAAW,gBAAgB,KAAK,kBAAmB,IAAI;AAAA,IAC9F;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;AC7FF,GAAG,WAAW,eAAe;"}