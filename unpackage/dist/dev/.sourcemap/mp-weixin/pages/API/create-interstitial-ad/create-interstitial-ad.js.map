{"version":3,"file":"create-interstitial-ad.js","sources":["pages/API/create-interstitial-ad/create-interstitial-ad.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2NyZWF0ZS1pbnRlcnN0aXRpYWwtYWQvY3JlYXRlLWludGVyc3RpdGlhbC1hZC51dnVl"],"sourcesContent":["<template>\r\n  <page-head title=\"插屏广告\"></page-head>\r\n  <button :type=\"btnType\" style=\"margin: 10px;\" :disabled=\"btnDisable\" @click=\"showAd()\">{{btnText}}</button>\r\n  <view v-for=\"(item,index) in errorDetails\">{{item}}</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        errorDetails: [] as string[],\r\n        btnText: \"\",\r\n        btnType: \"primary\",\r\n        btnDisable: false,\r\n        interstitialAd: null as InterstitialAd | null,\r\n        isAdLoadSuccess: false\r\n      }\r\n    },\r\n    onReady() {\r\n      this.loadAd()\r\n    },\r\n    methods: {\r\n      loadAd() {\r\n        if (this.btnDisable)\r\n          return\r\n        this.btnDisable = true\r\n        this.btnText = \"正在加载广告\"\r\n        this.btnType = \"primary\"\r\n        if (this.interstitialAd == null) {\r\n          this.interstitialAd = uni.createInterstitialAd({\r\n            adpid: \"1111111113\" //此处为测试广告位，实际开发中请在uni-ad后台申请自己的广告位后替换\r\n          })\r\n          this.interstitialAd!.onError((res) => {\r\n            this.errorDetails.length = 0;\r\n            this.btnType = \"warn\"\r\n            this.btnDisable = false\r\n            this.btnText = res.errMsg;\r\n            const errors = (res.cause as UniAggregateError | null)?.errors;\r\n            if(errors != null && errors.length > 0) {\r\n              for(var a = 0;a<errors.length;a++) {\r\n                var msg = JSON.stringify(errors[a]);\r\n                this.errorDetails.push(msg);\r\n              }\r\n            }\r\n          })\r\n          this.interstitialAd!.onLoad((_) => {\r\n            this.errorDetails.length = 0;\r\n            this.btnType = \"primary\"\r\n            this.btnText = \"广告加载成功，点击观看\"\r\n            this.btnDisable = false\r\n            this.isAdLoadSuccess = true\r\n          })\r\n          this.interstitialAd!.onClose((_) => {\r\n            this.isAdLoadSuccess = false\r\n            this.loadAd()\r\n          })\r\n        }\r\n        this.interstitialAd!.load().catch(() => { })\r\n      },\r\n      showAd() {\r\n        if (this.isAdLoadSuccess) {\r\n          this.interstitialAd!.show().catch(() => { })\r\n        } else {\r\n          this.loadAd()\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/create-interstitial-ad/create-interstitial-ad.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAOE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,cAAc,CAAc;AAAA,MAC5B,SAAS;AAAA,MACT,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,gBAAgB;AAAA,MAChB,iBAAiB;AAAA;EAEpB;AAAA,EACD,UAAO;AACL,SAAK,OAAM;AAAA,EACZ;AAAA,EACD,SAAS;AAAA,IACP,SAAM;AACJ,UAAI,KAAK;AACP,eAAK;AACP,WAAK,aAAa;AAClB,WAAK,UAAU;AACf,WAAK,UAAU;AACf,UAAI,KAAK,kBAAkB,MAAM;AAC/B,aAAK,iBAAiBC,cAAG,MAAC,qBAAqB;AAAA,UAC7C,OAAO;AAAA;AAAA,QACR,CAAA;AACD,aAAK,eAAgB,QAAQ,CAAC,QAAG;;AAC/B,eAAK,aAAa,SAAS;AAC3B,eAAK,UAAU;AACf,eAAK,aAAa;AAClB,eAAK,UAAU,IAAI;AACnB,gBAAM,UAAU,KAAA,IAAI,WAAkC,QAAA,OAAA,SAAA,OAAA,GAAE;AACxD,cAAG,UAAU,QAAQ,OAAO,SAAS,GAAG;AACtC,qBAAQ,IAAI,GAAE,IAAE,OAAO,QAAO,KAAK;AACjC,kBAAI,MAAM,IAAA,KAAK,UAAU,OAAO,CAAC,CAAC;AAClC,mBAAK,aAAa,KAAK,GAAG;AAAA,YAC5B;AAAA,UACF;AAAA,QACF,CAAC;AACD,aAAK,eAAgB,OAAO,CAAC,IAAC,SAAA;AAC5B,eAAK,aAAa,SAAS;AAC3B,eAAK,UAAU;AACf,eAAK,UAAU;AACf,eAAK,aAAa;AAClB,eAAK,kBAAkB;AAAA,QACzB,CAAC;AACD,aAAK,eAAgB,QAAQ,CAAC,IAAC,SAAA;AAC7B,eAAK,kBAAkB;AACvB,eAAK,OAAM;AAAA,QACb,CAAC;AAAA,MACH;AACA,WAAK,eAAgB,KAAI,EAAG,MAAM,MAAA;AAAA,MAAS,CAAA;AAAA,IAC5C;AAAA,IACD,SAAM;AACJ,UAAI,KAAK,iBAAiB;AACxB,aAAK,eAAgB,KAAI,EAAG,MAAM,MAAA;AAAA,QAAS,CAAA;AAAA,MAC3C,OAAK;AACL,aAAK,OAAM;AAAA,MACb;AAAA,IACF;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;AClEF,GAAG,WAAW,eAAe;"}