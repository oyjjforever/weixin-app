{"version":3,"file":"open-document.js","sources":["pages/API/open-document/open-document.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL29wZW4tZG9jdW1lbnQvb3Blbi1kb2N1bWVudC51dnVl"],"sourcesContent":["<template>\r\n    <page-head :title=\"title\"></page-head>\r\n\r\n\r\n\r\n      <view class=\"uni-common-mt\">\r\n        <button v-for=\"(item, index) in fileList\" :key=\"index\" @click=\"openDocument(item)\" style=\"margin: 10px;\">\r\n          打开 {{item.type}} 文件\r\n        </button>\r\n      </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n  type FileItem = {\r\n    type : string,\r\n    url : string\r\n  }\r\n\r\n  const title = 'openDocument'\r\n  const fileList = ref<Array<FileItem>>([\r\n    {\r\n      type: 'pdf',\r\n      url: 'https://web-assets.dcloud.net.cn/unidoc/zh/helloworld.pdf'\r\n    },\r\n    {\r\n      type: 'doc',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/helloworld.doc'\r\n    },\r\n    {\r\n      type: 'docx',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/helloworld.docx'\r\n    },\r\n    {\r\n      type: 'ppt',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/helloworld.ppt'\r\n    },\r\n    {\r\n      type: 'pptx',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/helloworld.pptx'\r\n    },\r\n    {\r\n      type: 'xls',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/helloworld.xls'\r\n    },\r\n    {\r\n      type: 'xlsx',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/helloworld.xlsx'\r\n    },\r\n    {\r\n      type: 'zip',\r\n      url: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/file/to.zip'\r\n    },\r\n    {\r\n      type: 'br',\r\n      url: '/static/filemanager/1.txt.br'\r\n    },\r\n    {\r\n      type: 'mp3',\r\n      url: '/static/test-audio/ForElise.mp3'\r\n    },\r\n    {\r\n      type: 'mp4',\r\n      url: '/static/test-video/10second-demo.mp4'\r\n    },\r\n    {\r\n      type: 'svg',\r\n      url: '/static/test-image/logo.svg'\r\n    }\r\n  ])\r\n\r\n  const openDocument = (item : FileItem) => {\r\n\r\n    if (item.url.startsWith('http')) {\r\n      uni.showLoading({\r\n        title: '下载中',\r\n        mask: true\r\n      })\r\n      uni.downloadFile({\r\n        url: item.url,\r\n        success: (res) => {\r\n          uni.openDocument({\r\n            filePath: res.tempFilePath,\r\n            success: () => {\r\n              uni.hideLoading()\r\n              uni.__f__('log','at pages/API/open-document/open-document.uvue:88','打开文档成功')\r\n            },\r\n            fail: (err) => {\r\n              uni.hideLoading()\r\n              uni.__f__('log','at pages/API/open-document/open-document.uvue:92','打开文档失败', err)\r\n              uni.showToast({\r\n                title: '错误码：' + err.errCode.toString(),\r\n                icon: \"error\"\r\n              })\r\n            }\r\n          })\r\n        },\r\n        fail: (err) => {\r\n          uni.hideLoading()\r\n          uni.__f__('log','at pages/API/open-document/open-document.uvue:102','下载失败', err)\r\n          uni.showToast({\r\n            title: '下载失败：' + err.errCode.toString(),\r\n            icon: \"error\"\r\n          })\r\n        }\r\n      })\r\n    } else {\r\n      uni.openDocument({\r\n        filePath: item.url,\r\n        success: () => {\r\n          uni.__f__('log','at pages/API/open-document/open-document.uvue:113','打开文档成功')\r\n        },\r\n        fail: (err) => {\r\n          uni.__f__('log','at pages/API/open-document/open-document.uvue:116','打开文档失败', err)\r\n          uni.showToast({\r\n            title: '错误码：' + err.errCode.toString(),\r\n            icon: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n\r\n  }\r\n</script>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/open-document/open-document.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","MiniProgramPage"],"mappings":"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"}