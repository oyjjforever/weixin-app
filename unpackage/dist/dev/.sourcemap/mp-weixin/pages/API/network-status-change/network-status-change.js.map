{"version":3,"file":"network-status-change.js","sources":["pages/API/network-status-change/network-status-change.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL25ldHdvcmstc3RhdHVzLWNoYW5nZS9uZXR3b3JrLXN0YXR1cy1jaGFuZ2UudXZ1ZQ"],"sourcesContent":["<template>\n  <page-head title=\"networkStatusChange\"></page-head>\n  <view class=\"uni-list-cell-padding status-box\">\n    <text class=\"uni-title-text\">网络状态</text>\n    <view class=\"uni-row uni-common-mt\">\n      <text class=\"uni-hello-text\">是否连接：</text>\n      <text>{{ isConnected ? '已连接' : '未连接' }}</text>\n    </view>\n    <view class=\"uni-row uni-common-mt\">\n      <text class=\"uni-hello-text\">网络类型：</text>\n      <text>{{ networkType }}</text>\n    </view>\n    <view class=\"uni-row uni-common-mt\">\n      <text class=\"uni-hello-text\">监听状态：</text>\n      <text>{{ listenStatus }}</text>\n    </view>\n  </view>\n  <view class=\"uni-list-cell-padding uni-common-mt\">\n    <button type=\"primary\" @click=\"startListen\">开始监听</button>\n    <button type=\"default\" class=\"uni-common-mt\" @click=\"stopListen\">停止监听</button>\n  </view>\n</template>\n\n<script lang=\"uts\" setup>\n  const isConnected = ref(false)\n  const networkType = ref('unknown')\n  const listenStatus = ref('未监听')\n  const networkCallback = ref<((result : OnNetworkStatusChangeCallbackResult) => void) | null>(null)\n  // 获取当前网络状态\n  const getCurrentNetworkStatus = () => {\n    uni.getNetworkType({\n      success: (res) => {\n        networkType.value = res.networkType\n        isConnected.value = res.networkType != 'none'\n      },\n      fail: () => {\n        uni.__f__('log','at pages/API/network-status-change/network-status-change.uvue:37','获取网络状态失败')\n        networkType.value = 'unknown'\n        isConnected.value = false\n      }\n    })\n  }\n  // 开始监听\n  const startListen = () => {\n    if (networkCallback.value != null) {\n      listenStatus.value = '正在监听'\n      return\n    }\n    networkCallback.value = (result : OnNetworkStatusChangeCallbackResult) => {\n      uni.__f__('log','at pages/API/network-status-change/network-status-change.uvue:50','网络状态: ', result);\n      isConnected.value = result.isConnected\n      networkType.value = result.networkType\n      if (!result.isConnected) {\n        networkType.value = 'none'\n      }\n    }\n    uni.onNetworkStatusChange(networkCallback.value)\n    // uni.__f__('log','at pages/API/network-status-change/network-status-change.uvue:58','开始监听网络状态')\n    listenStatus.value = '正在监听'\n  }\n  // 停止监听\n  const stopListen = () => {\n    if (networkCallback.value == null) {\n      listenStatus.value = '未监听'\n      return\n    }\n    uni.offNetworkStatusChange(networkCallback.value)\n    networkCallback.value = null\n    // uni.__f__('log','at pages/API/network-status-change/network-status-change.uvue:69','停止监听网络状态')\n    listenStatus.value = '停止监听'\n  }\n\n  onLoad(() => {\n    getCurrentNetworkStatus()\n  })\n  onUnload(() => {\n    stopListen()\n  })\n</script>\n\n<style>\n  .status-box {\n    background-color: #FFFFFF;\n    margin: 0 20px;\n  }\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/network-status-change/network-status-change.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onLoad","onUnload","MiniProgramPage"],"mappings":";;;;;;;;;;;;;AAwBE,UAAM,cAAcA,kBAAI,KAAK;AAC7B,UAAM,cAAcA,kBAAI,SAAS;AACjC,UAAM,eAAeA,kBAAI,KAAK;AAC9B,UAAM,kBAAkBA,kBAAqE,IAAI;AAEjG,UAAM,0BAA0B,MAAA;AAC9BC,0BAAI,eAAe,IAAA,cAAA;AAAA,QACjB,SAAS,CAAC,QAAG;AACX,sBAAY,QAAQ,IAAI;AACxB,sBAAY,QAAQ,IAAI,eAAe;AAAA,QACxC;AAAA,QACD,MAAM,MAAA;AACJA,wBAAAA,MAAI,MAAM,OAAM,oEAAmE,UAAU;AAC7F,sBAAY,QAAQ;AACpB,sBAAY,QAAQ;AAAA,QACtB;AAAA,MACD,CAAA,CAAA;AAAA,IACH;AAEA,UAAM,cAAc,MAAA;AAClB,UAAI,gBAAgB,SAAS,MAAM;AACjC,qBAAa,QAAQ;AACrB,eAAM;AAAA,MACP;AACD,sBAAgB,QAAQ,CAAC,WAA4C;AACnEA,sBAAG,MAAC,MAAM,OAAM,oEAAmE,UAAU,MAAM;AACnG,oBAAY,QAAQ,OAAO;AAC3B,oBAAY,QAAQ,OAAO;AAC3B,YAAI,CAAC,OAAO,aAAa;AACvB,sBAAY,QAAQ;AAAA,QACrB;AAAA,MACH;AACAA,oBAAAA,MAAI,sBAAsB,gBAAgB,KAAK;AAE/C,mBAAa,QAAQ;AAAA,IACvB;AAEA,UAAM,aAAa,MAAA;AACjB,UAAI,gBAAgB,SAAS,MAAM;AACjC,qBAAa,QAAQ;AACrB,eAAM;AAAA,MACP;AACDA,oBAAAA,MAAI,uBAAuB,gBAAgB,KAAK;AAChD,sBAAgB,QAAQ;AAExB,mBAAa,QAAQ;AAAA,IACvB;AAEAC,kBAAAA,OAAO,MAAA;AACL;IACF,CAAC;AACDC,kBAAAA,SAAS,MAAA;AACP;IACF,CAAC;;;;;;;;;;;;;;;;AC5EH,GAAG,WAAWC,SAAe;"}