{"version":3,"file":"interceptor.js","sources":["pages/API/interceptor/interceptor.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2ludGVyY2VwdG9yL2ludGVyY2VwdG9yLnV2dWU"],"sourcesContent":["<template>\r\n  <view style=\"flex: 1\">\r\n    <button @click=\"addInterceptor\">添加路由拦截器</button>\r\n    <button @click=\"removeInterceptor\">移除路由拦截器</button>\r\n    <text>点击下方按钮{{ msg }}</text>\r\n    <button @click=\"navigateTo\">navigatorTo API跳转到测试页面</button>\r\n\r\n\r\n\r\n\r\n\r\n    <button @click=\"addSwitchTabInterceptor\">添加switchTab拦截器</button>\r\n    <button @click=\"removeSwitchTabInterceptor\">移除switchTab拦截器</button>\r\n    <button @click=\"switchTab\">switchTab API</button>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  const navigateToInterceptor = {\r\n    invoke: function (options : NavigateToOptions) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:21','拦截 navigateTo 接口传入参数为：', options)\r\n      const url = './page2'\r\n      uni.showToast({\r\n        title: `重定向到页面:${url}`\r\n      })\r\n      options.url = url\r\n    },\r\n    success: function (res : NavigateToSuccess) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:29','拦截 navigateTo 接口 success 返回参数为：', res)\r\n    },\r\n    fail: function (err : NavigateToFail) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:32','拦截 navigateTo 接口 fail 返回参数为：', err)\r\n    },\r\n    complete: function (res : NavigateToComplete) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:35','拦截 navigateTo 接口 complete 返回参数为：', res)\r\n    }\r\n  } as AddInterceptorOptions\r\n\r\n  const switchTabInterceptor = {\r\n    invoke: function (options : SwitchTabOptions) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:41','拦截 switchTab 接口传入参数为：', options)\r\n      options.url = '/pages/tabBar/API'\r\n    },\r\n    success: function (res : SwitchTabSuccess) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:45','拦截 switchTab 接口 success 返回参数为：', res)\r\n    },\r\n    fail: function (err : SwitchTabFail) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:48','拦截 switchTab 接口 fail 返回参数为：', err)\r\n    },\r\n    complete: function (res : SwitchTabComplete) {\r\n      uni.__f__('log','at pages/API/interceptor/interceptor.uvue:51','拦截 switchTab 接口 complete 返回参数为：', res)\r\n    }\r\n  } as AddInterceptorOptions\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        msg: \"会跳转到测试页面1\"\r\n      }\r\n    },\r\n    beforeUnmount() {\r\n      // 移除 navigateTo 所有拦截器\r\n      uni.removeInterceptor('navigateTo')\r\n      uni.removeInterceptor('switchTab')\r\n    },\r\n    methods: {\r\n      addInterceptor() {\r\n        uni.addInterceptor('navigateTo', navigateToInterceptor)\r\n        uni.showToast({\r\n          title: '页面跳转/切换tabbar已拦截'\r\n        })\r\n        this.msg = \"，路由被劫持到测试页面2\"\r\n      },\r\n      removeInterceptor() {\r\n        uni.removeInterceptor('navigateTo', navigateToInterceptor)\r\n        uni.showToast({\r\n          title: '拦截器已移除'\r\n        })\r\n        this.msg = \"会跳转到测试页面1\"\r\n      },\r\n      addSwitchTabInterceptor() {\r\n        uni.addInterceptor('switchTab', switchTabInterceptor)\r\n      },\r\n      removeSwitchTabInterceptor() {\r\n        uni.removeInterceptor('switchTab', switchTabInterceptor)\r\n      },\r\n      navigateTo() {\r\n        uni.navigateTo({\r\n          url: './page1',\r\n          success(res) {\r\n            uni.__f__('log','at pages/API/interceptor/interceptor.uvue:91','res:', res)\r\n          },\r\n          fail(err) {\r\n            uni.__f__('error','at pages/API/interceptor/interceptor.uvue:94','err:', err)\r\n          },\r\n          complete(res) {\r\n            uni.__f__('log','at pages/API/interceptor/interceptor.uvue:97','res:', res)\r\n          }\r\n        })\r\n      },\r\n      switchTab() {\r\n        uni.switchTab({\r\n          url: '/pages/tabBar/component',\r\n          success(res) {\r\n            uni.__f__('log','at pages/API/interceptor/interceptor.uvue:105','res:', res)\r\n          },\r\n          fail(err) {\r\n            uni.__f__('error','at pages/API/interceptor/interceptor.uvue:108','err:', err)\r\n          },\r\n          complete(res) {\r\n            uni.__f__('log','at pages/API/interceptor/interceptor.uvue:111','res:', res)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/interceptor/interceptor.uvue'\nwx.createPage(MiniProgramPage)"],"names":["uni","defineComponent"],"mappings":"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"}