{"version":3,"file":"preview-image.js","sources":["pages/API/preview-image/preview-image.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL3ByZXZpZXctaW1hZ2UvcHJldmlldy1pbWFnZS51dnVl"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view style=\"padding-left: 8px; padding-right: 8px\">\r\n      <view>\r\n        <text class=\"text-desc\">图片指示器样式</text>\r\n        <radio-group class=\"cell-ct\" style=\"background-color: white\" @change=\"onIndicatorChanged\">\r\n          <view class=\"indicator-it\" v-for=\"(item, index) in indicator\" :key=\"item.value\">\r\n            <radio :disabled=\"isWeb\" :checked=\"index == 0\" :value=\"item.value\">{{\r\n              item.name\r\n            }}</radio>\r\n          </view>\r\n        </radio-group>\r\n      </view>\r\n      <view>\r\n        <checkbox-group @change=\"onCheckboxChange\" style=\"margin-top: 16px; margin-bottom: 16px; margin-left: 8px\">\r\n          <checkbox :disabled=\"isWeb\" :checked=\"isLoop\" style=\"margin-right: 15px\">循环播放</checkbox>\r\n        </checkbox-group>\r\n      </view>\r\n      <view>\r\n        <checkbox-group @change=\"onLongPressCheckboxChange\"\r\n          style=\"margin-top: 16px; margin-bottom: 16px; margin-left: 8px\">\r\n          <checkbox :disabled=\"isWeb\" :checked=\"isLongPress\" style=\"margin-right: 15px\">支持长按事件</checkbox>\r\n        </checkbox-group>\r\n      </view>\r\n      <view style=\"background-color: white\">\r\n        <text class=\"text-desc\">点击图片开始预览</text>\r\n        <view class=\"cell-ct\" style=\"margin: 8px;\">\r\n          <view class=\"cell cell-choose-image\" v-for=\"(image, index) in imageList\" :key=\"index\">\r\n            <text style=\"width: 100px; height: 100px;background-color: lightgray; color: red; text-align: center; line-height: 100px;font-size: 14px;\" v-if=\"image.error\"\r\n              @click=\"previewImage(index)\">图片路径非法</text>\r\n            <image style=\"width: 100px; height: 100px;background-color: white;\" mode=\"aspectFit\" :src=\"image.src\"\r\n              v-if=\"!image.error\" @click=\"previewImage(index)\"\r\n              @error=\"onImageLoadError(index,$event as ImageErrorEvent)\">\r\n            </image>\r\n          </view>\r\n          <image class=\"cell cell-choose-image\" src=\"/static/plus.png\" @click=\"chooseImage\">\r\n            <view></view>\r\n          </image>\r\n        </view>\r\n      </view>\r\n      <view style=\"margin:8px;\">\r\n        <text style=\"color: black;font-size: 18px;margin-bottom: 4px;\">注意事项:</text>\r\n        <text style=\"font-size: 17px;margin-left: 4px;color: darkgray;\">1、indicator属性仅App平台支持。</text>\r\n        <text style=\"font-size: 17px;margin-left: 4px;color: darkgray;\">2、Web平台不支持loop属性。</text>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  type Indicator = \"number\" | \"default\" | \"none\"\r\n  type ItemType = {\r\n    value : Indicator,\r\n    name : string\r\n  }\r\n\r\n  type ImageType = {\r\n    src : string,\r\n    error : boolean\r\n  }\r\n  export default {\r\n    data() {\r\n      return {\r\n        imageList: [{ src: \"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/uni@2x.png\", error: false }, { src: \"/static/uni.png\", error: false },\r\n\r\n\r\n\r\n        ] as ImageType[],\r\n        indicator: [{\r\n          value: \"default\",\r\n          name: \"圆点\"\r\n        }, {\r\n          value: \"number\",\r\n          name: \"数字\"\r\n        }, {\r\n          value: \"none\",\r\n          name: \"不显示\"\r\n        }] as ItemType[],\r\n        currentIndicator: \"default\" as Indicator,\r\n\r\n\r\n\r\n\r\n        isWeb: false,\r\n\r\n\r\n\r\n\r\n\r\n        isIOS: false,\r\n\r\n        isLongPress: true,\r\n        isLoop: true,\r\n      }\r\n    },\r\n    methods: {\r\n      previewImage(index : number) {\r\n        let list = [] as Array<string>\r\n        this.imageList.forEach((item : ImageType) => {\r\n          list.push(item.src)\r\n        })\r\n        uni.previewImage({\r\n          urls: list,\r\n          current: index,\r\n          indicator: this.currentIndicator,\r\n          loop: this.isLoop,\r\n          longPressActions: (this.isLongPress ? ({\r\n            itemList: [\"按钮1\", \"按钮2\", \"按钮3\"],\r\n            itemColor: \"#ccc\",\r\n            success: (e : LongPressActionsSuccessResult) => {\r\n              uni.showToast({\r\n                title: \"用户选中了第\" + (e.index + 1) + \"张图片，并选中了第\" + (e.tapIndex + 1) + \"个选项\",\r\n                position: \"bottom\"\r\n              })\r\n            },\r\n            fail: (e : LongPressActionsFailResult) => {\r\n              uni.showToast({\r\n                title: \"用户关闭了action sheet\",\r\n                position: \"bottom\"\r\n              })\r\n            }\r\n          } as LongPressActionsOptions) : null)\r\n        })\r\n      },\r\n      chooseImage() {\r\n        uni.chooseImage({\r\n          sourceType: ['album'],\r\n          count: 1,\r\n          success: (e) => {\r\n            this.imageList = this.imageList.concat({ src: e.tempFilePaths[0], error: false } as ImageType)\r\n            // this.imageList = this.imageList.concat(e.tempFilePaths)\r\n          },\r\n          fail(_) {\r\n          }\r\n        })\r\n      },\r\n      onIndicatorChanged(e : UniRadioGroupChangeEvent) {\r\n        this.currentIndicator = e.detail.value as Indicator\r\n      },\r\n      onCheckboxChange(_ : UniCheckboxGroupChangeEvent) {\r\n        this.isLoop = !this.isLoop\r\n      },\r\n      onLongPressCheckboxChange() {\r\n        this.isLongPress = !this.isLongPress\r\n      },\r\n      onImageLoadError(index : number, error : UniImageErrorEvent) {\r\n        this.imageList[index].error = true\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .text-desc {\r\n    margin-top: 16px;\r\n    margin-left: 8px;\r\n    margin-bottom: 16px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .cell-ct {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    flex-direction: row;\r\n  }\r\n\r\n  .cell {\r\n    margin-left: 3px;\r\n    margin-right: 3px;\r\n    width: 100px;\r\n    height: 100px;\r\n  }\r\n\r\n  .cell-choose-image {\r\n    border-width: 1px;\r\n    border-style: solid;\r\n    border-color: lightgray;\r\n  }\r\n\r\n  .indicator-it {\r\n    margin: 8px;\r\n  }\r\n  .cell-pd {\r\n    padding: 11px 0px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/preview-image/preview-image.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;;MAuDO,iBAAO,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;MAKP,kBAAQ,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;AAIb,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,WAAW,eAAC,EAAE,KAAK,+DAA+D,OAAO,MAAI,CAAG,GAAE,IAAA,UAAA,EAAE,KAAK,mBAAmB,OAAO,MAAI,CAAG,CAI1H;AAAA,MAChB,WAAW,CAAC,IAAA,SAAA;AAAA,QACV,OAAO;AAAA,QACP,MAAM;AAAA,OACP,GAAE,IAAA,SAAA;AAAA,QACD,OAAO;AAAA,QACP,MAAM;AAAA,OACP,GAAE,IAAA,SAAA;AAAA,QACD,OAAO;AAAA,QACP,MAAM;AAAA,OACP,CAAe;AAAA,MAChB,kBAAkB;AAAA,MAKlB,OAAO;AAAA,MAMP,OAAO;AAAA,MAEP,aAAa;AAAA,MACb,QAAQ;AAAA;EAEX;AAAA,EACD,SAAS;AAAA,IACP,aAAa,OAAc;AACzB,UAAI,OAAO,CAAA;AACX,WAAK,UAAU,QAAQ,CAAC,SAAgB;AACtC,aAAK,KAAK,KAAK,GAAG;AAAA,MACpB,CAAC;AACDC,oBAAAA,MAAI,aAAa;AAAA,QACf,MAAM;AAAA,QACN,SAAS;AAAA,QACT,WAAW,KAAK;AAAA,QAChB,MAAM,KAAK;AAAA,QACX,kBAAmB,KAAK,cAAe;AAAA,UACrC,UAAU,CAAC,OAAO,OAAO,KAAK;AAAA,UAC9B,WAAW;AAAA,UACX,SAAS,CAAC,MAAiC;AACzCA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,YAAY,EAAE,QAAQ,KAAK,eAAe,EAAE,WAAW,KAAK;AAAA,cACnE,UAAU;AAAA,YACX,CAAA;AAAA,UACF;AAAA,UACD,MAAM,CAAC,MAA8B;AACnCA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,UAAU;AAAA,YACX,CAAA;AAAA,UACH;AAAA,QAC4B,IAAE;AAAA,MACjC,CAAA;AAAA,IACF;AAAA,IACD,cAAW;AACTA,0BAAI,YAAY,IAAA,cAAA;AAAA,QACd,YAAY,CAAC,OAAO;AAAA,QACpB,OAAO;AAAA,QACP,SAAS,CAAC,MAAC;AACT,eAAK,YAAY,KAAK,UAAU,OAAO,IAAA,UAAA,EAAE,KAAK,EAAE,cAAc,CAAC,GAAG,OAAO,MAAoB,CAAA,CAAA;AAAA,QAE9F;AAAA,QACD,KAAK,GAAC;AAAA,QACN;AAAA,MACD,CAAA,CAAA;AAAA,IACF;AAAA,IACD,mBAAmB,GAA4B;AAC7C,WAAK,mBAAmB,EAAE,OAAO;AAAA,IAClC;AAAA,IACD,iBAAiB,GAA+B;AAC9C,WAAK,SAAS,CAAC,KAAK;AAAA,IACrB;AAAA,IACD,4BAAyB;AACvB,WAAK,cAAc,CAAC,KAAK;AAAA,IAC1B;AAAA,IACD,iBAAiB,OAAgB,OAA0B;AACzD,WAAK,UAAU,KAAK,EAAE,QAAQ;AAAA,IAChC;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxJF,GAAG,WAAW,eAAe;"}