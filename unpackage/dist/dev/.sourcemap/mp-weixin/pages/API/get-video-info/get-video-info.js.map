{"version":3,"file":"get-video-info.js","sources":["pages/API/get-video-info/get-video-info.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2dldC12aWRlby1pbmZvL2dldC12aWRlby1pbmZvLnV2dWU"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <page-head :title=\"title\"></page-head>\r\n    <view class=\"uni-padding-wrap\">\r\n      <view class=\"uni-title\">\r\n        <text class=\"uni-subtitle-text\">获取本地绝对路径视频信息</text>\r\n      </view>\r\n      <video class=\"video\" :src=\"absoluteVideoPath\" :controls=\"true\" :poster=\"absoluteCoverImagePath\"></video>\r\n      <text class=\"margin-top-10\">{{absoluteVideoInfo}}</text>\r\n      <view class=\"uni-btn-v\">\r\n        <button type=\"primary\" @click=\"chooseVideo\">拍摄视频或从相册中选择视频</button>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        title: \"getVideoInfo\",\r\n        relativeVideoPath: \"/static/test-video/10second-demo.mp4\",\r\n        relativeVideoInfo: \"\",\r\n        relativeCoverImagePath: \"\",\r\n        absoluteVideoPath: \"\",\r\n        absoluteVideoInfo: \"\",\r\n        absoluteCoverImagePath: \"\",\r\n        // 自动化测试\r\n        videoInfoForTest: null as UTSJSONObject | null\r\n      }\r\n    },\r\n    onReady() {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n    methods: {\r\n      chooseVideo() {\r\n        uni.chooseVideo({\r\n          compressed: false,\r\n          success: (res) => {\r\n            this.absoluteVideoPath = res.tempFilePath;\r\n            uni.getVideoInfo({\r\n              src: res.tempFilePath,\r\n              success: (_res) => {\r\n                uni.__f__('log','at pages/API/get-video-info/get-video-info.uvue:79',\"getVideoInfo success\", JSON.stringify(_res));\r\n                this.absoluteVideoInfo = `视频画面方向: ${_res.orientation}\\n视频格式: ${_res.type}\\n视频长度: ${_res.duration}s\\n视频大小: ${_res.size}KB\\n视频宽度: ${_res.width}\\n视频高度: ${_res.height}\\n视频帧率: ${_res.fps}fps\\n视频码率: ${_res.bitrate}kbps`;\r\n\r\n\r\n\r\n\r\n\r\n\r\n              },\r\n              fail: (err) => {\r\n                uni.showModal({\r\n                  title: \"获取视频信息失败\",\r\n                  content: JSON.stringify(err),\r\n                  showCancel: false\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      testGetVideoInfo() {\r\n        uni.getVideoInfo({\r\n          src: '/static/test-video/10second-demo.mp4',\r\n          success: (res) => {\r\n            this.videoInfoForTest = {\r\n              \"orientation\": res.orientation,\r\n              \"type\": res.type,\r\n              \"duration\": Math.trunc(res.duration),\r\n              \"size\": res.size,\r\n              \"width\": res.width,\r\n              \"height\": res.height,\r\n              \"fps\": res.fps,\r\n              \"bitrate\": res.bitrate\r\n            };\r\n          },\r\n          fail: (_) => {\r\n            this.videoInfoForTest = null;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .video {\r\n    width: 100%;\r\n  }\r\n\r\n  .margin-top-10 {\r\n    margin-top: 10px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/get-video-info/get-video-info.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AA8BE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,mBAAmB;AAAA,MACnB,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,mBAAmB;AAAA,MACnB,mBAAmB;AAAA,MACnB,wBAAwB;AAAA;AAAA,MAExB,kBAAkB;AAAA;EAErB;AAAA,EACD,UAAO;AAAA,EAwBN;AAAA,EACD,SAAS;AAAA,IACP,cAAW;AACTC,0BAAI,YAAY,IAAA,cAAA;AAAA,QACd,YAAY;AAAA,QACZ,SAAS,CAAC,QAAG;AACX,eAAK,oBAAoB,IAAI;AAC7BA,wBAAAA,MAAI,aAAa;AAAA,YACf,KAAK,IAAI;AAAA,YACT,SAAS,CAAC,SAAI;AACZA,kCAAI,MAAM,OAAM,sDAAqD,wBAAwB,SAAK,UAAU,IAAI,CAAC;AACjH,mBAAK,oBAAoB,WAAW,KAAK,WAAW;AAAA,QAAW,KAAK,IAAI;AAAA,QAAW,KAAK,QAAQ;AAAA,QAAY,KAAK,IAAI;AAAA,QAAa,KAAK,KAAK;AAAA,QAAW,KAAK,MAAM;AAAA,QAAW,KAAK,GAAG;AAAA,QAAc,KAAK,OAAO;AAAA,YAOhN;AAAA,YACD,MAAM,CAAC,QAAG;AACRA,kCAAI,UAAU,IAAA,cAAA;AAAA,gBACZ,OAAO;AAAA,gBACP,SAAS,IAAA,KAAK,UAAU,GAAG;AAAA,gBAC3B,YAAY;AAAA,cACb,CAAA,CAAA;AAAA,YACH;AAAA,UACD,CAAA;AAAA,QACH;AAAA,MACD,CAAA,CAAA;AAAA,IACF;AAAA,IACD,mBAAgB;AACdA,oBAAAA,MAAI,aAAa;AAAA,QACf,KAAK;AAAA,QACL,SAAS,CAAC,QAAG;AACX,eAAK,mBAAmB,IAAA,cAAA;AAAA,YACtB,eAAe,IAAI;AAAA,YACnB,QAAQ,IAAI;AAAA,YACZ,YAAY,KAAK,MAAM,IAAI,QAAQ;AAAA,YACnC,QAAQ,IAAI;AAAA,YACZ,SAAS,IAAI;AAAA,YACb,UAAU,IAAI;AAAA,YACd,OAAO,IAAI;AAAA,YACX,WAAW,IAAI;AAAA,UAChB,CAAA;AAAA,QACF;AAAA,QACD,MAAM,CAAC,MAAC;AACN,eAAK,mBAAmB;AAAA,QAC1B;AAAA,MACD,CAAA;AAAA,IACH;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;ACtHF,GAAG,WAAW,eAAe;"}