{"version":3,"file":"get-system-info.js","sources":["pages/API/get-system-info/get-system-info.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2dldC1zeXN0ZW0taW5mby9nZXQtc3lzdGVtLWluZm8udXZ1ZQ"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view>\r\n      <page-head :title=\"title\"></page-head>\r\n      <view class=\"uni-common-mt\">\r\n        <view class=\"uni-list\">\r\n          <view class=\"uni-list-cell\" v-for=\"(item, _) in items\" style=\"align-items: center\">\r\n            <view class=\"uni-pd\">\r\n              <view class=\"uni-label\" style=\"width: 180px\">{{\r\n                item.label\r\n              }}</view>\r\n            </view>\r\n            <view class=\"uni-list-cell-db\">\r\n              <text class=\"uni-list-cell-db-text\">{{ item.value == '' ? '未获取' : item.value }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view class=\"uni-padding-wrap\">\r\n          <view class=\"uni-btn-v\">\r\n            <button type=\"primary\" @tap=\"getSystemInfoSync\">\r\n              同步获取设备系统信息\r\n            </button>\r\n            <button type=\"primary\" @tap=\"getSystemInfo\" style=\"margin-top: 20px;\">\r\n              异步获取设备系统信息\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n<script lang=\"uts\">\r\n  type Item = {\r\n    label : string,\r\n    value : string,\r\n  }\r\n\r\n  let globalScreenHeight = 0\r\n  try {\r\n    globalScreenHeight = uni.getWindowInfo().screenHeight\r\n  } catch (e) {\r\n    // 兼容本地测试\r\n    uni.__f__('error','at pages/API/get-system-info/get-system-info.uvue:47',e)\r\n  }\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        title: 'getSystemInfo',\r\n        items: [] as Item[],\r\n        screenHeightAtReady: 0,\r\n        jest_result: false,\r\n      }\r\n    },\r\n    onUnload: function () {\r\n    },\r\n    onReady() {\r\n      this.screenHeightAtReady = uni.getSystemInfoSync().screenHeight\r\n      uni.__f__('log','at pages/API/get-system-info/get-system-info.uvue:63',`全局获取屏幕高度: ${globalScreenHeight}  onReady内获取屏幕高度: ${this.screenHeightAtReady}`);\r\n    },\r\n    methods: {\r\n      getSystemInfo: function () {\r\n        uni.getSystemInfo({\r\n          success: (res) => {\r\n            this.items = [] as Item[];\r\n            const res_str = JSON.stringify(res);\r\n            const res_obj = JSON.parseObject(res_str);\r\n            const res_map = res_obj!.toMap();\r\n            let keys = [] as string[]\r\n            res_map.forEach((_, key) => {\r\n              keys.push(key);\r\n            });\r\n            keys.sort().forEach(key => {\r\n              const value = res[key];\r\n              if (value != null) {\r\n                const item = {\r\n                  label: key,\r\n                  value: \"\" + ((typeof value == \"object\") ? JSON.stringify(value) : value)\r\n                } as Item;\r\n                this.items.push(item);\r\n              }\r\n            });\r\n          },\r\n        })\r\n      },\r\n      getSystemInfoSync: function () {\r\n        this.items = [] as Item[];\r\n        const res = uni.getSystemInfoSync()\r\n        const res_str = JSON.stringify(res);\r\n        const res_obj = JSON.parseObject(res_str);\r\n        const res_map = res_obj!.toMap();\r\n        let keys = [] as string[]\r\n        res_map.forEach((_, key) => {\r\n          keys.push(key);\r\n        });\r\n        keys.sort().forEach(key => {\r\n          const value = res[key];\r\n          if (value != null) {\r\n            const item = {\r\n              label: key,\r\n              value: \"\" + ((typeof value == \"object\") ? JSON.stringify(value) : value)\r\n            } as Item;\r\n            this.items.push(item);\r\n          }\r\n        });\r\n      },\r\n      //自动化测试例专用\r\n      jest_getSystemInfo() : GetSystemInfoResult {\r\n        return uni.getSystemInfoSync();\r\n      },\r\n      jest_getScreenHeight_at_different_stages() {\r\n        this.jest_result = (globalScreenHeight == this.screenHeightAtReady)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .uni-pd {\r\n    padding-left: 15px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/get-system-info/get-system-info.uvue'\nwx.createPage(MiniProgramPage)"],"names":["uni","defineComponent"],"mappings":";;MAoCO;;;;;;;;;;;;;;;;;;;;;AAKL,IAAI,qBAAqB;AACzB,IAAI;AACF,uBAAqBA,cAAG,MAAC,cAAe,EAAC;AAC3C,SAAS,GAAG;AAEVA,gBAAAA,MAAI,MAAM,SAAQ,wDAAuD,CAAC;AAC5E;AAEA,MAAA,YAAeC,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,OAAO,CAAY;AAAA,MACnB,qBAAqB;AAAA,MACrB,aAAa;AAAA;EAEhB;AAAA,EACD,UAAU,WAAA;AAAA,EACT;AAAA,EACD,UAAO;AACL,SAAK,sBAAsBD,cAAAA,MAAI,kBAAiB,EAAG;AACnDA,kBAAAA,MAAI,MAAM,OAAM,wDAAuD,aAAa,kBAAkB,qBAAqB,KAAK,mBAAmB,EAAE;AAAA,EACtJ;AAAA,EACD,SAAS;AAAA,IACP,eAAe,WAAA;AACbA,0BAAI,cAAc,IAAA,cAAA;AAAA,QAChB,SAAS,CAAC,QAAG;AACX,eAAK,QAAQ;AACb,gBAAM,UAAU,IAAA,KAAK,UAAU,GAAG;AAClC,gBAAM,UAAU,IAAA,KAAK,YAAY,OAAO;AACxC,gBAAM,UAAU,QAAS;AACzB,cAAI,OAAO,CAAA;AACX,kBAAQ,QAAQ,CAAC,IAAC,MAAE,QAAG;AACrB,iBAAK,KAAK,GAAG;AAAA,UACf,CAAC;AACD,eAAK,KAAI,EAAG,QAAQ,SAAI;AACtB,kBAAM,QAAQ,IAAI,GAAG;AACrB,gBAAI,SAAS,MAAM;AACjB,oBAAM,OAAO,IAAA,KAAA;AAAA,gBACX,OAAO;AAAA,gBACP,OAAO,MAAO,OAAO,SAAS,WAAY,IAAA,KAAK,UAAU,KAAK,IAAI;AAAA,cAC3D,CAAA;AACT,mBAAK,MAAM,KAAK,IAAI;AAAA,YACtB;AAAA,UACF,CAAC;AAAA,QACF;AAAA,MACF,CAAA,CAAA;AAAA,IACF;AAAA,IACD,mBAAmB,WAAA;AACjB,WAAK,QAAQ;AACb,YAAM,MAAMA,oBAAI;AAChB,YAAM,UAAU,IAAA,KAAK,UAAU,GAAG;AAClC,YAAM,UAAU,IAAA,KAAK,YAAY,OAAO;AACxC,YAAM,UAAU,QAAS;AACzB,UAAI,OAAO,CAAA;AACX,cAAQ,QAAQ,CAAC,IAAC,MAAE,QAAG;AACrB,aAAK,KAAK,GAAG;AAAA,MACf,CAAC;AACD,WAAK,KAAI,EAAG,QAAQ,SAAI;AACtB,cAAM,QAAQ,IAAI,GAAG;AACrB,YAAI,SAAS,MAAM;AACjB,gBAAM,OAAO,IAAA,KAAA;AAAA,YACX,OAAO;AAAA,YACP,OAAO,MAAO,OAAO,SAAS,WAAY,IAAA,KAAK,UAAU,KAAK,IAAI;AAAA,UAC3D,CAAA;AACT,eAAK,MAAM,KAAK,IAAI;AAAA,QACtB;AAAA,MACF,CAAC;AAAA,IACF;AAAA;AAAA,IAED,qBAAkB;AAChB,aAAOA,cAAAA,MAAI;IACZ;AAAA,IACD,2CAAwC;AACtC,WAAK,cAAe,sBAAsB,KAAK;AAAA,IACjD;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHF,GAAG,WAAW,eAAe;"}