{"version":3,"file":"cloud-storage.js","sources":["pages/API/unicloud/unicloud/cloud-storage.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL3VuaWNsb3VkL3VuaWNsb3VkL2Nsb3VkLXN0b3JhZ2UudXZ1ZQ"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view>\r\n      <page-head :title=\"title\"></page-head>\r\n      <view class=\"uni-padding-wrap uni-common-mt\">\r\n        <view class=\"uni-btn-v uni-common-mt\">\r\n          <button type=\"primary\" @click=\"uploadFile\">选择文件上传</button>\r\n          <button type=\"primary\" @click=\"chooseAndUploadFile\">一个接口选择文件并上传</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        title: '云存储'\r\n      }\r\n    },\r\n    onLoad() {\r\n    },\r\n    onUnload() {\r\n    },\r\n    methods: {\r\n      uploadFile: function () {\r\n        uni.chooseImage({\r\n          count: 1,\r\n          success(res) : void {\r\n            uni.showLoading({\r\n              title: '上传中...'\r\n            })\r\n            const tempFilePath = res.tempFilePaths[0]\r\n            uniCloud.uploadFile({\r\n              filePath: tempFilePath,\r\n              cloudPath: 'test.jpg'\r\n            })\r\n              .then(function (res) {\r\n                uni.hideLoading()\r\n                uni.__f__('log','at pages/API/unicloud/unicloud/cloud-storage.uvue:44',res)\r\n                uni.showModal({\r\n                  content: '上传成功',\r\n                  showCancel: false\r\n                });\r\n              })\r\n              .catch(function (err : any | null) {\r\n                uni.hideLoading()\r\n                const error = err as UniCloudError\r\n                uni.showModal({\r\n                  content: '上传失败，' + error.errMsg,\r\n                  showCancel: false\r\n                });\r\n              })\r\n            // .finally((_: number) : void => {\r\n            //   uni.hideLoading()\r\n            // })\r\n          },\r\n          fail(err) : void {\r\n            uni.__f__('error','at pages/API/unicloud/unicloud/cloud-storage.uvue:63','chooseImage fail: ', err)\r\n          }\r\n        })\r\n      },\r\n      chooseAndUploadFile() {\r\n        uniCloud.chooseAndUploadFile({\r\n          type: 'image'\r\n        }).then(function (res) {\r\n          uni.hideLoading()\r\n          uni.__f__('log','at pages/API/unicloud/unicloud/cloud-storage.uvue:72',res)\r\n          uni.showModal({\r\n            content: '上传成功',\r\n            showCancel: false\r\n          });\r\n        })\r\n          .catch(function (err : any | null) {\r\n            uni.hideLoading()\r\n            const error = err as UniCloudError\r\n            uni.showModal({\r\n              content: '上传失败，' + error.errMsg,\r\n              showCancel: false\r\n            });\r\n          })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/unicloud/unicloud/cloud-storage.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","uniCloud","res"],"mappings":";;AAkBE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA;EAEV;AAAA,EACD,SAAM;AAAA,EACL;AAAA,EACD,WAAQ;AAAA,EACP;AAAA,EACD,SAAS;AAAA,IACP,YAAY,WAAA;AACVC,0BAAI,YAAY,IAAA,cAAA;AAAA,QACd,OAAO;AAAA,QACP,QAAQ,KAAG;AACTA,wBAAAA,MAAI,YAAY;AAAA,YACd,OAAO;AAAA,UACR,CAAA;AACD,gBAAM,eAAe,IAAI,cAAc,CAAC;AACxCC,wBAAAA,GAAS,WAAW;AAAA,YAClB,UAAU;AAAA,YACV,WAAW;AAAA,WACZ,EACE,KAAK,SAAUC,MAAG;AACjBF,0BAAG,MAAC,YAAW;AACfA,0BAAAA,MAAI,MAAM,OAAM,wDAAuDE,IAAG;AAC1EF,gCAAI,UAAU,IAAA,cAAA;AAAA,cACZ,SAAS;AAAA,cACT,YAAY;AAAA,YACb,CAAA,CAAA;AAAA,UACH,CAAC,EACA,MAAM,SAAU,MAAgB,MAAA;AAC/BA,0BAAG,MAAC,YAAW;AACf,kBAAM,QAAQ;AACdA,gCAAI,UAAU,IAAA,cAAA;AAAA,cACZ,SAAS,UAAU,MAAM;AAAA,cACzB,YAAY;AAAA,YACb,CAAA,CAAA;AAAA,UACH,CAAC;AAAA,QAIJ;AAAA,QACD,KAAK,KAAG;AACNA,wBAAG,MAAC,MAAM,SAAQ,wDAAuD,sBAAsB,GAAG;AAAA,QACpG;AAAA,MACD,CAAA,CAAA;AAAA,IACF;AAAA,IACD,sBAAmB;AACjBC,oBAAAA,GAAS,oBAAoB;AAAA,QAC3B,MAAM;AAAA,MACP,CAAA,EAAE,KAAK,SAAU,KAAG;AACnBD,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,MAAM,OAAM,wDAAuD,GAAG;AAC1EA,4BAAI,UAAU,IAAA,cAAA;AAAA,UACZ,SAAS;AAAA,UACT,YAAY;AAAA,QACb,CAAA,CAAA;AAAA,MACH,CAAC,EACE,MAAM,SAAU,MAAgB,MAAA;AAC/BA,sBAAG,MAAC,YAAW;AACf,cAAM,QAAQ;AACdA,4BAAI,UAAU,IAAA,cAAA;AAAA,UACZ,SAAS,UAAU,MAAM;AAAA,UACzB,YAAY;AAAA,QACb,CAAA,CAAA;AAAA,MACH,CAAC;AAAA,IACL;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;ACtFF,GAAG,WAAW,eAAe;"}