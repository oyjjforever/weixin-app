{"version":3,"file":"cloud-function.js","sources":["pages/API/unicloud/unicloud/cloud-function.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL3VuaWNsb3VkL3VuaWNsb3VkL2Nsb3VkLWZ1bmN0aW9uLnV2dWU"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view>\r\n      <page-head :title=\"title\"></page-head>\r\n      <view class=\"uni-padding-wrap uni-common-mt\">\r\n        <view class=\"uni-btn-v uni-common-mt\">\r\n          <button type=\"primary\" @click=\"callFunction\">请求云函数</button>\r\n          <button type=\"primary\" @click=\"callFunctionWithGeneric\">请求云函数传入泛型</button>\r\n\r\n\r\n\r\n\r\n\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        title: '请求云函数',\r\n        callFunctionResult: {},\r\n        callFunctionResult_Detail_functionName: '',\r\n        callFunctionError: {},\r\n        genericDemoShowMessage: '',\r\n        isUniTest: false\r\n      }\r\n    },\r\n    onLoad() {\r\n    },\r\n    onUnload() {\r\n      if (this.isUniTest) {\r\n        uni.hideToast()\r\n      }\r\n    },\r\n    methods: {\r\n      notify(content : string, title : string) {\r\n        if (!this.isUniTest) {\r\n          uni.showModal({\r\n            title,\r\n            content,\r\n            showCancel: false\r\n          })\r\n        } else {\r\n          uni.__f__('log','at pages/API/unicloud/unicloud/cloud-function.uvue:52',title, content)\r\n        }\r\n      },\r\n      async callFunctionWithGeneric(): Promise<void> {\r\n        type EchoCfResult = {\r\n          showMessage : string\r\n        }\r\n        uni.showLoading({\r\n          title: '加载中...'\r\n        })\r\n        await uniCloud.callFunction<EchoCfResult>({\r\n          name: 'echo-cf',\r\n          data: {\r\n            num: 1,\r\n            str: 'ABC'\r\n          }\r\n        }).then(res => {\r\n          const result = res.result\r\n          uni.hideLoading()\r\n          this.genericDemoShowMessage = result.showMessage\r\n          this.notify(result.showMessage, '提示')\r\n        }).catch((err : any | null) => {\r\n          const error = err as UniCloudError\r\n          this.callFunctionError = {\r\n            errCode: error.errCode,\r\n            errMsg: error.errMsg\r\n          }\r\n          uni.hideLoading()\r\n          this.notify(error.errMsg, '错误')\r\n        })\r\n      },\r\n      async callFunction(): Promise<void> {\r\n        uni.showLoading({\r\n          title: '加载中...'\r\n        })\r\n        await uniCloud.callFunction({\r\n          name: 'echo-cf',\r\n          data: {\r\n            num: 1,\r\n            str: 'ABC'\r\n          }\r\n        }).then(res => {\r\n          const result = res.result\r\n          this.callFunctionResult = result\r\n          const detail = result.get('detail') as UTSJSONObject\r\n          this.callFunctionResult_Detail_functionName = detail.get('functionName') as string\r\n          uni.__f__('log','at pages/API/unicloud/unicloud/cloud-function.uvue:98','this.callFunctionResult_Detail_functionName: ' + this.callFunctionResult_Detail_functionName)\r\n          uni.__f__('log','at pages/API/unicloud/unicloud/cloud-function.uvue:99',JSON.stringify(result))\r\n          uni.hideLoading()\r\n          this.notify(result['showMessage'] as string, '提示')\r\n        }).catch((err : any | null) => {\r\n          uni.hideLoading()\r\n          if(err instanceof UniCloudError) {\r\n            const error = err as UniCloudError\r\n            this.callFunctionError = {\r\n              errCode: error.errCode,\r\n              errMsg: error.errMsg\r\n            }\r\n            this.notify(error.errMsg, '错误')\r\n          } else {\r\n            uni.__f__('error','at pages/API/unicloud/unicloud/cloud-function.uvue:112',err)\r\n          }\r\n        })\r\n      },\r\n      callEncryptionFunction() {\r\n        uni.showLoading({\r\n          title: '加载中...'\r\n        })\r\n        uniCloud.callFunction({\r\n          name: 'encryption',\r\n          data: {},\r\n          secretType: 'both'\r\n        }).then(res => {\r\n          uni.hideLoading()\r\n          this.notify(JSON.stringify(res.result), '提示')\r\n        }).catch((err : any | null) => {\r\n          uni.hideLoading()\r\n          if(err instanceof UniCloudError) {\r\n            const error = err as UniCloudError\r\n            this.callFunctionError = {\r\n              errCode: error.errCode,\r\n              errMsg: error.errMsg\r\n            }\r\n            this.notify(error.errMsg, '错误')\r\n          } else {\r\n            uni.__f__('error','at pages/API/unicloud/unicloud/cloud-function.uvue:137',err)\r\n          }\r\n        })\r\n      },\r\n      callVerifyFunction() {\r\n        uni.showLoading({\r\n          title: '加载中...'\r\n        })\r\n        uniCloud.callFunction({\r\n          name: 'verify-client',\r\n          data: {}\r\n        }).then(res => {\r\n          uni.hideLoading()\r\n          this.notify(JSON.stringify(res.result), '提示')\r\n        }).catch((err : any | null) => {\r\n          uni.hideLoading()\r\n          if(err instanceof UniCloudError) {\r\n            const error = err as UniCloudError\r\n            this.callFunctionError = {\r\n              errCode: error.errCode,\r\n              errMsg: error.errMsg\r\n            }\r\n            this.notify(error.errMsg, '错误')\r\n          } else {\r\n            uni.__f__('error','at pages/API/unicloud/unicloud/cloud-function.uvue:161',err)\r\n          }\r\n        })\r\n      },\r\n      jest_UniCloudError() {\r\n        return new Error() instanceof UniCloudError\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .tips {\r\n    color: #999999;\r\n    font-size: 12px;\r\n    padding: 10px 0px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/unicloud/unicloud/cloud-function.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","uniCloud","UniCloudError"],"mappings":"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"}