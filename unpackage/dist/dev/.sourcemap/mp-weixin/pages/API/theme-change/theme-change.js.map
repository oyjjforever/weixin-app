{"version":3,"file":"theme-change.js","sources":["pages/API/theme-change/theme-change.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL3RoZW1lLWNoYW5nZS90aGVtZS1jaGFuZ2UudXZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"uni-padding-wrap\">\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <view class=\"uni-common-mt item-box\">\r\n      <text>应用当前主题:</text>\r\n      <text id=\"theme\">{{ appTheme }}</text>\r\n    </view>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        osThemeChangeId: 0,\r\n        appThemeChangeId: 0,\r\n        osTheme: \"light\" as string,\r\n        appTheme: \"light\" as string,\r\n        originalTheme: \"light\" as string,\r\n        current: 0,\r\n        items: [\r\n          \"light\",\r\n          \"dark\",\r\n          \"auto\"\r\n        ] as string[]\r\n      }\r\n    },\r\n    methods: {\r\n      bindOsThemeChange() : number {\r\n        //注册osTheme变化监听\r\n        return uni.onOsThemeChange((res : OsThemeChangeResult) => {\r\n          this.osTheme = res.osTheme\r\n        })\r\n      },\r\n      bindAppThemeChange() : number {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        return uni.onHostThemeChange((res : OnHostThemeChangeCallbackResult) => {\r\n          this.appTheme = res.hostTheme\r\n        })\r\n\r\n      },\r\n      radioChange(e : UniRadioGroupChangeEvent) {\r\n        const theme = e.detail.value\r\n        this.setAppTheme(theme)\r\n        uni.showToast({\r\n          icon: 'none',\r\n          title: '当前选中:' + theme,\r\n        })\r\n      },\r\n      setAppTheme(value : string) {\r\n        uni.setAppTheme({\r\n          theme: value as 'light' | 'dark' | 'auto',\r\n          success: function () {\r\n            uni.__f__('log','at pages/API/theme-change/theme-change.uvue:82',\"设置appTheme为\", value, \"成功\")\r\n          },\r\n          fail: function (e : IAppThemeFail) {\r\n            uni.__f__('log','at pages/API/theme-change/theme-change.uvue:85',\"设置appTheme为\", value, \"失败,原因:\", e.errMsg)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    onReady() {\r\n      uni.getSystemInfo({\r\n        success: (res : GetSystemInfoResult) => {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n          this.appTheme = res.hostTheme\r\n\r\n        }\r\n      })\r\n\r\n\r\n\r\n      this.appThemeChangeId = this.bindAppThemeChange()\r\n    },\r\n    onUnload() {\r\n      //注销监听\r\n\r\n\r\n\r\n\r\n\r\n      uni.offHostThemeChange(this.appThemeChangeId)\r\n\r\n      //暂时屏蔽 避免5.1安卓设备自动化测试不过\r\n      // uni.showToast({\r\n      //   \"position\": \"bottom\",\r\n      //   \"title\": \"已停止监听主题切换\"\r\n      // })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .item-box {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .uni-list-cell {\r\n    justify-content: flex-start;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/theme-change/theme-change.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAiCE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,SAAS;AAAA,MACT,UAAU;AAAA,MACV,eAAe;AAAA,MACf,SAAS;AAAA,MACT,OAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,MACU;AAAA;EAEf;AAAA,EACD,SAAS;AAAA,IACP,oBAAiB;AAEf,aAAOC,cAAG,MAAC,gBAAgB,CAAC,QAAyB;AACnD,aAAK,UAAU,IAAI;AAAA,MACrB,CAAC;AAAA,IACF;AAAA,IACD,qBAAkB;AAQhB,aAAOA,cAAG,MAAC,kBAAkB,CAAC,QAAqC;AACjE,aAAK,WAAW,IAAI;AAAA,MACtB,CAAC;AAAA,IAEF;AAAA,IACD,YAAY,GAA4B;AACtC,YAAM,QAAQ,EAAE,OAAO;AACvB,WAAK,YAAY,KAAK;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,MAAM;AAAA,QACN,OAAO,UAAU;AAAA,MAClB,CAAA;AAAA,IACF;AAAA,IACD,YAAY,OAAc;AACxBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,SAAS,WAAA;AACPA,wBAAG,MAAC,MAAM,OAAM,kDAAiD,eAAe,OAAO,IAAI;AAAA,QAC5F;AAAA,QACD,MAAM,SAAU,GAAiB;AAC/BA,8BAAI,MAAM,OAAM,kDAAiD,eAAe,OAAO,UAAU,EAAE,MAAM;AAAA,QAC3G;AAAA,MACD,CAAA;AAAA,IACH;AAAA,EACD;AAAA,EACD,UAAO;AACLA,wBAAI,cAAc,IAAA,cAAA;AAAA,MAChB,SAAS,CAAC,QAAyB;AAQjC,aAAK,WAAW,IAAI;AAAA,MAEtB;AAAA,IACD,CAAA,CAAA;AAID,SAAK,mBAAmB,KAAK;EAC9B;AAAA,EACD,WAAQ;AAONA,kBAAAA,MAAI,mBAAmB,KAAK,gBAAgB;AAAA,EAO9C;CACF;;;;;;;;;AC1HF,GAAG,WAAW,eAAe;"}