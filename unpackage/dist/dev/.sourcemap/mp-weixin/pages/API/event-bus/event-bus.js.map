{"version":3,"file":"event-bus.js","sources":["pages/API/event-bus/event-bus.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2V2ZW50LWJ1cy9ldmVudC1idXMudXZ1ZQ"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view class=\"box\">\r\n      <button class=\"uni-btn\" @click=\"on\">开始监听</button>\r\n      <button class=\"uni-btn\" @click=\"once\">监听一次</button>\r\n      <button class=\"uni-btn\" @click=\"off\">取消监听</button>\r\n      <!-- <button @click=\"offAll\">取消全部监听</button> -->\r\n      <button class=\"uni-btn\" @click=\"emit\">触发监听</button>\r\n      <button class=\"uni-btn\" @click=\"clear\">清空消息</button>\r\n      <view>\r\n        <view class=\"uni-btn\">收到的消息：</view>\r\n        <view class=\"uni-btn\">\r\n          <view v-for=\"(item, index) in log\" :key=\"index\">{{ item }}</view>\r\n        </view>\r\n        <button class=\"uni-btn\" @click=\"onObj\">开始监听 obj 参数</button>\r\n        <button class=\"uni-btn\" @click=\"emitWithObj\">触发监听 obj 参数</button>\r\n        <view class='uni-btn'>\r\n          <text>接收到的 obj 参数：</text>\r\n          <text>{{ JSON.stringify(objArg) }}</text>\r\n        </view>\r\n        <button class='uni-btn' @click=\"testReturnId\">测试返回 id</button>\r\n        <button class='uni-btn' @click=\"testEmitNoArgs\">测试 $emit 无参</button>\r\n        <button class='uni-btn' @click=\"testEmitMultipleArgs\">测试 $emit 多个参数</button>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\nexport default {\r\n  data() {\r\n    return {\r\n      log: [] as string[],\r\n      objArg: {},\r\n    }\r\n  },\r\n  methods: {\r\n    fn(res : string) {\r\n      this.log.push(res)\r\n    },\r\n    fn2(res : string) {\r\n      this.log.push(res)\r\n    },\r\n    on() {\r\n      uni.$on('test', this.fn)\r\n    },\r\n    on2() {\r\n      uni.$on('test', this.fn2)\r\n    },\r\n    onObj() {\r\n      uni.$on('test-obj', (res : UTSJSONObject) => {\r\n        this.objArg = res\r\n      })\r\n    },\r\n    once() {\r\n      uni.$once('test', this.fn)\r\n    },\r\n    off() {\r\n      uni.$off('test', this.fn)\r\n    },\r\n    offAll() {\r\n      uni.$off('test')\r\n    },\r\n    emit() {\r\n      uni.$emit('test', 'msg:' + Date.now())\r\n    },\r\n    emitWithObj() {\r\n      uni.$emit('test-obj', { a: 1, b: 2 })\r\n    },\r\n    clear() {\r\n      this.log.length = 0\r\n    },\r\n    testReturnId(){\r\n      const id1 = uni.$on('test-return-id', this.fn)\r\n      uni.$emit('test-return-id', '触发 test-return-id $on fn')\r\n      uni.$off('test-return-id', id1)\r\n      uni.$emit('test-return-id', '触发 test-return-id $on fn')\r\n\r\n      uni.$once('test-return-id', this.fn)\r\n      uni.$emit('test-return-id', '触发 test-return-id $once fn')\r\n      uni.$emit('test-return-id', '触发 test-return-id $once fn')\r\n      const id2 = uni.$once('test-id', this.fn)\r\n      uni.$off('test-return-id', id2)\r\n      uni.$emit('test-return-id', '触发 test-return-id $once fn')\r\n    },\r\n    testEmitNoArgs() {\r\n      uni.$on('test-emit-no-args', () => {\r\n        this.log.push('test-emit-no-args')\r\n      })\r\n      uni.$emit('test-emit-no-args')\r\n      uni.$off('test-emit-no-args')\r\n    },\r\n    testEmitMultipleArgs() {\r\n      uni.$on('test-emit-multiple-args', (arg1 : string, arg2 : number) => {\r\n        this.log.push(`${arg1}_${arg2}`)\r\n      })\r\n      uni.$emit('test-emit-multiple-args', 'arg1', 2)\r\n      uni.$off('test-emit-multiple-args')\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.box {\r\n  padding: 10px;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/event-bus/event-bus.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAiCA,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,KAAK,CAAc;AAAA,MACnB,QAAM,IAAA,cAAE,EAAE;AAAA;EAEb;AAAA,EACD,SAAS;AAAA,IACP,GAAG,KAAY;AACb,WAAK,IAAI,KAAK,GAAG;AAAA,IAClB;AAAA,IACD,IAAI,KAAY;AACd,WAAK,IAAI,KAAK,GAAG;AAAA,IAClB;AAAA,IACD,KAAE;AACAC,oBAAAA,MAAI,IAAI,QAAQ,KAAK,EAAE;AAAA,IACxB;AAAA,IACD,MAAG;AACDA,oBAAAA,MAAI,IAAI,QAAQ,KAAK,GAAG;AAAA,IACzB;AAAA,IACD,QAAK;AACHA,oBAAAA,MAAI,IAAI,YAAY,CAAC,QAAmB;AACtC,aAAK,SAAS;AAAA,MAChB,CAAC;AAAA,IACF;AAAA,IACD,OAAI;AACFA,oBAAAA,MAAI,MAAM,QAAQ,KAAK,EAAE;AAAA,IAC1B;AAAA,IACD,MAAG;AACDA,oBAAAA,MAAI,KAAK,QAAQ,KAAK,EAAE;AAAA,IACzB;AAAA,IACD,SAAM;AACJA,0BAAI,KAAK,MAAM;AAAA,IAChB;AAAA,IACD,OAAI;AACFA,oBAAG,MAAC,MAAM,QAAQ,SAAS,KAAK,IAAG,CAAE;AAAA,IACtC;AAAA,IACD,cAAW;AACTA,oBAAAA,MAAI,MAAM,8BAAY,EAAE,GAAG,GAAG,GAAG,EAAG,CAAA;IACrC;AAAA,IACD,QAAK;AACH,WAAK,IAAI,SAAS;AAAA,IACnB;AAAA,IACD,eAAY;AACV,YAAM,MAAMA,cAAAA,MAAI,IAAI,kBAAkB,KAAK,EAAE;AAC7CA,oBAAAA,MAAI,MAAM,kBAAkB,0BAA0B;AACtDA,oBAAAA,MAAI,KAAK,kBAAkB,GAAG;AAC9BA,oBAAAA,MAAI,MAAM,kBAAkB,0BAA0B;AAEtDA,oBAAAA,MAAI,MAAM,kBAAkB,KAAK,EAAE;AACnCA,oBAAAA,MAAI,MAAM,kBAAkB,4BAA4B;AACxDA,oBAAAA,MAAI,MAAM,kBAAkB,4BAA4B;AACxD,YAAM,MAAMA,cAAAA,MAAI,MAAM,WAAW,KAAK,EAAE;AACxCA,oBAAAA,MAAI,KAAK,kBAAkB,GAAG;AAC9BA,oBAAAA,MAAI,MAAM,kBAAkB,4BAA4B;AAAA,IACzD;AAAA,IACD,iBAAc;AACZA,0BAAI,IAAI,qBAAqB,MAAA;AAC3B,aAAK,IAAI,KAAK,mBAAmB;AAAA,MACnC,CAAC;AACDA,0BAAI,MAAM,mBAAmB;AAC7BA,0BAAI,KAAK,mBAAmB;AAAA,IAC7B;AAAA,IACD,uBAAoB;AAClBA,oBAAAA,MAAI,IAAI,2BAA2B,CAAC,MAAe,SAAa;AAC9D,aAAK,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,EAAE;AAAA,MACjC,CAAC;AACDA,oBAAAA,MAAI,MAAM,2BAA2B,QAAQ,CAAC;AAC9CA,0BAAI,KAAK,yBAAyB;AAAA,IACpC;AAAA,EACD;CACH;;;;;;;;;;;;;;;;;;;;;;;;ACvGA,GAAG,WAAW,eAAe;"}