{"version":3,"file":"get-current-pages.js","sources":["pages/API/get-current-pages/get-current-pages.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2dldC1jdXJyZW50LXBhZ2VzL2dldC1jdXJyZW50LXBhZ2VzLnV2dWU"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view>\r\n      <page-head title=\"getCurrentPages\"></page-head>\r\n      <view class=\"uni-padding-wrap\">\r\n        <button @click=\"_getCurrentPages\">getCurrentPages</button>\r\n        <view v-if=\"pages.length\" style=\"padding: 15px 0px\">\r\n          <text>当前页面栈中 {{ pages.length }} 个页面，列表如下：</text>\r\n          <template v-for=\"(page, index) in pages\" :key=\"page.route\">\r\n            <text style=\"margin-top: 5px\">index: {{ index }}, route: {{ page.route }}</text>\r\n          </template>\r\n        </view>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      </view>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  import { PageStyleItem, PageStyleArray } from './page-style.uts';\r\n\r\n  class Page {\r\n    constructor(public route : string) {\r\n    }\r\n  }\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        checked: false,\r\n        pages: [] as Page[],\r\n        PageStyleArray: PageStyleArray as PageStyleItem[],\r\n        currentPageStyle: {} as UTSJSONObject,\r\n        testing: false\r\n      }\r\n    },\r\n    computed: {\r\n      pageStyleText() : string {\r\n        return JSON.stringify(this.currentPageStyle)\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n    onReady() {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n    onPullDownRefresh() {\r\n      setTimeout(() => {\r\n        uni.stopPullDownRefresh()\r\n      }, 2000)\r\n    },\r\n    methods: {\r\n      startPullDownRefresh() {\r\n        uni.startPullDownRefresh()\r\n      },\r\n      _getCurrentPages: function () {\r\n        this.pages.length = 0\r\n        const pages = getCurrentPages()\r\n        this.pages.push(new Page(pages[0].route))\r\n        if (this.pages[0].route.includes('/tabBar/') || this.pages[0].route == '/') {\r\n          this.checked = true\r\n        }\r\n        for (let i = 1; i < pages.length; i++) {\r\n          this.pages.push(new Page(pages[i].route))\r\n          if (pages[i].route.includes('/tabBar/')) {\r\n            this.checked = false\r\n          }\r\n        }\r\n      },\r\n      /// get-set-page-style\r\n      radioChange(key : string, e : RadioGroupChangeEvent) {\r\n        this.setStyleValue(key, e.detail.value);\r\n      },\r\n      sliderChange(key : string, e : UniSliderChangeEvent) {\r\n        this.setStyleValue(key, e.detail.value);\r\n      },\r\n      switchChange(key : string, e : UniSwitchChangeEvent) {\r\n        this.setStyleValue(key, e.detail.value);\r\n      },\r\n      setStyleValue(key : string, value : any) {\r\n        const style = {}\r\n        style[key] = value\r\n        this.setPageStyle(style)\r\n        this.getPageStyle()\r\n      },\r\n      getPageStyle() : UTSJSONObject {\r\n        const pages = getCurrentPages();\r\n        const currentPage = pages[pages.length - 1];\r\n        this.currentPageStyle = currentPage.getPageStyle()\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:161',this.currentPageStyle)\r\n        return this.currentPageStyle;\r\n      },\r\n      setPageStyle(style : UTSJSONObject) {\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:165','setPageStyle:', style);\r\n        const pages = getCurrentPages();\r\n        const currentPage = pages[pages.length - 1];\r\n        currentPage.setPageStyle(style);\r\n      },\r\n      goSetDisablePullDownRefresh() {\r\n        uni.navigateTo({\r\n          url: '/pages/API/get-current-pages/set-page-style-disable-pull-down-refresh'\r\n        });\r\n      },\r\n      getCurrentPage() : UniPage {\r\n        const pages = getCurrentPages()\r\n        return pages[pages.length - 1]\r\n      },\r\n      check$page() : boolean {\r\n        const page = this.getCurrentPage()\r\n        let res = this.$page === page\r\n        if (this.testing && res) {\r\n          res = page.options['test'] == '123'\r\n          if (res) {\r\n            res = page.route == 'pages/API/get-current-pages/get-current-pages'\r\n          }\r\n        }\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:188','check $page', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check fail', icon: 'error' })\r\n        return res\r\n      },\r\n      checkGetParentPage() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const parentPage = page.getParentPage()\r\n        const res = parentPage == null\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:196','check getParentPage', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check fail', icon: 'error' })\r\n        return res\r\n      },\r\n      checkGetDialogPages() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const dialogPages = page.getDialogPages()\r\n        const res = Array.isArray(dialogPages) && dialogPages.length == 0\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check fail', icon: 'error' })\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:205','check getDialogPages', res)\r\n        return res\r\n      },\r\n      checkGetElementById() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const element = page.getElementById('check-get-element-by-id-btn')\r\n        let res = element != null\r\n\r\n        if (res) {\r\n          const elPage = element!.getPage()\r\n          uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:215','elPage', elPage)\r\n          res = elPage === page\r\n        }\r\n\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:219','check getElementById', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check fail', icon: 'error' })\r\n        return res\r\n      },\r\n      checkGetAndroidView() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const androidView = page.getAndroidView()\r\n        const res = androidView != null\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:227','check getAndroidView', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check fail', icon: 'error' })\r\n        return res\r\n      },\r\n      checkGetIOSView() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const IOSView = page.getIOSView()\r\n        const res = IOSView != null\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:235','check getIOSView', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: '仅 IOS uts 插件环境支持', icon: 'error' })\r\n        return res\r\n      },\r\n      checkGetHTMLElement() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const HTMLView = page.getHTMLElement()\r\n        const res = HTMLView != null\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:243','check getHTMLElement', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check fail', icon: 'error' })\r\n        return res\r\n      },\r\n      checkGetAndroidActivity() : boolean {\r\n        const page = this.getCurrentPage()\r\n        const activity = page.getAndroidActivity()\r\n        const res = activity != null\r\n        uni.__f__('log','at pages/API/get-current-pages/get-current-pages.uvue:251','check getAndroidActivity', res)\r\n        uni.showToast(res ? { title: 'check success' } : { title: 'check getAndroidActivity', icon: 'error' })\r\n        return res\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .page {\r\n    flex: 1;\r\n    padding: 10px;\r\n  }\r\n\r\n  .page-style {\r\n    margin-top: 15px;\r\n  }\r\n\r\n  .page-style-item {\r\n    padding: 10px;\r\n    margin-top: 10px;\r\n    background-color: #ffffff;\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .item-text {\r\n    flex-direction: row;\r\n  }\r\n\r\n  .item-text-key {\r\n    font-weight: bold;\r\n  }\r\n\r\n  .item-text-value {\r\n    margin-left: 5px;\r\n  }\r\n\r\n  .set-value {\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .radio-set-value {\r\n    flex-direction: row;\r\n  }\r\n\r\n  .radio-value {\r\n    margin-left: 10px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/get-current-pages/get-current-pages.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","PageStyleArray","uni"],"mappings":";;;AAmFE,MAAM,KAAK;AAAA,EACT,YAAmB,OAAc;AAAd,SAAI,QAAJ;AAAA,EACnB;AACF;AAEA,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,SAAS;AAAA,MACT,OAAO,CAAY;AAAA,MACnB,gBAAgBC,oCAAiC;AAAA,MACjD,kBAAgB,IAAA,cAAE,EAAmB;AAAA,MACrC,SAAS;AAAA;EAEZ;AAAA,EACD,UAAU;AAAA,IACR,gBAAa;AACX,aAAO,SAAK,UAAU,KAAK,gBAAgB;AAAA,IAC7C;AAAA,EACD;AAAA,EAMD,UAAO;AAAA,EAQN;AAAA,EACD,oBAAiB;AACf,eAAW,MAAA;AACTC,oBAAG,MAAC,oBAAmB;AAAA,IACxB,GAAE,GAAI;AAAA,EACR;AAAA,EACD,SAAS;AAAA,IACP,uBAAoB;AAClBA,oBAAG,MAAC,qBAAoB;AAAA,IACzB;AAAA,IACD,kBAAkB,WAAA;AAChB,WAAK,MAAM,SAAS;AACpB,YAAM,QAAQ;AACd,WAAK,MAAM,KAAK,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC;AACxC,UAAI,KAAK,MAAM,CAAC,EAAE,MAAM,SAAS,UAAU,KAAK,KAAK,MAAM,CAAC,EAAE,SAAS,KAAK;AAC1E,aAAK,UAAU;AAAA,MACjB;AACA,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,aAAK,MAAM,KAAK,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC;AACxC,YAAI,MAAM,CAAC,EAAE,MAAM,SAAS,UAAU,GAAG;AACvC,eAAK,UAAU;AAAA,QACjB;AAAA,MACF;AAAA,IACD;AAAA;AAAA,IAED,YAAY,KAAc,GAAyB;AACjD,WAAK,cAAc,KAAK,EAAE,OAAO,KAAK;AAAA,IACvC;AAAA,IACD,aAAa,KAAc,GAAwB;AACjD,WAAK,cAAc,KAAK,EAAE,OAAO,KAAK;AAAA,IACvC;AAAA,IACD,aAAa,KAAc,GAAwB;AACjD,WAAK,cAAc,KAAK,EAAE,OAAO,KAAK;AAAA,IACvC;AAAA,IACD,cAAc,KAAc,QAAW,MAAA;AACrC,YAAM,QAAM,IAAA,cAAE,CAAA,CAAC;AACf,YAAM,GAAG,IAAI;AACb,WAAK,aAAa,KAAK;AACvB,WAAK,aAAY;AAAA,IAClB;AAAA,IACD,eAAY;AACV,YAAM,QAAQ;AACd,YAAM,cAAc,MAAM,MAAM,SAAS,CAAC;AAC1C,WAAK,mBAAmB,YAAY;AACpCA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,KAAK,gBAAgB;AACjG,aAAO,KAAK;AAAA,IACb;AAAA,IACD,aAAa,OAAqB;AAChCA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,iBAAiB,KAAK;AAClG,YAAM,QAAQ;AACd,YAAM,cAAc,MAAM,MAAM,SAAS,CAAC;AAC1C,kBAAY,aAAa,KAAK;AAAA,IAC/B;AAAA,IACD,8BAA2B;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACN,CAAA;AAAA,IACF;AAAA,IACD,iBAAc;AACZ,YAAM,QAAQ;AACd,aAAO,MAAM,MAAM,SAAS,CAAC;AAAA,IAC9B;AAAA,IACD,aAAU;AACR,YAAM,OAAO,KAAK;AAClB,UAAI,MAAM,KAAK,UAAU;AACzB,UAAI,KAAK,WAAW,KAAK;AACvB,cAAM,KAAK,QAAQ,MAAM,KAAK;AAC9B,YAAI,KAAK;AACP,gBAAM,KAAK,SAAS;AAAA,QACtB;AAAA,MACF;AACAA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,eAAe,GAAG;AAC9FA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,cAAc,MAAM,QAAS,CAAA;AACvF,aAAO;AAAA,IACR;AAAA,IACD,qBAAkB;AAChB,YAAM,OAAO,KAAK;AAClB,YAAM,aAAa,KAAK;AACxB,YAAM,MAAM,cAAc;AAC1BA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,uBAAuB,GAAG;AACtGA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,cAAc,MAAM,QAAS,CAAA;AACvF,aAAO;AAAA,IACR;AAAA,IACD,sBAAmB;AACjB,YAAM,OAAO,KAAK;AAClB,YAAM,cAAc,KAAK;AACzB,YAAM,MAAM,MAAM,QAAQ,WAAW,KAAK,YAAY,UAAU;AAChEA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,cAAc,MAAM,QAAS,CAAA;AACvFA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,wBAAwB,GAAG;AACvG,aAAO;AAAA,IACR;AAAA,IACD,sBAAmB;AACjB,YAAM,OAAO,KAAK;AAClB,YAAM,UAAU,KAAK,eAAe,6BAA6B;AACjE,UAAI,MAAM,WAAW;AAErB,UAAI,KAAK;AACP,cAAM,SAAS,QAAS;AACxBA,sBAAG,MAAC,MAAM,OAAM,6DAA4D,UAAU,MAAM;AAC5F,cAAM,WAAW;AAAA,MACnB;AAEAA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,wBAAwB,GAAG;AACvGA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,cAAc,MAAM,QAAS,CAAA;AACvF,aAAO;AAAA,IACR;AAAA,IACD,sBAAmB;AACjB,YAAM,OAAO,KAAK;AAClB,YAAM,cAAc,KAAK;AACzB,YAAM,MAAM,eAAe;AAC3BA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,wBAAwB,GAAG;AACvGA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,cAAc,MAAM,QAAS,CAAA;AACvF,aAAO;AAAA,IACR;AAAA,IACD,kBAAe;AACb,YAAM,OAAO,KAAK;AAClB,YAAM,UAAU,KAAK;AACrB,YAAM,MAAM,WAAW;AACvBA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,oBAAoB,GAAG;AACnGA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,oBAAoB,MAAM,QAAS,CAAA;AAC7F,aAAO;AAAA,IACR;AAAA,IACD,sBAAmB;AACjB,YAAM,OAAO,KAAK;AAClB,YAAM,WAAW,KAAK;AACtB,YAAM,MAAM,YAAY;AACxBA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,wBAAwB,GAAG;AACvGA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,cAAc,MAAM,QAAS,CAAA;AACvF,aAAO;AAAA,IACR;AAAA,IACD,0BAAuB;AACrB,YAAM,OAAO,KAAK;AAClB,YAAM,WAAW,KAAK;AACtB,YAAM,MAAM,YAAY;AACxBA,oBAAG,MAAC,MAAM,OAAM,6DAA4D,4BAA4B,GAAG;AAC3GA,oBAAAA,MAAI,UAAU,MAAM,EAAE,OAAO,gBAAgB,IAAI,EAAE,OAAO,4BAA4B,MAAM,QAAS,CAAA;AACrG,aAAO;AAAA,IACT;AAAA,EACD;CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9PF,GAAG,WAAW,eAAe;"}