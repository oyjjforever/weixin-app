{"version":3,"file":"bio-auth.js","sources":["pages/API/bio-auth/bio-auth.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2Jpby1hdXRoL2Jpby1hdXRoLnV2dWU"],"sourcesContent":["<template>\n  <view class=\"uni-container\">\n    <page-head :title=\"title\"></page-head>\n    <view class=\"uni-common-mt\">\n      <text class=\"uni-title-text\">设备支持情况：</text>\n      <text class=\"uni-subtitle-text\">{{ supportStatus }}</text>\n    </view>\n    <view class=\"uni-common-mt\">\n      <text class=\"uni-title-text\">认证结果：</text>\n      <text class=\"uni-subtitle-text\">{{ authResult }}</text>\n    </view>\n    <button @click=\"checkSupport\" class=\"uni-common-mt\">检查支持的认证方式</button>\n    <button @click=\"checkAuth('fingerPrint')\" class=\"uni-common-mt\">检查指纹</button>\n    <button @click=\"checkAuth('facial')\" class=\"uni-common-mt\">检查FaceID</button>\n    <button @click=\"startAuth('fingerPrint')\"  type=\"primary\" class=\"uni-common-mt\">指纹认证</button>\n    <button @click=\"startAuth('facial')\"  type=\"primary\" class=\"uni-common-mt\">FaceID认证</button>\n  </view>\n</template>\n\n<script setup lang=\"uts\">\nconst title = '生物认证'\nconst supportStatus = ref('未检查')\nconst authResult = ref('等待认证')\n\nconst checkSupport = () => {\n  uni.checkIsSupportSoterAuthentication({\n    success: (res) => {\n      supportStatus.value = res.supportMode.length > 0 ?\n        `支持: ${res.supportMode.join(', ')}` :\n        '不支持任何生物认证'\n    },\n    fail: () => {\n      supportStatus.value = '检查失败'\n    }\n  })\n}\n\nconst checkAuth = (mode: string) => {\n  uni.checkIsSoterEnrolledInDevice({\n    checkAuthMode: mode,\n    success: (res) => {\n      uni.__f__('log','at pages/API/bio-auth/bio-auth.uvue:42','res: ',res);\n      authResult.value = `${mode === 'fingerPrint' ? '指纹' : 'FaceID'}${res.isEnrolled ? '已录入' : '未录入'}`\n    },\n    fail: (err) => {\n      uni.__f__('log','at pages/API/bio-auth/bio-auth.uvue:46','err: ',err);\n      authResult.value = `${mode === 'fingerPrint' ? '指纹' : 'FaceID'}检查失败，${err}`\n    }\n  })\n}\n\nconst startAuth = (mode: string) => {\n  uni.startSoterAuthentication({\n    requestAuthModes: [mode],\n    challenge: '123456',\n    authContent: `请用${mode === 'fingerPrint' ? '指纹' : 'FaceID'}解锁`,\n    success: (res) => {\n      uni.__f__('log','at pages/API/bio-auth/bio-auth.uvue:58','res: ',res);\n      authResult.value = `${res.authMode === 'fingerPrint' ? '指纹' : 'FaceID'}认证成功`\n    },\n    fail: (err) => {\n      uni.__f__('log','at pages/API/bio-auth/bio-auth.uvue:62','err: ',err);\n      authResult.value = `${mode === 'fingerPrint' ? '指纹' : 'FaceID'}认证失败，${err}`\n    }\n  })\n}\n</script>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/bio-auth/bio-auth.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","MiniProgramPage"],"mappings":";;;;;;;;;;AAoBA,MAAM,QAAQ;;;;AACd,UAAM,gBAAgBA,kBAAI,KAAK;AAC/B,UAAM,aAAaA,kBAAI,MAAM;AAE7B,UAAM,eAAe,MAAA;AACnBC,0BAAI,kCAAkC,IAAA,cAAA;AAAA,QACpC,SAAS,CAAC,QAAG;AACX,wBAAc,QAAQ,IAAI,YAAY,SAAS,IAC7C,OAAO,IAAI,YAAY,KAAK,IAAI,CAAC,KACjC;AAAA,QACH;AAAA,QACD,MAAM,MAAA;AACJ,wBAAc,QAAQ;AAAA,QACxB;AAAA,MACD,CAAA,CAAA;AAAA,IACH;AAEA,UAAM,YAAY,CAAC,SAAY;AAC7BA,oBAAAA,MAAI,6BAA6B;AAAA,QAC/B,eAAe;AAAA,QACf,SAAS,CAAC,QAAG;AACXA,wBAAG,MAAC,MAAM,OAAM,0CAAyC,SAAQ,GAAG;AACpE,qBAAW,QAAQ,GAAG,SAAS,gBAAgB,OAAO,QAAQ,GAAG,IAAI,aAAa,QAAQ,KAAK;AAAA,QAChG;AAAA,QACD,MAAM,CAAC,QAAG;AACRA,wBAAG,MAAC,MAAM,OAAM,0CAAyC,SAAQ,GAAG;AACpE,qBAAW,QAAQ,GAAG,SAAS,gBAAgB,OAAO,QAAQ,QAAQ,GAAG;AAAA,QAC3E;AAAA,MACD,CAAA;AAAA,IACH;AAEA,UAAM,YAAY,CAAC,SAAY;AAC7BA,oBAAAA,MAAI,yBAAyB;AAAA,QAC3B,kBAAkB,CAAC,IAAI;AAAA,QACvB,WAAW;AAAA,QACX,aAAa,KAAK,SAAS,gBAAgB,OAAO,QAAQ;AAAA,QAC1D,SAAS,CAAC,QAAG;AACXA,wBAAG,MAAC,MAAM,OAAM,0CAAyC,SAAQ,GAAG;AACpE,qBAAW,QAAQ,GAAG,IAAI,aAAa,gBAAgB,OAAO,QAAQ;AAAA,QACvE;AAAA,QACD,MAAM,CAAC,QAAG;AACRA,wBAAG,MAAC,MAAM,OAAM,0CAAyC,SAAQ,GAAG;AACpE,qBAAW,QAAQ,GAAG,SAAS,gBAAgB,OAAO,QAAQ,QAAQ,GAAG;AAAA,QAC3E;AAAA,MACD,CAAA;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;AChEA,GAAG,WAAWC,SAAe;"}