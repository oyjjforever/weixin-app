{"version":3,"file":"choose-file.js","sources":["pages/API/choose-file/choose-file.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2Nob29zZS1maWxlL2Nob29zZS1maWxlLnV2dWU"],"sourcesContent":["<template>\n\n\n\n    <view>\n      <page-head :title=\"title\"></page-head>\n\n\n\n\n\n\n\n\n\n\n      <button size=\"mini\" @click=\"log=''\">清空日志</button>\n      <text style=\"margin: 2px; padding: 2px; border: 1px solid #000000;\">{{ log }}</text>\n\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"chooseVideo\">选择文件(video) 单选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"chooseVideoMul\">选择文件(video) 多选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"playVideo\">选择文件(video)并播放</button>\n      <video class=\"video\" :src=\"src\" :controls=\"true\" :autoplay=\"true\" :loop=\"true\">111</video>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"chooseImage\">选择文件(image) 单选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"chooseImageMul\">选择文件(image) 多选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"viewImg\">选择文件(image) 并预览</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"chooseAudio\">选择文件(audio) 单选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"chooseAudioMul\">选择文件(audio) 多选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap=\"playAudio\">选择文件(audio) 并播放</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap='chooseAll'>选择文件(all) 单选</button>\n      <button class=\"btnstyle\" type=\"primary\" @tap='chooseAllMul'>选择文件(all) 多选</button>\n\n      <view style=\"height: 4px;\"></view>\n    </view>\n\n\n\n</template>\n\n<script lang=\"uts\">\n  export default {\n    data() {\n      return {\n        log: '',\n        title: 'choose-file',\n        src: '',\n        _audioContext: null as InnerAudioContext | null,\n      }\n    },\n    unmounted() {\n      if (this._audioContext != null) {\n        this._audioContext!.destroy()\n      }\n    },\n    methods: {\n\n      getPath(chooseFils : ChooseFileTempFile[]) : string {\n        var urls = new Array<string>()\n        chooseFils.forEach(value => {\n          urls.push(value.path)\n        })\n        return urls.join(', ')\n      },\n      chooseVideo() {\n        uni.chooseFile({\n          type: 'video',\n          count: 1,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:69',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:75',res)\n          }\n        })\n      },\n      chooseVideoMul() {\n        uni.chooseFile({\n          type: 'video',\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:83',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:89',res)\n          }\n        })\n      },\n      playVideo() {\n        uni.chooseFile({\n          type: 'video',\n          count: 1,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:98',res)\n            if (res.tempFiles.length > 0) {\n              this.src = res.tempFiles[0].path\n              this._audioContext?.destroy()\n              this._audioContext = null\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:106',res)\n          }\n        })\n      },\n      chooseImage() {\n        uni.chooseFile({\n          type: 'image',\n          count: 1,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:115',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:121',res)\n          }\n        })\n      },\n      chooseImageMul() {\n        uni.chooseFile({\n          type: 'image',\n          count: 90,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:130',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:136',res)\n          }\n        })\n      },\n      viewImg() {\n        uni.chooseFile({\n          type: 'image',\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:144',res)\n            if (res.tempFiles.length > 0) {\n              const tempFiles: Array<string> = res.tempFiles.map((value) => {\n              \treturn value.path\n              })\n              uni.previewImage({\n                current: 0,\n                urls: tempFiles,\n                success: (res) => {\n                  uni.__f__('log','at pages/API/choose-file/choose-file.uvue:153',res)\n                },\n                fail: (err) => {\n                  uni.__f__('log','at pages/API/choose-file/choose-file.uvue:156',err)\n                }\n              })\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:162',res)\n          }\n        })\n      },\n      chooseAudio() {\n        uni.chooseFile({\n          type: 'audio',\n          count: 1,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:171',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:177',res)\n          }\n        })\n      },\n      chooseAudioMul() {\n        uni.chooseFile({\n          type: 'audio',\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:185',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:191',res)\n          }\n        })\n      },\n      playAudio() {\n        uni.chooseFile({\n          type: 'audio',\n          count: 1,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:200',res);\n            if (res.tempFiles.length > 0) {\n              if (this._audioContext == null) {\n              this.src = ''\n                this._audioContext = uni.createInnerAudioContext()\n                this._audioContext!.autoplay = true\n              } else if (!this._audioContext!.paused) {\n                this._audioContext!.stop()\n              }\n              this._audioContext!.src = res.tempFiles[0].path\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:213',res);\n          }\n        });\n\n      },\n      chooseAll() {\n        uni.chooseFile({\n          type: 'all',\n          count: 1,\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:223',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:229',res)\n          }\n        })\n      },\n      chooseAllMul() {\n        uni.chooseFile({\n          type: 'all',\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:237',res)\n            if (res.tempFiles.length > 0) {\n              this.log += this.getPath(res.tempFiles) + '\\n\\n'\n            }\n          },\n          complete: (res) => {\n            uni.__f__('log','at pages/API/choose-file/choose-file.uvue:243',res)\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  .btnstyle {\n    margin: 4px;\n  }\n\n  .video {\n    width: 100%;\n    height: 225px;\n  }\n\n  .uni-uploader__input-box {\n    margin: 5px;\n    width: 104px;\n    height: 104px;\n    border: 1px solid #D9D9D9;\n  }\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/choose-file/choose-file.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","res"],"mappings":"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"}