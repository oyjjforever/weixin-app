{"version":3,"file":"inner-audio-path.js","sources":["pages/API/create-inner-audio-context/inner-audio-path.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXGNyZWF0ZS1pbm5lci1hdWRpby1jb250ZXh0XGlubmVyLWF1ZGlvLXBhdGgudXZ1ZQ"],"sourcesContent":["<template>\r\n  <page-head :title=\"title\"></page-head>\r\n  <view class=\"uni-padding-wrap uni-common-mt\">\r\n    <view class=\"uni-title\">\r\n      <text class=\"uni-title-text\">音频路径示例</text>\r\n    </view>\r\n    <view class=\"formats\" v-for=\"(item,index) in supportPaths\" :key=\"index\">\r\n      <text class=\"uni-subtitle-text\">{{item.description}}</text>\r\n      <image class=\"icon-play\" :src=\"(isPlaying && playIndex==index)?'/static/pause.png':'/static/play.png'\"\r\n        @click=\"play(item.src,index)\"></image>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  type AudioPath = {\r\n    description : string\r\n    src : string\r\n  }\r\n  export default {\r\n    data() {\r\n      return {\r\n        title: 'audio-path',\r\n        playIndex: 0,\r\n        isPlaying: false,\r\n\r\n\r\n\r\n\r\n        _audioContext: null as InnerAudioContext | null,\r\n        supportPaths: [\r\n          {\r\n            description: '本地路径：/static方式',\r\n            src: '/static/test-audio/ForElise.mp3'\r\n          },\r\n          {\r\n            description: '本地路径：../static/',\r\n            src: '../../../static/test-audio/ForElise.mp3'\r\n          },\r\n\r\n\r\n\r\n\r\n\r\n\r\n          {\r\n            description: '网络路径',\r\n            src: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.mp3'\r\n          },\r\n          {\r\n            description: '不存在的音频',\r\n            src: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/invalid_url.mp3'\r\n          },\r\n          {\r\n            description: '错误路径',\r\n            src: '../static/test-audio/ForElise22.mp3'\r\n          },\r\n        ] as Array<AudioPath>\r\n      }\r\n    },\r\n    onReady() {\r\n      this._audioContext = uni.createInnerAudioContext();\r\n      this._audioContext!.onPlay(() => {\r\n        uni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-path.uvue:64','开始播放');\r\n      });\r\n      this._audioContext!.onEnded(() => {\r\n        uni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-path.uvue:67','播放结束');\r\n        this.isPlaying = false;\r\n      });\r\n      this._audioContext!.onError((err) => {\r\n        this.isPlaying = false;\r\n        uni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-path.uvue:72','err', err);\r\n      });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n    onUnload() {\r\n      if (this._audioContext != null) {\r\n        this.pause();\r\n        this._audioContext!.destroy()\r\n      }\r\n    },\r\n    methods: {\r\n      pause() {\r\n        this._audioContext!.pause();\r\n        this.isPlaying = false;\r\n      },\r\n      play(audioUrl : string, index : number) {\r\n        uni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-path.uvue:121',index, audioUrl);\r\n        if (this.isPlaying && this.playIndex == index) {\r\n          this.pause();\r\n          return;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n        this.playIndex = index\r\n        this._audioContext!.src = audioUrl;\r\n        this._audioContext!.play();\r\n        this.isPlaying = true;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .formats {\r\n    align-items: center;\r\n  }\r\n\r\n  .icon-play {\r\n    width: 60px;\r\n    height: 60px;\r\n    margin: 10px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/create-inner-audio-context/inner-audio-path.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;MAeO,kBAAQ,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;AAIb,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,WAAW;AAAA,MACX,WAAW;AAAA,MAKX,eAAe;AAAA,MACf,cAAc;AAAA,QACZ,IAAA,UAAA;AAAA,UACE,aAAa;AAAA,UACb,KAAK;AAAA,QACN,CAAA;AAAA,QACD,IAAA,UAAA;AAAA,UACE,aAAa;AAAA,UACb,KAAK;AAAA,QACN,CAAA;AAAA,QAOD,IAAA,UAAA;AAAA,UACE,aAAa;AAAA,UACb,KAAK;AAAA,QACN,CAAA;AAAA,QACD,IAAA,UAAA;AAAA,UACE,aAAa;AAAA,UACb,KAAK;AAAA,QACN,CAAA;AAAA,QACD,IAAA,UAAA;AAAA,UACE,aAAa;AAAA,UACb,KAAK;AAAA,QACN,CAAA;AAAA,MACiB;AAAA;EAEvB;AAAA,EACD,UAAO;AACL,SAAK,gBAAgBC,oBAAI;AACzB,SAAK,cAAe,OAAO,MAAA;AACzBA,oBAAAA,MAAI,MAAM,OAAM,oEAAmE,MAAM;AAAA,IAC3F,CAAC;AACD,SAAK,cAAe,QAAQ,MAAA;AAC1BA,oBAAAA,MAAI,MAAM,OAAM,oEAAmE,MAAM;AACzF,WAAK,YAAY;AAAA,IACnB,CAAC;AACD,SAAK,cAAe,QAAQ,CAAC,QAAG;AAC9B,WAAK,YAAY;AACjBA,oBAAG,MAAC,MAAM,OAAM,oEAAmE,OAAO,GAAG;AAAA,IAC/F,CAAC;AAAA,EAkCF;AAAA,EAED,WAAQ;AACN,QAAI,KAAK,iBAAiB,MAAM;AAC9B,WAAK,MAAK;AACV,WAAK,cAAe;IACtB;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,QAAK;AACH,WAAK,cAAe;AACpB,WAAK,YAAY;AAAA,IAClB;AAAA,IACD,KAAK,UAAmB,OAAc;AACpCA,oBAAG,MAAC,MAAM,OAAM,qEAAoE,OAAO,QAAQ;AACnG,UAAI,KAAK,aAAa,KAAK,aAAa,OAAO;AAC7C,aAAK,MAAK;AACV,eAAM;AAAA,MACR;AAOA,WAAK,YAAY;AACjB,WAAK,cAAe,MAAM;AAC1B,WAAK,cAAe;AACpB,WAAK,YAAY;AAAA,IACnB;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;ACxIF,GAAG,WAAW,eAAe;"}