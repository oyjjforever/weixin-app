{"version":3,"file":"inner-audio-format.js","sources":["pages/API/create-inner-audio-context/inner-audio-format.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXNcQVBJXGNyZWF0ZS1pbm5lci1hdWRpby1jb250ZXh0XGlubmVyLWF1ZGlvLWZvcm1hdC51dnVl"],"sourcesContent":["<template>\r\n\t<page-head :title=\"title\"></page-head>\r\n\r\n\r\n\r\n\t\t<view class=\"uni-padding-wrap uni-common-mt\">\r\n\r\n\t\t\t<view class=\"formats\" v-for=\"(item,index) in supportFormats\" :key=\"index\">\r\n\t\t\t\t<text class=\"uni-subtitle-text\">{{item.format}}</text>\r\n\t\t\t\t<image class=\"icon-play\" :src=\"(isPlaying && playIndex==index)?'/static/pause.png':'/static/play.png'\"\r\n\t\t\t\t\t@click=\"play(item.src,index)\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"formats\" v-for=\"(item,index) in notSupportFormats\" :key=\"index\">\r\n\t\t\t\t<text class=\"uni-subtitle-text\">{{ item.format + (item.support) }}</text>\r\n\t\t\t\t<image class=\"icon-play\" :src=\"(isPlaying && playIndex==index)?'/static/pause.png':'/static/play.png'\"\r\n\t\t\t\t\t@click=\"play(item.src,index)\"></image>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\ttype AudioFormat = {\r\n\t\tformat : string\r\n\t\tsupport: string | null\r\n\t\tsrc : string\r\n\t}\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'audio-format',\r\n\t\t\t\tplayIndex: 0,\r\n\t\t\t\tisPlaying: false,\r\n\t\t\t\t_audioContext: null as InnerAudioContext | null,\r\n\t\t\t\tsupportFormats: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'mp3',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.mp3'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'mp4',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.mp4'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'm4a',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.m4a'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'aac',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.aac'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'flac',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.flac'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'wav',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.wav'\r\n\t\t\t\t\t},\r\n          {\r\n            format:\"m3u8\",\r\n            src:'https://qiniu-web-assets.dcloud.net.cn/audio/sample/m3u8/ForElise.m3u8'\r\n          }\r\n\t\t\t\t] as Array<AudioFormat>,\r\n\t\t\t\tnotSupportFormats: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'ogg',\r\n\t\t\t\t\t\tsupport: '(iOS 不支持)',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.ogg'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'wma',\r\n\t\t\t\t\t\tsupport: '(iOS/Android/web/Harmony 不支持)',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.wma'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'aiff',\r\n\t\t\t\t\t\tsupport: '(Android/web/Harmony 不支持)',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.aiff'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: 'caf',\r\n\t\t\t\t\t\tsupport: '(Android/web/Harmony 不支持)',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.caf'\r\n\t\t\t\t\t},\r\n          {\r\n            format:\"dash\",\r\n            support: '(iOS 不支持)',\r\n            src:'https://qiniu-web-assets.dcloud.net.cn/audio/sample/dash/ForElise.mpd'\r\n          },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tformat: '错误格式',\r\n\t\t\t\t\t\tsupport: '(iOS/Android/web/Harmony 不支持)',\r\n\t\t\t\t\t\tsrc: 'https://web-ext-storage.dcloud.net.cn/uni-app-x/audio/ForElise.wmaa'\r\n\t\t\t\t\t},\r\n\t\t\t\t] as Array<AudioFormat>\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis._audioContext = uni.createInnerAudioContext();\r\n\t\t\tthis._audioContext!.onPlay(() => {\r\n\t\t\t\tuni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-format.uvue:105','开始播放');\r\n\t\t\t});\r\n\t\t\tthis._audioContext!.onPause(() => {\r\n\t\t\t\tuni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-format.uvue:108','播放暂停');\r\n\t\t\t})\r\n\t\t\tthis._audioContext!.onEnded(() => {\r\n\t\t\t\tuni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-format.uvue:111','播放结束');\r\n\t\t\t\tthis.isPlaying = false;\r\n\t\t\t});\r\n\t\t\tthis._audioContext!.onError((err) => {\r\n\t\t\t\tthis.isPlaying = false;\r\n\t\t\t\tuni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-format.uvue:116','err', err);\r\n\t\t\t});\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tif (this._audioContext != null) {\r\n\t\t\t\tthis.pause();\r\n\t\t\t\tthis._audioContext!.destroy()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tpause() {\r\n\t\t\t\tthis._audioContext!.pause();\r\n\t\t\t\tthis.isPlaying = false;\r\n\t\t\t},\r\n\t\t\tplay(audioUrl : string, index : number) {\r\n\t\t\t\t// uni.__f__('log','at pages/API/create-inner-audio-context/inner-audio-format.uvue:131',index,audioUrl);\r\n\t\t\t\tif (this.isPlaying && this.playIndex == index) {\r\n\t\t\t\t\tthis.pause();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.playIndex = index\r\n\t\t\t\tthis._audioContext!.src = audioUrl;\r\n\t\t\t\tthis._audioContext!.play();\r\n\t\t\t\tthis.isPlaying = true;\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.formats {\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.icon-play {\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t\tmargin: 10px;\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/create-inner-audio-context/inner-audio-format.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;MAyBM;;;;;;;;;;;;;;;;;;;;;;;AAKL,MAAA,YAAeA,8BAAA;AAAA,EACd,OAAI;AACH,WAAO;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,WAAW;AAAA,MACX,eAAe;AAAA,MACf,gBAAgB;AAAA,QACf,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,KAAK;AAAA,QACL,CAAA;AAAA,QACI,IAAA,YAAA;AAAA,UACE,QAAO;AAAA,UACP,KAAI;AAAA,QACN,CAAA;AAAA,MACiB;AAAA,MACvB,mBAAmB;AAAA,QAClB,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,KAAK;AAAA,QACL,CAAA;AAAA,QACD,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,KAAK;AAAA,QACL,CAAA;AAAA,QACI,IAAA,YAAA;AAAA,UACE,QAAO;AAAA,UACP,SAAS;AAAA,UACT,KAAI;AAAA,QACL,CAAA;AAAA,QACN,IAAA,YAAA;AAAA,UACC,QAAQ;AAAA,UACR,SAAS;AAAA,UACT,KAAK;AAAA,QACL,CAAA;AAAA,MACoB;AAAA;EAEvB;AAAA,EACD,UAAO;AACN,SAAK,gBAAgBC,oBAAI;AACzB,SAAK,cAAe,OAAO,MAAA;AAC1BA,oBAAAA,MAAI,MAAM,OAAM,uEAAsE,MAAM;AAAA,IAC7F,CAAC;AACD,SAAK,cAAe,QAAQ,MAAA;AAC3BA,oBAAAA,MAAI,MAAM,OAAM,uEAAsE,MAAM;AAAA,IAC7F,CAAC;AACD,SAAK,cAAe,QAAQ,MAAA;AAC3BA,oBAAAA,MAAI,MAAM,OAAM,uEAAsE,MAAM;AAC5F,WAAK,YAAY;AAAA,IAClB,CAAC;AACD,SAAK,cAAe,QAAQ,CAAC,QAAG;AAC/B,WAAK,YAAY;AACjBA,oBAAG,MAAC,MAAM,OAAM,uEAAsE,OAAO,GAAG;AAAA,IACjG,CAAC;AAAA,EACD;AAAA,EACD,WAAQ;AACP,QAAI,KAAK,iBAAiB,MAAM;AAC/B,WAAK,MAAK;AACV,WAAK,cAAe;IACrB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,QAAK;AACJ,WAAK,cAAe;AACpB,WAAK,YAAY;AAAA,IACjB;AAAA,IACD,KAAK,UAAmB,OAAc;AAErC,UAAI,KAAK,aAAa,KAAK,aAAa,OAAO;AAC9C,aAAK,MAAK;AACV,eAAM;AAAA,MACP;AACA,WAAK,YAAY;AACjB,WAAK,cAAe,MAAM;AAC1B,WAAK,cAAe;AACpB,WAAK,YAAY;AAAA,IACjB;AAAA,EACD;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5ID,GAAG,WAAW,eAAe;"}