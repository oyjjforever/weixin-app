{"version":3,"file":"pull-down-refresh.js","sources":["pages/API/pull-down-refresh/pull-down-refresh.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL3B1bGwtZG93bi1yZWZyZXNoL3B1bGwtZG93bi1yZWZyZXNoLnV2dWU"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <!-- 实际开发中，长列表应该使用list-view -->\r\n    <view class=\"uni-padding-wrap uni-common-mt\">\r\n      <text class=\"text\" v-for=\"(num,index) in data\" :key=\"index\">list - {{num}}</text>\r\n      <view v-if=\"showLoadMore\">{{loadMoreText}}</view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\r\n        data: [] as Array<number>,\r\n        loadMoreText: \"加载中...\",\r\n        showLoadMore: false,\r\n        max: 0,\r\n        pulldownRefreshTriggered: false\r\n      }\r\n    },\r\n    onReady() {\r\n      uni.startPullDownRefresh();\r\n      this.initData();\r\n    },\r\n    onReachBottom() {\r\n      uni.__f__('log','at pages/API/pull-down-refresh/pull-down-refresh.uvue:30',\"onReachBottom\");\r\n      if (this.max > 40) {\r\n        this.loadMoreText = \"没有更多数据了!\"\r\n        return;\r\n      }\r\n      this.showLoadMore = true;\r\n      setTimeout(() => {\r\n        this.setListData();\r\n      }, 300);\r\n    },\r\n    onPullDownRefresh() {\r\n      uni.__f__('log','at pages/API/pull-down-refresh/pull-down-refresh.uvue:41','onPullDownRefresh');\r\n      this.pulldownRefreshTriggered = true\r\n      this.initData();\r\n    },\r\n    methods: {\r\n      initData() {\r\n        setTimeout(() => {\r\n          this.max = 0;\r\n          this.data = [];\r\n          let data : Array<number> = [];\r\n          this.max += 20;\r\n          for (let i : number = this.max - 19; i < this.max + 1; i++) {\r\n            data.push(i)\r\n          }\r\n          this.data = this.data.concat(data);\r\n          uni.stopPullDownRefresh();\r\n        }, 1000);\r\n      },\r\n      setListData() {\r\n        let data : Array<number> = [];\r\n        this.max += 10;\r\n        for (let i : number = this.max - 9; i < this.max + 1; i++) {\r\n          data.push(i)\r\n        }\r\n        this.data = this.data.concat(data);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .text {\r\n    margin: 6px 0;\r\n    width: 100%;\r\n    background-color: #fff;\r\n    height: 52px;\r\n    line-height: 52px;\r\n    text-align: center;\r\n    color: #555;\r\n    border-radius: 4px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/pull-down-refresh/pull-down-refresh.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAcE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,MAAM,CAAmB;AAAA,MACzB,cAAc;AAAA,MACd,cAAc;AAAA,MACd,KAAK;AAAA,MACL,0BAA0B;AAAA;EAE7B;AAAA,EACD,UAAO;AACLC,kBAAG,MAAC,qBAAoB;AACxB,SAAK,SAAQ;AAAA,EACd;AAAA,EACD,gBAAa;AACXA,kBAAAA,MAAI,MAAM,OAAM,4DAA2D,eAAe;AAC1F,QAAI,KAAK,MAAM,IAAI;AACjB,WAAK,eAAe;AACpB,aAAM;AAAA,IACR;AACA,SAAK,eAAe;AACpB,eAAW,MAAA;AACT,WAAK,YAAW;AAAA,IACjB,GAAE,GAAG;AAAA,EACP;AAAA,EACD,oBAAiB;AACfA,kBAAAA,MAAI,MAAM,OAAM,4DAA2D,mBAAmB;AAC9F,SAAK,2BAA2B;AAChC,SAAK,SAAQ;AAAA,EACd;AAAA,EACD,SAAS;AAAA,IACP,WAAQ;AACN,iBAAW,MAAA;AACT,aAAK,MAAM;AACX,aAAK,OAAO;AACZ,YAAI,OAAuB,CAAA;AAC3B,aAAK,OAAO;AACZ,iBAAS,IAAa,KAAK,MAAM,IAAI,IAAI,KAAK,MAAM,GAAG,KAAK;AAC1D,eAAK,KAAK,CAAC;AAAA,QACb;AACA,aAAK,OAAO,KAAK,KAAK,OAAO,IAAI;AACjCA,sBAAG,MAAC,oBAAmB;AAAA,MACxB,GAAE,GAAI;AAAA,IACR;AAAA,IACD,cAAW;AACT,UAAI,OAAuB,CAAA;AAC3B,WAAK,OAAO;AACZ,eAAS,IAAa,KAAK,MAAM,GAAG,IAAI,KAAK,MAAM,GAAG,KAAK;AACzD,aAAK,KAAK,CAAC;AAAA,MACb;AACA,WAAK,OAAO,KAAK,KAAK,OAAO,IAAI;AAAA,IACnC;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;AClEF,GAAG,WAAW,eAAe;"}