{"version":3,"file":"create-rewarded-video-ad.js","sources":["pages/API/create-rewarded-video-ad/create-rewarded-video-ad.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2NyZWF0ZS1yZXdhcmRlZC12aWRlby1hZC9jcmVhdGUtcmV3YXJkZWQtdmlkZW8tYWQudXZ1ZQ"],"sourcesContent":["<template>\r\n  <page-head title=\"激励视频广告\"></page-head>\r\n  <button :type=\"btnType\" style=\"margin: 10px;\" :disabled=\"btnDisable\" @click=\"showAd()\">{{btnText}}</button>\n  <view v-for=\"(item,index) in errorDetails\">{{item}}</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  export default {\r\n    data() {\r\n      return {\n        errorDetails : [] as string[],\r\n        btnText: \"\",\r\n        btnType: \"primary\",\r\n        btnDisable: false,\r\n        rewardAd: null as RewardedVideoAd | null,\r\n        isAdLoadSuccess: false\r\n      }\r\n    },\r\n    onReady() {\r\n      this.loadAd()\r\n    },\r\n    onHide() {\r\n      uni.__f__('log','at pages/API/create-rewarded-video-ad/create-rewarded-video-ad.uvue:23',\"Page Hide\");\r\n    },\r\n    methods: {\r\n      loadAd() {\r\n        if (this.btnDisable)\r\n          return\r\n        this.btnDisable = true\r\n        this.btnText = \"正在加载广告\"\r\n        this.btnType = \"primary\"\r\n        if (this.rewardAd == null) {\r\n          this.rewardAd = uni.createRewardedVideoAd({\r\n            adpid: \"1507000689\" //此处为测试广告位，实际开发中请在uni-ad后台申请自己的广告位后替换\r\n          })\r\n          this.rewardAd!.onError((res) => {\n            this.errorDetails.length = 0;\r\n            this.btnType = \"warn\"\r\n            this.btnDisable = false\n            this.btnText = res.errMsg;\n            const errors = (res.cause as UniAggregateError|null)?.errors;\n            if(errors != null && errors.length > 0) {\r\n              for(var a = 0;a<errors.length;a++) {\r\n                var msg = JSON.stringify(errors[a]);\r\n                this.errorDetails.push(msg);\r\n              }\r\n            }\r\n          })\r\n          this.rewardAd!.onLoad((_) => {\n            this.errorDetails.length = 0;\r\n            this.btnType = \"primary\"\r\n            this.btnText = \"广告加载成功，点击观看\"\r\n            this.btnDisable = false\r\n            this.isAdLoadSuccess = true\r\n          })\r\n          this.rewardAd!.onClose((e) => {\r\n            // 测试广告位无法通过服务器回调。实际开发中，使用自己的广告位后，需参考uni-ad文档编写服务器回调的代码，在服务端发放奖励\r\n            this.isAdLoadSuccess = false\r\n            uni.showToast({\r\n              title: \"激励视频\" + (e.isEnded ? \"\" : \"未\") + \"播放完毕\",\r\n              position: \"bottom\"\r\n            })\r\n            this.loadAd()\r\n          })\r\n        }\r\n        this.rewardAd!.load().catch(()=>{})\r\n      },\r\n      showAd() {\r\n        if (this.isAdLoadSuccess) {\r\n          this.rewardAd!.show().catch(()=>{})\r\n        } else {\r\n          this.loadAd()\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/create-rewarded-video-ad/create-rewarded-video-ad.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAOE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,cAAe,CAAc;AAAA,MAC7B,SAAS;AAAA,MACT,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,iBAAiB;AAAA;EAEpB;AAAA,EACD,UAAO;AACL,SAAK,OAAM;AAAA,EACZ;AAAA,EACD,SAAM;AACJC,kBAAAA,MAAI,MAAM,OAAM,0EAAyE,WAAW;AAAA,EACrG;AAAA,EACD,SAAS;AAAA,IACP,SAAM;AACJ,UAAI,KAAK;AACP,eAAK;AACP,WAAK,aAAa;AAClB,WAAK,UAAU;AACf,WAAK,UAAU;AACf,UAAI,KAAK,YAAY,MAAM;AACzB,aAAK,WAAWA,cAAG,MAAC,sBAAsB;AAAA,UACxC,OAAO;AAAA;AAAA,QACR,CAAA;AACD,aAAK,SAAU,QAAQ,CAAC,QAAG;;AACzB,eAAK,aAAa,SAAS;AAC3B,eAAK,UAAU;AACf,eAAK,aAAa;AAClB,eAAK,UAAU,IAAI;AACnB,gBAAM,UAAU,KAAA,IAAI,WAAgC,QAAA,OAAA,SAAA,OAAA,GAAE;AACtD,cAAG,UAAU,QAAQ,OAAO,SAAS,GAAG;AACtC,qBAAQ,IAAI,GAAE,IAAE,OAAO,QAAO,KAAK;AACjC,kBAAI,MAAM,IAAA,KAAK,UAAU,OAAO,CAAC,CAAC;AAClC,mBAAK,aAAa,KAAK,GAAG;AAAA,YAC5B;AAAA,UACF;AAAA,QACF,CAAC;AACD,aAAK,SAAU,OAAO,CAAC,IAAC,SAAA;AACtB,eAAK,aAAa,SAAS;AAC3B,eAAK,UAAU;AACf,eAAK,UAAU;AACf,eAAK,aAAa;AAClB,eAAK,kBAAkB;AAAA,QACzB,CAAC;AACD,aAAK,SAAU,QAAQ,CAAC,MAAC;AAEvB,eAAK,kBAAkB;AACvBA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,UAAU,EAAE,UAAU,KAAK,OAAO;AAAA,YACzC,UAAU;AAAA,UACX,CAAA;AACD,eAAK,OAAM;AAAA,QACb,CAAC;AAAA,MACH;AACA,WAAK,SAAU,KAAI,EAAG,MAAM,MAAA;AAAA,MAAM,CAAA;AAAA,IACnC;AAAA,IACD,SAAM;AACJ,UAAI,KAAK,iBAAiB;AACxB,aAAK,SAAU,KAAI,EAAG,MAAM,MAAA;AAAA,QAAM,CAAA;AAAA,MAClC,OAAK;AACL,aAAK,OAAM;AAAA,MACb;AAAA,IACF;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EF,GAAG,WAAW,eAAe;"}