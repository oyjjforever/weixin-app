{"version":3,"file":"env.js","sources":["pages/API/env/env.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2Vudi9lbnYudXZ1ZQ"],"sourcesContent":["<template>\r\n  <view style=\"margin:12px\">\r\n    <page-head title=\"环境变量 - 文件系统\"></page-head>\r\n    <button class=\"button\" type=\"primary\" @tap=\"getDirInfo(uni.env.USER_DATA_PATH)\">USER_DATA_PATH</button>\r\n    <button class=\"button\" type=\"primary\" @tap=\"getDirInfo(cachePath)\">CACHE_PATH</button>\r\n    <button class=\"button\" type=\"primary\" @tap=\"getDirInfo(sandboxPath)\">SANDBOX_PATH</button>\r\n\r\n\r\n\r\n\r\n\r\n\r\n    <boolean-data :defaultValue=\"false\" title=\"是否递归获取\" @change=\"switchRecursive\"></boolean-data>\r\n  </view>\r\n  <scroll-view style=\"flex: 1; padding: 16px 0px;\">\r\n    <text class=\"result\">{{result}}</text>\r\n    <text class=\"error\">{{error}}</text>\r\n    <view class=\"stat\" v-for=\"(stat,index) in list\" :key=\"index\" >\r\n      <text class=\"path\">{{stat.path}}</text>\r\n      <text class=\"size\">{{stat.size}}</text>\r\n    </view>\r\n  </scroll-view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  type StatInfo = {\r\n    path : string;\r\n    size : string;\r\n  };\r\n  export default {\r\n    data() {\r\n      return {\r\n        result: '',\r\n        error: '',\r\n        list: [] as Array<StatInfo>,\r\n        recursive: false,\r\n        cachePath: uni.env.CACHE_PATH as string,\r\n        sandboxPath: uni.env.SANDBOX_PATH as string,\r\n\r\n\r\n\r\n\r\n\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      switchRecursive() {\r\n        this.recursive = !this.recursive\r\n      },\r\n      getDirInfo(dirPath:string) {\r\n        const fm = uni.getFileSystemManager()\r\n        this.list = [];\r\n        fm.stat({\r\n          path: dirPath,\r\n          recursive: this.recursive,\r\n          success: (res: StatSuccessResult) => {\r\n            this.result = `获取 \"${dirPath}\" 成功(success)`\r\n            uni.__f__('log','at pages/API/env/env.uvue:59',this.result)\r\n            res.stats.forEach((item)=>{\r\n              this.list.push({\r\n                path: item.path,\r\n                size: `${item.stats.size} Bytes`\r\n              })\r\n            })\r\n          },\r\n          fail: (err) => {\r\n            this.result = `获取 \"${dirPath}\" 失败(fail)`\r\n            uni.__f__('log','at pages/API/env/env.uvue:69',this.result)\r\n            this.error = JSON.stringify(err)\r\n            uni.__f__('log','at pages/API/env/env.uvue:71',this.error)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .button {\r\n    margin-bottom: 4px;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n  }\r\n  .result {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    width: 100%;\r\n  }\r\n  .error {\r\n    color: firebrick;\r\n  }\r\n  .stat {\r\n    padding: 8px 16px;\r\n  }\r\n  .path {\r\n    color: darkgray;\r\n  }\r\n  .size {\r\n    color: darkgrey;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/env/env.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;MAyBO,iBAAO,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;AAIZ,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,MAAM,CAAqB;AAAA,MAC3B,WAAW;AAAA,MACX,WAAWC,cAAAA,MAAI,IAAI;AAAA,MACnB,aAAaA,cAAAA,MAAI,IAAI;AAAA;EAQxB;AAAA,EACD,SAAS;AAAA,IACP,kBAAe;AACb,WAAK,YAAY,CAAC,KAAK;AAAA,IACxB;AAAA,IACD,WAAW,SAAc;AACvB,YAAM,KAAKA,oBAAI;AACf,WAAK,OAAO;AACZ,SAAG,KAAK;AAAA,QACN,MAAM;AAAA,QACN,WAAW,KAAK;AAAA,QAChB,SAAS,CAAC,QAAsB;AAC9B,eAAK,SAAS,OAAO,OAAO;AAC5BA,wBAAG,MAAC,MAAM,OAAM,gCAA+B,KAAK,MAAM;AAC1D,cAAI,MAAM,QAAQ,CAAC,SAAI;AACrB,iBAAK,KAAK,KAAK;AAAA,cACb,MAAM,KAAK;AAAA,cACX,MAAM,GAAG,KAAK,MAAM,IAAI;AAAA,YACzB,CAAA;AAAA,UACH,CAAC;AAAA,QACF;AAAA,QACD,MAAM,CAAC,QAAG;AACR,eAAK,SAAS,OAAO,OAAO;AAC5BA,wBAAG,MAAC,MAAM,OAAM,gCAA+B,KAAK,MAAM;AAC1D,eAAK,QAAQ,IAAA,KAAK,UAAU,GAAG;AAC/BA,wBAAG,MAAC,MAAM,OAAM,gCAA+B,KAAK,KAAK;AAAA,QAC3D;AAAA,MACD,CAAA;AAAA,IACH;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EF,GAAG,WAAW,eAAe;"}