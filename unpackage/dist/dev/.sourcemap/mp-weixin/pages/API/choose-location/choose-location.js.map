{"version":3,"file":"choose-location.js","sources":["pages/API/choose-location/choose-location.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvQVBJL2Nob29zZS1sb2NhdGlvbi9jaG9vc2UtbG9jYXRpb24udXZ1ZQ"],"sourcesContent":["<template>\n  <view>\n    <page-head :title=\"title\"></page-head>\n    <view class=\"uni-padding-wrap\">\n      <view class=\"uni-column uni-container align-center\">\n        <text class=\"uni-hello-text\">位置信息</text>\n        <text v-if=\"!hasLocation\" class=\"uni-title-text uni-common-mt\">未选择位置</text>\n        <view v-if=\"hasLocation\" class=\"align-center\">\n          <text class=\"uni-common-mt\">{{locationName}}</text>\n          <text class=\"uni-common-mt\">{{locationAddress}}</text>\n          <view class=\"uni-common-mt\" v-if=\"location.latitude.length>1\">\n            <text>E: {{location.longitude[0]}}°{{location.longitude[1]}}′</text>\n            <text>\\nN: {{location.latitude[0]}}°{{location.latitude[1]}}′</text>\n          </view>\n        </view>\n      </view>\n      <view class=\"uni-btn-v\">\n        <text class=\"tips\">注意：\\n1. Web和App需要正确配置地图服务商的Key并且保证Key的权限和余额足够，才能正常选择位置\\n2. 若没有关联uniCloud空间，则只能全屏地图选点，不能根据POI选择位置\\n3. payload参数会原样透传给uni-map-co，可用于用户鉴权</text>\n        <boolean-data :defaultValue=\"false\" title=\"是否指定位置为天安门\" @change=\"changeLocationBoolean\"></boolean-data>\n        <boolean-data :defaultValue=\"false\" title=\"是否携带keyword参数\" @change=\"changeKeywordBoolean\"></boolean-data>\n\n\n\n        <button class=\"uni-btn\" type=\"primary\" @tap=\"chooseLocation\">选择位置</button>\n        <button class=\"uni-btn\" @tap=\"clear\">清空</button>\n\n\n\n      </view>\n    </view>\n  </view>\n</template>\n<script lang=\"uts\">\n  import {\n    state,\n    setLifeCycleNum\n  } from '@/store/index.uts'\n\n  type Location = {\n    latitude: string[]\n    longitude: string[]\n  }\n  export default {\n    data() {\n      return {\n        title: 'chooseLocation',\n        hasLocation: false,\n        location: {\n          latitude: [],\n          longitude: []\n        } as Location,\n        locationName: '',\n        locationAddress: '',\n        dialogPagesNum: -1,\n        hoverLocation: false,\n        hoverKeyword: false,\n        hoverPayload: false\n      }\n    },\n    onShow() {\n      uni.__f__('log','at pages/API/choose-location/choose-location.uvue:61',\"Page Show\");\n      // 自动化测试\n      setLifeCycleNum(state.lifeCycleNum + 1)\n    },\n    onHide() {\n      uni.__f__('log','at pages/API/choose-location/choose-location.uvue:66',\"Page Hide\");\n      // 自动化测试\n      setLifeCycleNum(state.lifeCycleNum - 1)\n    },\n    methods: {\n      chooseLocation: function () {\n        let chooseLocationOptions = {\n          success: (res) => {\n            uni.__f__('log','at pages/API/choose-location/choose-location.uvue:74','chooseLocation success', res)\n            this.hasLocation = true\n            this.location = this.formatLocation(res.longitude, res.latitude)\n            this.locationName = res.name\n            this.locationAddress = res.address\n          }\n        } as ChooseLocationOptions\n        if (this.hoverLocation) {\n          chooseLocationOptions.latitude = 39.908823\n          chooseLocationOptions.longitude = 116.39747\n        }\n        if (this.hoverKeyword) {\n          chooseLocationOptions.keyword = '公园'\n        }\n\n\n\n\n\n\n\n        uni.chooseLocation(chooseLocationOptions)\n        // 自动化测试\n        setTimeout(() => {\n          this.test()\n        }, 500)\n      },\n      formatLocation: function(longitude:number, latitude:number):Location {\n        const longitudeArr = longitude.toString().split('.')\n        const latitudeArr = latitude.toString().split('.')\n        if(longitudeArr.length>1){\n          longitudeArr[1] = longitudeArr[1].substring(0,2)\n        }\n        if(latitudeArr.length>1){\n          latitudeArr[1] = latitudeArr[1].substring(0,2)\n        }\n        return {\n          longitude: longitudeArr,\n          latitude: latitudeArr\n        }\n      },\n      clear: function () {\n        this.hasLocation = false\n      },\n      changeLocationBoolean(checked : boolean) {\n        this.hoverLocation = checked\n      },\n      changeKeywordBoolean(checked : boolean) {\n        this.hoverKeyword = checked\n      },\n      changePayloadBoolean(checked : boolean) {\n        this.hoverPayload = checked\n      },\n\n\n\n\n\n      // 自动化测试\n      test() {\n        const pages = getCurrentPages()\n        const page = pages[pages.length - 1]\n\n\n\n\n      },\n      // 自动化测试\n      setLifeCycleNum(value : number) {\n        setLifeCycleNum(value)\n      },\n      // 自动化测试\n      getLifeCycleNum() : number {\n        return state.lifeCycleNum\n      },\n    }\n  }\n</script>\n\n<style>\n  .page-body-info {\n    padding-bottom: 0;\n    height: 220px;\n  }\n  .align-center{\n    align-items: center;\n  }\n  .tips {\n    font-size: 12px;\n    margin: 15px 0;\n    opacity: .8;\n  }\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/API/choose-location/choose-location.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","setLifeCycleNum","state"],"mappings":";;;MAsCO,iBAAO,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;AAIZ,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,OAAO;AAAA,MACP,aAAa;AAAA,MACb,UAAU,IAAA,SAAA;AAAA,QACR,UAAU,CAAE;AAAA,QACZ,WAAW,CAAC;AAAA,OACD;AAAA,MACb,cAAc;AAAA,MACd,iBAAiB;AAAA,MACjB,gBAAgB;AAAA,MAChB,eAAe;AAAA,MACf,cAAc;AAAA,MACd,cAAc;AAAA;EAEjB;AAAA,EACD,SAAM;AACJC,kBAAAA,MAAI,MAAM,OAAM,wDAAuD,WAAW;AAElFC,gBAAAA,gBAAgBC,YAAK,MAAC,eAAe,CAAC;AAAA,EACvC;AAAA,EACD,SAAM;AACJF,kBAAAA,MAAI,MAAM,OAAM,wDAAuD,WAAW;AAElFC,gBAAAA,gBAAgBC,YAAK,MAAC,eAAe,CAAC;AAAA,EACvC;AAAA,EACD,SAAS;AAAA,IACP,gBAAgB,WAAA;AACd,UAAI,wBAAwB;AAAA,QAC1B,SAAS,CAAC,QAAG;AACXF,wBAAG,MAAC,MAAM,OAAM,wDAAuD,0BAA0B,GAAG;AACpG,eAAK,cAAc;AACnB,eAAK,WAAW,KAAK,eAAe,IAAI,WAAW,IAAI,QAAQ;AAC/D,eAAK,eAAe,IAAI;AACxB,eAAK,kBAAkB,IAAI;AAAA,QAC7B;AAAA;AAEF,UAAI,KAAK,eAAe;AACtB,8BAAsB,WAAW;AACjC,8BAAsB,YAAY;AAAA,MACpC;AACA,UAAI,KAAK,cAAc;AACrB,8BAAsB,UAAU;AAAA,MAClC;AAQAA,0BAAI,eAAe,qBAAqB;AAExC,iBAAW,MAAA;AACT,aAAK,KAAI;AAAA,MACV,GAAE,GAAG;AAAA,IACP;AAAA,IACD,gBAAgB,SAAS,WAAkB,UAAe;AACxD,YAAM,eAAe,UAAU,SAAU,EAAC,MAAM,GAAG;AACnD,YAAM,cAAc,SAAS,SAAU,EAAC,MAAM,GAAG;AACjD,UAAG,aAAa,SAAO,GAAE;AACvB,qBAAa,CAAC,IAAI,aAAa,CAAC,EAAE,UAAU,GAAE,CAAC;AAAA,MACjD;AACA,UAAG,YAAY,SAAO,GAAE;AACtB,oBAAY,CAAC,IAAI,YAAY,CAAC,EAAE,UAAU,GAAE,CAAC;AAAA,MAC/C;AACA,aAAO,IAAA,SAAA;AAAA,QACL,WAAW;AAAA,QACX,UAAU;AAAA,OACZ;AAAA,IACD;AAAA,IACD,OAAO,WAAA;AACL,WAAK,cAAc;AAAA,IACpB;AAAA,IACD,sBAAsB,SAAiB;AACrC,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACD,qBAAqB,SAAiB;AACpC,WAAK,eAAe;AAAA,IACrB;AAAA,IACD,qBAAqB,SAAiB;AACpC,WAAK,eAAe;AAAA,IACrB;AAAA;AAAA,IAOD,OAAI;AACF,YAAM,QAAQ;AACD,YAAM,MAAM,SAAS,CAAC;AAAA,IAKpC;AAAA;AAAA,IAED,gBAAgB,OAAc;AAC5BC,kBAAe,gBAAC,KAAK;AAAA,IACtB;AAAA;AAAA,IAED,kBAAe;AACb,aAAOC,YAAAA,MAAM;AAAA,IACd;AAAA,EACH;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpJF,GAAG,WAAW,eAAe;"}