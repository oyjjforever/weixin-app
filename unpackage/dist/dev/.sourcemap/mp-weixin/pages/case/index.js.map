{"version":3,"file":"index.js","sources":["pages/case/index.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2FzZS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 顶部导航 -->\r\n    <view class=\"header\">\r\n      <view class=\"nav-left\" @click=\"goBack\">\r\n        <uni-icons type=\"back\" size=\"24\" color=\"#333\"/>\r\n      </view>\r\n      <text class=\"title\">家具案例</text>\r\n      <view class=\"nav-right\">\r\n        <uni-icons type=\"search\" size=\"24\" color=\"#333\"/>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 筛选栏 -->\r\n    <view class=\"filter-bar\">\r\n      <scroll-view class=\"filter-scroll\" scroll-x>\r\n        <view class=\"filter-item\" \r\n          v-for=\"(item, index) in filterOptions\" \r\n          :key=\"index\"\r\n          :class=\"{ active: selectedFilter === item.value }\"\r\n          @click=\"selectFilter(item.value)\">\r\n          <text>{{ item.label }}</text>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n\r\n    <!-- 案例列表 -->\r\n    <scroll-view class=\"case-list\" scroll-y @scrolltolower=\"loadMore\">\r\n      <view class=\"case-item\" \r\n        v-for=\"(item, index) in caseList\" \r\n        :key=\"index\"\r\n        @click=\"viewDetail(item)\">\r\n        \r\n        <!-- 案例图片 -->\r\n        <view class=\"image-container\">\r\n          <image \r\n            :src=\"item.image\" \r\n            mode=\"aspectFill\" \r\n            class=\"case-image\"\r\n            :lazy-load=\"true\"/>\r\n          <view class=\"image-overlay\">\r\n            <view class=\"room-type\">{{ item.roomType }}</view>\r\n          </view>\r\n        </view>\r\n\r\n        <!-- 案例信息 -->\r\n        <view class=\"case-info\">\r\n          <text class=\"case-title\">{{ item.title }}</text>\r\n          <text class=\"case-desc\">{{ item.description }}</text>\r\n          \r\n          <view class=\"case-meta\">\r\n            <view class=\"meta-item\">\r\n              <uni-icons type=\"home\" size=\"14\" color=\"#999\"/>\r\n              <text>{{ item.area }}</text>\r\n            </view>\r\n            <view class=\"meta-item\">\r\n              <uni-icons type=\"person\" size=\"14\" color=\"#999\"/>\r\n              <text>{{ item.designer }}</text>\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"case-footer\">\r\n            <view class=\"price-section\">\r\n              <text class=\"price-label\">套餐价格</text>\r\n              <view class=\"price-container\">\r\n                <text class=\"price-symbol\">¥</text>\r\n                <text class=\"price-value\">{{ item.price }}</text>\r\n              </view>\r\n            </view>\r\n            \r\n            <view class=\"detail-btn\" @click.stop=\"viewDetail(item)\">\r\n              <text>查看详情</text>\r\n              <uni-icons type=\"right\" size=\"14\" color=\"#666\"/>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 加载更多 -->\r\n      <view class=\"load-more\" v-if=\"hasMore\">\r\n        <text>加载更多...</text>\r\n      </view>\r\n      \r\n      <!-- 没有更多数据 -->\r\n      <view class=\"no-more\" v-else-if=\"caseList.length > 0\">\r\n        <text>没有更多案例了</text>\r\n      </view>\r\n\r\n      <!-- 空状态 -->\r\n      <view class=\"empty-state\" v-if=\"caseList.length === 0 && !loading\">\r\n        <view class=\"empty-content\">\r\n          <uni-icons type=\"home\" size=\"80\" color=\"#d9d9d9\"/>\r\n          <text class=\"empty-title\">暂无案例数据</text>\r\n          <text class=\"empty-desc\">当前筛选条件下没有找到相关案例</text>\r\n          <view class=\"empty-actions\">\r\n            <view class=\"empty-action\" @click=\"resetFilter\">\r\n              <text class=\"action-text\">重置筛选</text>\r\n            </view>\r\n            <view class=\"empty-action primary\" @click=\"refreshCases\">\r\n              <text class=\"action-text\">刷新数据</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 加载状态 -->\r\n      <view class=\"loading-state\" v-if=\"loading && caseList.length === 0\">\r\n        <uni-icons type=\"spinner-cycle\" size=\"40\" color=\"#999\"/>\r\n        <text class=\"loading-text\">正在加载案例...</text>\r\n      </view>\r\n    </scroll-view>\r\n\r\n    <!-- 返回顶部按钮 -->\r\n    <view class=\"back-to-top\" v-show=\"showBackToTop\" @click=\"scrollToTop\">\r\n      <uni-icons type=\"up\" size=\"24\" color=\"#ffffff\"/>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, onMounted } from 'vue';\r\n\r\n// 页面状态\r\nconst loading = ref(false);\r\nconst hasMore = ref(true);\r\nconst showBackToTop = ref(false);\r\nconst selectedFilter = ref('all');\r\nconst currentPage = ref(1);\r\nconst pageSize = ref(10);\r\n\r\n// 筛选选项\r\nconst filterOptions = ref([\r\n  { label: '全部', value: 'all' },\r\n  { label: '现代简约', value: 'modern' },\r\n  { label: '北欧风格', value: 'nordic' },\r\n  { label: '中式风格', value: 'chinese' },\r\n  { label: '美式风格', value: 'american' },\r\n  { label: '欧式风格', value: 'european' }\r\n]);\r\n\r\n// 案例列表数据\r\nconst caseList = ref([]);\r\n\r\n// 获取案例列表数据\r\nconst getCaseList = async (isRefresh = false) => {\r\n  if (loading.value) return;\r\n  \r\n  loading.value = true;\r\n  \r\n  try {\r\n    const result = await uniCloud.callFunction({\r\n      name: 'getCaseList',\r\n      data: {\r\n        page: isRefresh ? 1 : currentPage.value,\r\n        pageSize: pageSize.value,\r\n        style: selectedFilter.value\r\n      }\r\n    });\r\n    \r\n    if (result.result.code === 0) {\r\n      const { cases, hasMore: more } = result.result.data;\r\n      \r\n      if (isRefresh) {\r\n        caseList.value = cases || [];\r\n        currentPage.value = 1;\r\n      } else {\r\n        caseList.value = [...caseList.value, ...(cases || [])];\r\n      }\r\n      \r\n      hasMore.value = more;\r\n      currentPage.value++;\r\n    } else {\r\n      uni.showToast({\r\n        title: result.result.message || '获取案例列表失败',\r\n        icon: 'none'\r\n      });\r\n    }\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/case/index.vue:179','获取案例列表失败:', error);\r\n    uni.showToast({\r\n      title: '网络错误，请重试',\r\n      icon: 'none'\r\n    });\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n// 方法定义\r\nconst goBack = () => {\r\n  uni.navigateBack();\r\n};\r\n\r\nconst selectFilter = (value: string) => {\r\n  selectedFilter.value = value;\r\n  currentPage.value = 1;\r\n  getCaseList(true); // 重新获取数据\r\n};\r\n\r\nconst viewDetail = (caseItem: any) => {\r\n  uni.navigateTo({\r\n    url: `/pages/case/detail?id=${caseItem._id || caseItem.id}`\r\n  });\r\n};\r\n\r\nconst loadMore = () => {\r\n  if (loading.value || !hasMore.value) return;\r\n  getCaseList(false);\r\n};\r\n\r\nconst scrollToTop = () => {\r\n  uni.pageScrollTo({\r\n    scrollTop: 0,\r\n    duration: 300\r\n  });\r\n};\r\n\r\n// 重置筛选条件\r\nconst resetFilter = () => {\r\n  selectedFilter.value = 'all';\r\n  currentPage.value = 1;\r\n  getCaseList(true);\r\n};\r\n\r\n// 刷新案例数据\r\nconst refreshCases = () => {\r\n  currentPage.value = 1;\r\n  getCaseList(true);\r\n};\r\n\r\n// 监听页面滚动\r\nconst onPageScroll = (e: any) => {\r\n  showBackToTop.value = e.scrollTop > 500;\r\n};\r\n\r\nonMounted(() => {\r\n  getCaseList(true);\r\n});\r\n</script>\r\n\r\n<style>\r\npage {\r\n  height: 100%;\r\n  background-color: #F8F8F8;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background-color: #F8F8F8;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 顶部导航 */\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20rpx 30rpx;\r\n  background-color: #ffffff;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.nav-left, .nav-right {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #333333;\r\n}\r\n\r\n/* 筛选栏 */\r\n.filter-bar {\r\n  background-color: #ffffff;\r\n  padding: 20rpx 0;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.filter-scroll {\r\n  white-space: nowrap;\r\n  padding: 0 30rpx;\r\n}\r\n\r\n.filter-item {\r\n  display: inline-block;\r\n  padding: 12rpx 24rpx;\r\n  margin-right: 20rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 20rpx;\r\n  font-size: 14px;\r\n  color: #666666;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.filter-item.active {\r\n  background-color: #B87D4B;\r\n  color: #ffffff;\r\n}\r\n\r\n/* 案例列表 */\r\n.case-list {\r\n  flex: 1;\r\n  padding: 20rpx 30rpx;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  overflow: auto;\r\n}\r\n\r\n.case-item {\r\n  background-color: #ffffff;\r\n  border-radius: 16rpx;\r\n  margin-bottom: 30rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\r\n  transition: all 0.3s ease;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.case-item:active {\r\n  transform: translateY(2rpx);\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n/* 图片容器 */\r\n.image-container {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 400rpx;\r\n  overflow: hidden;\r\n}\r\n\r\n.case-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.image-overlay {\r\n  position: absolute;\r\n  top: 20rpx;\r\n  right: 20rpx;\r\n}\r\n\r\n.room-type {\r\n  padding: 8rpx 16rpx;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  border-radius: 12rpx;\r\n  font-size: 12px;\r\n  color: #ffffff;\r\n}\r\n\r\n/* 案例信息 */\r\n.case-info {\r\n  padding: 32rpx;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.case-title {\r\n  display: block;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #333333;\r\n  margin-bottom: 16rpx;\r\n  line-height: 1.4;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.case-desc {\r\n  display: block;\r\n  font-size: 14px;\r\n  color: #666666;\r\n  line-height: 1.5;\r\n  margin-bottom: 24rpx;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n.case-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.meta-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 40rpx;\r\n  font-size: 12px;\r\n  color: #999999;\r\n}\r\n\r\n.meta-item text {\r\n  margin-left: 8rpx;\r\n}\r\n\r\n.case-footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.price-section {\r\n  flex: 1;\r\n  min-width: 0;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.price-label {\r\n  display: block;\r\n  font-size: 12px;\r\n  color: #999999;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.price-container {\r\n  display: flex;\r\n  align-items: baseline;\r\n}\r\n\r\n.price-symbol {\r\n  font-size: 16px;\r\n  color: #B87D4B;\r\n  font-weight: bold;\r\n  margin-right: 4rpx;\r\n}\r\n\r\n.price-value {\r\n  font-size: 20px;\r\n  color: #B87D4B;\r\n  font-weight: bold;\r\n}\r\n\r\n.detail-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 16rpx 24rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  font-size: 14px;\r\n  color: #666666;\r\n  transition: all 0.3s ease;\r\n  flex-shrink: 0;\r\n  white-space: nowrap;\r\n}\r\n\r\n.detail-btn:active {\r\n  background-color: #e8e8e8;\r\n}\r\n\r\n.detail-btn text {\r\n  margin-right: 8rpx;\r\n}\r\n\r\n/* 加载状态 */\r\n.load-more, .no-more {\r\n  padding: 40rpx;\r\n  text-align: center;\r\n  font-size: 14px;\r\n  color: #999999;\r\n}\r\n\r\n.empty-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 500rpx;\r\n  padding: 60rpx 40rpx;\r\n}\r\n\r\n.empty-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n\r\n.empty-title {\r\n  font-size: 18px;\r\n  color: #666;\r\n  font-weight: 500;\r\n  margin: 32rpx 0 16rpx;\r\n}\r\n\r\n.empty-desc {\r\n  font-size: 14px;\r\n  color: #999;\r\n  line-height: 1.5;\r\n  margin-bottom: 48rpx;\r\n  max-width: 400rpx;\r\n}\r\n\r\n.empty-actions {\r\n  display: flex;\r\n  gap: 20rpx;\r\n}\r\n\r\n.empty-action {\r\n  padding: 16rpx 24rpx;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8rpx;\r\n  border: 1px solid #e0e0e0;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.empty-action.primary {\r\n  background-color: #B87D4B;\r\n  border-color: #B87D4B;\r\n}\r\n\r\n.empty-action.primary .action-text {\r\n  color: #fff;\r\n}\r\n\r\n.empty-action:active {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.action-text {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n/* 加载状态 */\r\n.loading-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 120rpx 40rpx;\r\n}\r\n\r\n.loading-text {\r\n  margin-top: 24rpx;\r\n  font-size: 14px;\r\n  color: #999;\r\n}\r\n\r\n/* 返回顶部按钮 */\r\n.back-to-top {\r\n  position: fixed;\r\n  bottom: 100rpx;\r\n  right: 30rpx;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* 动画效果 */\r\n.case-item {\r\n  animation: fadeInUp 0.6s ease-out;\r\n}\r\n\r\n@keyframes fadeInUp {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(30rpx);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n/* 响应式设计 */\r\n@media screen and (min-width: 768px) {\r\n  .case-list {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 30rpx;\r\n  }\r\n  \r\n  .case-item {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 1024px) {\r\n  .case-list {\r\n    grid-template-columns: repeat(3, 1fr);\r\n  }\r\n}\r\n</style>","import MiniProgramPage from 'D:/APP_WORKPLACE/其他/lxjj-app/pages/case/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uniCloud","uni","onMounted","MiniProgramPage"],"mappings":";;;;;;;;;AA2HA,UAAA,UAAAA,kBAAA,KAAA;AACA,UAAA,UAAAA,kBAAA,IAAA;AACA,UAAA,gBAAAA,kBAAA,KAAA;AACA,UAAA,iBAAAA,kBAAA,KAAA;AACA,UAAA,cAAAA,kBAAA,CAAA;AACA,UAAA,WAAAA,kBAAA,EAAA;AAGA,UAAA,gBAAAA,cAAAA,IAAA;AAAA,MAA0B,EAAA,OAAA,MAAA,OAAA,MAAA;AAAA,MACI,EAAA,OAAA,QAAA,OAAA,SAAA;AAAA,MACK,EAAA,OAAA,QAAA,OAAA,SAAA;AAAA,MACA,EAAA,OAAA,QAAA,OAAA,UAAA;AAAA,MACC,EAAA,OAAA,QAAA,OAAA,WAAA;AAAA,MACC,EAAA,OAAA,QAAA,OAAA,WAAA;AAAA,IACA,CAAA;AAIrC,UAAA,WAAAA,kBAAA,CAAA,CAAA;AAGA,UAAA,cAAA,OAAA,YAAA,UAAA;AACE,UAAA,QAAA;AAAmB;AAEnB,cAAA,QAAA;AAEA,UAAA;AACE,cAAA,SAAA,MAAAC,cAAA,GAAA,aAAA;AAAA,UAA2C,MAAA;AAAA,UACnC,MAAA;AAAA,YACA,MAAA,YAAA,IAAA,YAAA;AAAA,YAC8B,UAAA,SAAA;AAAA,YACf,OAAA,eAAA;AAAA,UACG;AAAA,QACxB,CAAA;AAGF,YAAA,OAAA,OAAA,SAAA,GAAA;AACE,gBAAA,EAAA,OAAA,SAAA,KAAA,IAAA,OAAA,OAAA;AAEA,cAAA,WAAA;AACE,qBAAA,QAAA,SAAA;AACA,wBAAA,QAAA;AAAA,UAAoB,OAAA;AAEpB,qBAAA,QAAA,CAAA,GAAA,SAAA,OAAA,GAAA,SAAA,CAAA,CAAA;AAAA,UAAqD;AAGvD,kBAAA,QAAA;AACA,sBAAA;AAAA,QAAY,OAAA;AAEZC,wBAAAA,MAAA,UAAA;AAAA,YAAc,OAAA,OAAA,OAAA,WAAA;AAAA,YACoB,MAAA;AAAA,UAC1B,CAAA;AAAA,QACP;AAAA,MACH,SAAA,OAAA;AAEAA,sBAAA,MAAA,MAAA,SAAA,+BAAA,aAAA,KAAA;AACAA,sBAAAA,MAAA,UAAA;AAAA,UAAc,OAAA;AAAA,UACL,MAAA;AAAA,QACD,CAAA;AAAA,MACP,UAAA;AAED,gBAAA,QAAA;AAAA,MAAgB;AAAA,IAClB;AAIF,UAAA,SAAA,MAAA;AACEA,oBAAA,MAAA,aAAA;AAAA,IAAiB;AAGnB,UAAA,eAAA,CAAA,UAAA;AACE,qBAAA,QAAA;AACA,kBAAA,QAAA;AACA,kBAAA,IAAA;AAAA,IAAgB;AAGlB,UAAA,aAAA,CAAA,aAAA;AACEA,oBAAAA,MAAA,WAAA;AAAA,QAAe,KAAA,yBAAA,SAAA,OAAA,SAAA,EAAA;AAAA,MAC4C,CAAA;AAAA,IAC1D;AAGH,UAAA,WAAA,MAAA;AACE,UAAA,QAAA,SAAA,CAAA,QAAA;AAAqC;AACrC,kBAAA,KAAA;AAAA,IAAiB;AAGnB,UAAA,cAAA,MAAA;AACEA,oBAAAA,MAAA,aAAA;AAAA,QAAiB,WAAA;AAAA,QACJ,UAAA;AAAA,MACD,CAAA;AAAA,IACX;AAIH,UAAA,cAAA,MAAA;AACE,qBAAA,QAAA;AACA,kBAAA,QAAA;AACA,kBAAA,IAAA;AAAA,IAAgB;AAIlB,UAAA,eAAA,MAAA;AACE,kBAAA,QAAA;AACA,kBAAA,IAAA;AAAA,IAAgB;AAQlBC,kBAAAA,UAAA,MAAA;AACE,kBAAA,IAAA;AAAA,IAAgB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3OlB,GAAG,WAAWC,oBAAe;"}