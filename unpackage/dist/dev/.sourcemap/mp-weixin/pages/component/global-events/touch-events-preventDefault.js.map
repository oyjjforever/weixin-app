{"version":3,"file":"touch-events-preventDefault.js","sources":["pages/component/global-events/touch-events-preventDefault.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tcG9uZW50L2dsb2JhbC1ldmVudHMvdG91Y2gtZXZlbnRzLXByZXZlbnREZWZhdWx0LnV2dWU"],"sourcesContent":["<template>\n  <view style=\"flex: 1;\">\n    <page-head title=\"横向滑动时阻止默认事件，即阻止页面滚动\"></page-head>\n    <view class=\"uni-padding-wrap uni-common-mt\" style=\"height: 40px; align-items: center;\">\n      <text>手势方向：{{direction}}</text>\n    </view>\n    <scroll-view style=\"flex: 1;\" @scroll=\"onScroll\">\n    \t<view v-for=\"item in 120\" :key=\"item\" class=\"box\" @touchstart=\"touchstart\" @touchmove=\"touchmove\" @touchend=\"touchend\">\n    \t\t{{item}}\n    \t</view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup lang=\"uts\">\n  const scrollTop = reactive({\n    value: 0\n  })\n\n  defineExpose({\n    scrollTop\n  })\n\n\tfunction getDirection(x : number, y : number) {\n\t\tif (x > y && x > 10) {\n\t\t\treturn 'horizontal';\n\t\t}\n\t\tif (y > x && y > 10) {\n\t\t\treturn 'vertical';\n\t\t}\n\t\treturn '';\n\t}\n\tconst startX = ref(0)\n\tconst startY = ref(0)\n\tconst direction = ref(\"\")\n\n\tfunction touchstart(e : UniTouchEvent) {\n\t\tdirection.value = \"\"\n\t\tstartX.value = e.touches[0].clientX\n\t\tstartY.value = e.touches[0].clientY\n\t}\n\n\tfunction touchend(e : UniTouchEvent) {\n\t\tuni.__f__('log','at pages/component/global-events/touch-events-preventDefault.uvue:44','>>>>> touchend')\n\t\tdirection.value = \"\"\n\t}\n\n\tfunction touchmove(e : UniTouchEvent) {\n\n\t\tconst deltaX = e.touches[0].clientX - startX.value\n\t\tconst deltaY = e.touches[0].clientY - startY.value\n\t\tif (direction.value == \"\") {\n\t\t\tdirection.value = getDirection(Math.abs(deltaX), Math.abs(deltaY))\n\t\t}\n\n\t\t//只有横向滑动时才阻止默认事件，即阻止页面滚动\n\t\tif (direction.value != 'horizontal') {\n\t\t\treturn\n\t\t}\n\n\n\t\tif (e.cancelable) {\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tfunction onScroll(e: UniScrollEvent) {\n\t\tuni.__f__('log','at pages/component/global-events/touch-events-preventDefault.uvue:68','>>>>> onScroll', e.detail.scrollTop)\n\t\tscrollTop[\"value\"] = e.detail.scrollTop\n\t}\n</script>\n\n<style scoped>\n\t.box {\n\t\tborder-bottom: 1px solid #c6d1c3;\n\t\tpadding: 16px 10px;\n\t}\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/component/global-events/touch-events-preventDefault.uvue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","uni"],"mappings":";;;;;;;;;;;;;;AAeE,UAAM,YAAYA,uBAAS,IAAA,cAAA;AAAA,MACzB,OAAO;AAAA,IACR,CAAA,CAAA;AAED,aAAa,IAAA,cAAA;AAAA,MACX;AAAA,IACD,CAAA,CAAA;AAEF,aAAS,aAAa,GAAY,GAAU;AAC3C,UAAI,IAAI,KAAK,IAAI,IAAI;AACpB,eAAO;AAAA,MACP;AACD,UAAI,IAAI,KAAK,IAAI,IAAI;AACpB,eAAO;AAAA,MACP;AACD,aAAO;AAAA,IACR;AACA,UAAM,SAASC,kBAAI,CAAC;AACpB,UAAM,SAASA,kBAAI,CAAC;AACpB,UAAM,YAAYA,kBAAI,EAAE;AAExB,aAAS,WAAW,GAAiB;AACpC,gBAAU,QAAQ;AAClB,aAAO,QAAQ,EAAE,QAAQ,CAAC,EAAE;AAC5B,aAAO,QAAQ,EAAE,QAAQ,CAAC,EAAE;AAAA,IAC7B;AAEA,aAAS,SAAS,GAAiB;AAClCC,oBAAAA,MAAI,MAAM,OAAM,wEAAuE,gBAAgB;AACvG,gBAAU,QAAQ;AAAA,IACnB;AAEA,aAAS,UAAU,GAAiB;AAEnC,YAAM,SAAS,EAAE,QAAQ,CAAC,EAAE,UAAU,OAAO;AAC7C,YAAM,SAAS,EAAE,QAAQ,CAAC,EAAE,UAAU,OAAO;AAC7C,UAAI,UAAU,SAAS,IAAI;AAC1B,kBAAU,QAAQ,aAAa,KAAK,IAAI,MAAM,GAAG,KAAK,IAAI,MAAM,CAAC;AAAA,MACjE;AAGD,UAAI,UAAU,SAAS,cAAc;AACpC,eAAM;AAAA,MACN;AAGD,UAAI,EAAE,YAAY;AACjB,UAAE,eAAc;AAAA,MAChB;AAAA,IACF;AAEA,aAAS,SAAS,GAAiB;AAClCA,0BAAI,MAAM,OAAM,wEAAuE,kBAAkB,EAAE,OAAO,SAAS;AAC3H,gBAAU,OAAO,IAAI,EAAE,OAAO;AAAA,IAC/B;;;;;;;;;;;;;;;;;;;;;;;;ACpED,GAAG,WAAW,eAAe;"}