{"version":3,"file":"add.js","sources":["pages/component/unicloud-db/unicloud-db/contacts/add.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tcG9uZW50L3VuaWNsb3VkLWRiL3VuaWNsb3VkLWRiL2NvbnRhY3RzL2FkZC51dnVl"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <unicloud-db ref=\"udb\" :collection=\"collection\" loadtime=\"manual\"></unicloud-db>\r\n    <form @submit=\"onFormSubmit\">\r\n      <view class=\"form-item\">\r\n        <text class=\"form-item-label\">姓名</text>\r\n        <input class=\"form-item-input\" placeholder=\"姓名\" name=\"username\" />\r\n      </view>\r\n      <view class=\"form-item\">\r\n        <text class=\"form-item-label\">电话</text>\r\n        <input class=\"form-item-input\" placeholder=\"电话\" name=\"mobile\" />\r\n      </view>\r\n      <view class=\"form-item\">\r\n        <text class=\"form-item-label\">邮箱</text>\r\n        <input class=\"form-item-input\" placeholder=\"邮箱地址\" name=\"email\" />\r\n      </view>\r\n      <view class=\"form-item\">\r\n        <text class=\"form-item-label\">备注</text>\r\n        <textarea class=\"form-item-input-comment\" placeholder=\"备注\" name=\"comment\" maxlength=\"-1\" />\r\n      </view>\r\n      <view class=\"form-item\">\r\n        <text class=\"form-item-label\">性别</text>\r\n        <radio-group class=\"radio-list\" name=\"gender\">\r\n          <view class=\"radio-item\" v-for=\"(item, _) in genderList\" :key=\"item.value\">\r\n            <radio :value=\"item.value\" />\r\n            <text>{{item.text}}</text>\r\n          </view>\r\n        </radio-group>\r\n      </view>\r\n      <button class=\"btn-add\" type=\"primary\" form-type=\"submit\">保存</button>\r\n    </form>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  import { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_ADD } from './types.uts'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        collection: COLLECTION_NAME,\r\n        genderList: GenderList as GenderType[],\r\n        uniCloudElement: null as UniCloudDBElement | null\r\n      }\r\n    },\r\n    onReady() {\r\n      this.uniCloudElement = this.$refs['udb'] as UniCloudDBElement\r\n    },\r\n    methods: {\r\n      onFormSubmit: function (e : UniFormSubmitEvent) {\r\n        const formData = e.detail.value\r\n        const genderString = formData['gender'] as string\r\n        formData['gender'] = (genderString.length > 0) ? parseInt(genderString) : -1\r\n        uni.__f__('log','at pages/component/unicloud-db/unicloud-db/contacts/add.uvue:54','formData', formData)\r\n        this.uniCloudElement!.add(formData, {\r\n          showToast: false,\r\n          needLoading: true,\r\n          loadingTitle: \"正在保存...\",\r\n          success: (_ : UniCloudDBAddResult) => {\r\n            // TODO 后续通过 EventChannel 实现\r\n            uni.$emit(UNICLOUD_DB_CONTACTS_ADD, '')\r\n            setTimeout(() => {\r\n              uni.navigateBack()\r\n            }, 500)\r\n          },\r\n          fail: (err : any | null) => {\r\n            const error = err as UniCloudError\r\n            uni.showModal({\r\n              content: error.errMsg,\r\n              showCancel: false\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .page {\r\n    padding: 15px;\r\n  }\r\n\r\n  .form-item {\r\n    flex-direction: row;\r\n    margin-bottom: 15px;\r\n    align-items: center;\r\n  }\r\n\r\n  .form-item-label {\r\n    width: 45px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .form-item-input {\n    flex: 1;\n    font-size: 14px;\n    color: #666;\n    border: 1px #e5e5e5 solid;\n    border-radius: 5px;\n    height: 34px;\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n\n  .form-item-input-comment {\n    flex: 1;\n    font-size: 14px;\n    color: #666;\n    border: 1px #e5e5e5 solid;\n    border-radius: 5px;\n    padding: 8px;\n  }\r\n\r\n  .radio-list {\r\n    flex-direction: row;\r\n  }\r\n\r\n  .radio-item {\r\n    flex-direction: row;\r\n    margin-right: 30px;\r\n    align-items: center;\r\n  }\r\n\r\n  .btn-add {\r\n    margin-top: 50px;\r\n  }\r\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/component/unicloud-db/unicloud-db/contacts/add.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","COLLECTION_NAME","GenderList","uni","UNICLOUD_DB_CONTACTS_ADD"],"mappings":";;;AAqCE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,YAAYC,qDAAe;AAAA,MAC3B,YAAYC,qDAA0B;AAAA,MACtC,iBAAiB;AAAA;EAEpB;AAAA,EACD,UAAO;AACL,SAAK,kBAAkB,KAAK,MAAM,KAAK;AAAA,EACxC;AAAA,EACD,SAAS;AAAA,IACP,cAAc,SAAU,GAAsB;AAC5C,YAAM,WAAW,EAAE,OAAO;AAC1B,YAAM,eAAe,SAAS,QAAQ;AACtC,eAAS,QAAQ,IAAK,aAAa,SAAS,IAAK,SAAS,YAAY,IAAI;AAC1EC,oBAAG,MAAC,MAAM,OAAM,mEAAkE,YAAY,QAAQ;AACtG,WAAK,gBAAiB,IAAI,UAAU,IAAA,cAAA;AAAA,QAClC,WAAW;AAAA,QACX,aAAa;AAAA,QACb,cAAc;AAAA,QACd,SAAS,CAAC,MAAuB;AAE/BA,wBAAAA,MAAI,MAAMC,+EAA0B,EAAE;AACtC,qBAAW,MAAA;AACTD,0BAAG,MAAC,aAAY;AAAA,UACjB,GAAE,GAAG;AAAA,QACP;AAAA,QACD,MAAM,CAAC,MAAgB,SAAA;AACrB,gBAAM,QAAQ;AACdA,8BAAI,UAAU,IAAA,cAAA;AAAA,YACZ,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,UACb,CAAA,CAAA;AAAA,QACH;AAAA,MACD,CAAA,CAAA;AAAA,IACH;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EF,GAAG,WAAW,eAAe;"}