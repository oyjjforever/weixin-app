{"version":3,"file":"detail.js","sources":["pages/component/unicloud-db/unicloud-db/contacts/detail.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tcG9uZW50L3VuaWNsb3VkLWRiL3VuaWNsb3VkLWRiL2NvbnRhY3RzL2RldGFpbC51dnVl"],"sourcesContent":["<template>\r\n  <scroll-view class=\"page\">\r\n    <unicloud-db ref=\"udb\" v-slot:default=\"{data, loading, error}\" :collection=\"collection\" :where=\"where\"\r\n      page-data=\"replace\">\r\n      <view v-if=\"error!=null\" class=\"error\">{{error.errMsg}}</view>\r\n      <view v-if=\"loading\" class=\"loading\">正在加载...</view>\r\n      <view v-if=\"data.length>0\">\r\n        <view class=\"form-item\">\r\n          <text class=\"form-item-label\">姓名</text>\r\n          <text class=\"form-item-input\">{{data[0]['username']}}</text>\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <text class=\"form-item-label\">电话</text>\r\n          <text class=\"form-item-input\">{{data[0]['mobile']}}</text>\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <text class=\"form-item-label\">邮箱</text>\r\n          <text class=\"form-item-input\">{{data[0]['email']}}</text>\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <text class=\"form-item-label\">备注</text>\r\n          <text class=\"form-item-input\">{{data[0]['comment']}}</text>\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <text class=\"form-item-label\">性别</text>\r\n          <text class=\"form-item-input\">{{displayGender(data[0].getNumber('gender'))}}</text>\r\n        </view>\r\n        <button type=\"default\" @click=\"gotoUpdatePage(data[0].getString('_id'))\">编辑</button>\r\n      </view>\r\n    </unicloud-db>\r\n  </scroll-view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  import { COLLECTION_NAME, GenderType, GenderList, UNICLOUD_DB_CONTACTS_UPDATE } from './types.uts'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        collection: '',\r\n        where: '',\r\n        whereID: '',\r\n        uniCloudElement: null as UniCloudDBElement | null\r\n      }\r\n    },\r\n    onLoad(options) {\r\n      this.collection = COLLECTION_NAME;\r\n      this.whereID = options['id'] as string;\r\n      this.where = `_id=='${this.whereID}'`;\r\n    },\r\n    onShow() {\r\n      // TODO 后续通过 EventChannel 实现\r\n      uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\r\n    },\r\n    onUnload() {\r\n      // TODO 后续通过 EventChannel 实现\r\n      uni.$off(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\r\n    },\r\n    onReady() {\r\n      this.uniCloudElement = this.$refs['udb'] as UniCloudDBElement\r\n    },\r\n    methods: {\r\n      displayGender(value : number | null) : string {\r\n        const str = value ?? -1\r\n        return (GenderList as GenderType[]).find((item : GenderType) : boolean => {\r\n          return item.value == str\r\n        })!.text;\r\n      },\r\n      gotoUpdatePage(id : string | null) {\r\n        // TODO 后续通过 EventChannel 实现\r\n        uni.$on(UNICLOUD_DB_CONTACTS_UPDATE, this.onDataChange);\r\n        uni.navigateTo({\r\n          url: './edit?id=' + id\r\n        })\r\n      },\r\n      onDataChange(_ : string) {\r\n        this.uniCloudElement!.loadData()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .page {\r\n    flex: 1;\r\n    padding: 15px;\r\n  }\r\n\r\n  .loading {\r\n    align-items: center;\r\n  }\r\n\r\n  .form-item {\r\n    flex-direction: row;\r\n    margin-bottom: 15px;\r\n    align-items: center;\r\n    padding: 8px 0;\r\n  }\r\n\r\n  .form-item-label {\r\n    width: 45px;\r\n    margin-right: 10px;\r\n  }\r\n\r\n  .form-item-input {\r\n    flex: 1;\r\n    font-size: 14px;\r\n    color: #666;\r\n  }\r\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/component/unicloud-db/unicloud-db/contacts/detail.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","COLLECTION_NAME","uni","UNICLOUD_DB_CONTACTS_UPDATE","GenderList"],"mappings":";;;AAoCE,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,SAAS;AAAA,MACT,iBAAiB;AAAA;EAEpB;AAAA,EACD,OAAO,SAAO;AACZ,SAAK,aAAaC;AAClB,SAAK,UAAU,QAAQ,IAAI;AAC3B,SAAK,QAAQ,SAAS,KAAK,OAAO;AAAA,EACnC;AAAA,EACD,SAAM;AAEJC,kBAAAA,MAAI,KAAKC,qDAAAA,6BAA6B,KAAK,YAAY;AAAA,EACxD;AAAA,EACD,WAAQ;AAEND,kBAAAA,MAAI,KAAKC,qDAAAA,6BAA6B,KAAK,YAAY;AAAA,EACxD;AAAA,EACD,UAAO;AACL,SAAK,kBAAkB,KAAK,MAAM,KAAK;AAAA,EACxC;AAAA,EACD,SAAS;AAAA,IACP,cAAc,QAAqB,MAAA;AACjC,YAAM,MAAM,UAAA,QAAA,mBAAA,QAAS;AACrB,aAAO,IAAC,UAAAC,qDAA2B,YAAM,CAAC,SAAiB;AACzD,eAAO,KAAK,SAAS;AAAA,MACtB,CAAA,EAAG;AAAA,IACL;AAAA,IACD,eAAe,KAAkB,MAAA;AAE/BF,oBAAAA,MAAI,IAAIC,qDAAAA,6BAA6B,KAAK,YAAY;AACtDD,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,eAAe;AAAA,MACrB,CAAA;AAAA,IACF;AAAA,IACD,aAAa,GAAU;AACrB,WAAK,gBAAiB;IACxB;AAAA,EACF;CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EF,GAAG,WAAW,eAAe;"}