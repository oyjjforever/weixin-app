{"version":3,"file":"scroll-view.js","sources":["pages/component/scroll-view/scroll-view.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tcG9uZW50L3Njcm9sbC12aWV3L3Njcm9sbC12aWV3LnV2dWU"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <view>\r\n      <page-head title=\"scroll-view,区域滚动视图\"></page-head>\r\n      <view class=\"uni-padding-wrap uni-common-mt\">\r\n        <view class=\"uni-title uni-common-mt\">\r\n          <text class=\"uni-title-text\">Vertical Scroll</text>\r\n          <text class=\"uni-subtitle-text\">纵向滚动</text>\r\n        </view>\r\n        <view>\r\n          <scroll-view :scroll-top=\"scrollTop\" direction=\"vertical\" class=\"scroll-Y\" scroll-with-animation=\"true\"\r\n            @scrolltoupper=\"upper\" @scrolltolower=\"lower\" @scroll=\"scroll\" @scrollend=\"end\"\r\n            :show-scrollbar=\"showScrollbar\" id=\"verticalScrollView\">\r\n            <view class=\"scroll-view-item uni-bg-red\"><text class=\"text\">A</text></view>\r\n            <view class=\"scroll-view-item uni-bg-green\"><text class=\"text\">B</text></view>\r\n            <view class=\"scroll-view-item uni-bg-blue\"><text class=\"text\">C</text></view>\r\n          </scroll-view>\r\n        </view>\r\n        <view @tap=\"goTop\" class=\"uni-center uni-common-mt\">\r\n          <text class=\"uni-link\">点击这里返回顶部</text>\r\n        </view>\r\n\r\n        <view class=\"uni-title uni-common-mt\">\r\n          <text class=\"uni-title-text\">Horizontal Scroll</text>\r\n          <text class=\"uni-subtitle-text\">横向滚动</text>\r\n        </view>\r\n        <view>\r\n          <scroll-view class=\"scroll-view_H\" direction=\"horizontal\" @scroll=\"scroll\" @scrollend=\"end\"\r\n            :scroll-left=\"scrollLeft\" :show-scrollbar=\"showScrollbar\">\r\n            <view class=\"scroll-view-item_H uni-bg-red\"><text class=\"text\">A</text></view>\r\n            <view class=\"scroll-view-item_H uni-bg-green\"><text class=\"text\">B</text></view>\r\n            <view class=\"scroll-view-item_H uni-bg-blue\"><text class=\"text\">C</text></view>\r\n          </scroll-view>\r\n        </view>\r\n\r\n        <navigator url=\"/pages/component/scroll-view/scroll-view-props\" hover-class=\"none\">\r\n          <button type=\"primary\" class=\"button\">\r\n            非下拉刷新的属性示例\r\n          </button>\r\n        </navigator>\r\n        <view class=\"uni-common-pb\"></view>\r\n\r\n        <navigator url=\"/pages/component/scroll-view/scroll-view-refresher-props\" hover-class=\"none\">\r\n          <button type=\"primary\" class=\"button\">\r\n            下拉刷新的属性示例\r\n          </button>\r\n        </navigator>\r\n        <view class=\"uni-common-pb\"></view>\r\n        <navigator url=\"/pages/component/scroll-view/scroll-view-refresher\" hover-class=\"none\">\r\n          <button type=\"primary\" class=\"button\"> 默认下拉刷新示例 </button>\r\n        </navigator>\r\n        <view class=\"uni-common-pb\"></view>\r\n        <navigator url=\"/pages/component/scroll-view/scroll-view-custom-refresher-props\" hover-class=\"none\">\r\n          <button type=\"primary\" class=\"button\">\r\n            自定义下拉刷新示例\r\n          </button>\r\n        </navigator>\r\n        <view class=\"uni-common-pb\"></view>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n<script lang=\"uts\">\r\n  type ScrollEventTest = {\r\n    type : string;\r\n    target : UniElement | null;\r\n    currentTarget : UniElement | null;\r\n    direction ?: string\r\n  }\r\n  export default {\r\n    data() {\r\n      return {\r\n        scrollTop: 0,\r\n        oldScrollTop: 0,\r\n        scrollLeft: 120,\r\n        showScrollbar: true,\r\n        // 自动化测试\r\n        isScrollTest: '',\r\n        isScrolltolowerTest: '',\r\n        isScrolltoupperTest: '',\r\n        scrollDetailTest: null as UniScrollEventDetail | null,\r\n        scrollEndDetailTest: null as UniScrollEventDetail | null,\r\n      }\r\n    },\r\n    methods: {\r\n      upper: function (e : UniScrollToUpperEvent) {\r\n        uni.__f__('log','at pages/component/scroll-view/scroll-view.uvue:91','滚动到顶部/左边', e)\r\n        this.checkEventTest({\r\n          type: e.type,\r\n          target: e.target,\r\n          currentTarget: e.currentTarget,\r\n          direction: e.detail.direction,\r\n        } as ScrollEventTest, 'scrolltoupper')\r\n      },\r\n      lower: function (e : UniScrollToLowerEvent) {\r\n        uni.__f__('log','at pages/component/scroll-view/scroll-view.uvue:100','滚动到底部/右边', e)\r\n        this.checkEventTest({\r\n          type: e.type,\r\n          target: e.target,\r\n          currentTarget: e.currentTarget,\r\n          direction: e.detail.direction,\r\n        } as ScrollEventTest, 'scrolltolower')\r\n      },\r\n      scroll: function (e : UniScrollEvent) {\r\n        this.scrollDetailTest = e.detail\r\n        this.checkEventTest({\r\n          type: e.type,\r\n          target: e.target,\r\n          currentTarget: e.currentTarget\r\n        } as ScrollEventTest, 'scroll')\r\n        this.oldScrollTop = e.detail.scrollTop\r\n      },\r\n      end: function (e : UniScrollEvent) {\r\n        uni.__f__('log','at pages/component/scroll-view/scroll-view.uvue:118','滚动结束时触发', e)\r\n        this.scrollEndDetailTest = e.detail\r\n        this.checkEventTest({\r\n          type: e.type,\r\n          target: e.target,\r\n          currentTarget: e.currentTarget\r\n        } as ScrollEventTest, 'scrollend')\r\n      },\r\n      goTop: function () {\r\n        // 解决view层不同步的问题\r\n        this.scrollTop = this.oldScrollTop\r\n        this.$nextTick(() => {\r\n          this.scrollTop = 0\r\n        })\r\n        uni.showToast({\r\n          icon: 'none',\r\n          title: '纵向滚动 scrollTop 值已被修改为 0',\r\n        })\r\n      },\r\n      // 自动化测试专用（由于事件event参数对象中存在循环引用，在ios端JSON.stringify报错，自动化测试无法page.data获取）\r\n      checkEventTest(e : ScrollEventTest, eventName : String) {\r\n\r\n\r\n\r\n\r\n        const isPass = true\r\n\r\n        const result = isPass ? `${eventName}:Success` : `${eventName}:Fail`;\r\n        switch (eventName) {\r\n          case 'scroll':\r\n            this.isScrollTest = result\r\n            break;\r\n          case 'scrolltolower':\r\n            this.isScrolltolowerTest = result + `-${e.direction}`\r\n            break;\r\n          case 'scrolltoupper':\r\n            this.isScrolltoupperTest = result + `-${e.direction}`\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      },\r\n      // 自动化测试专用\r\n      setVerticalScrollBy(y : number) {\r\n        const element = uni.getElementById(\"verticalScrollView\")\r\n        if (element != null) {\r\n          element.scrollBy(0, y)\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .scroll-Y {\r\n    height: 150px;\r\n  }\r\n\r\n  .scroll-view_H {\r\n    width: 100%;\r\n    flex-direction: row;\r\n  }\r\n\r\n  .scroll-view-item {\r\n    height: 150px;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .scroll-view-item_H {\r\n    width: 100%;\r\n    height: 150px;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .text {\r\n    font-size: 18px;\r\n    color: #ffffff;\r\n  }\r\n\r\n  .button {\r\n    margin-top: 15px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/component/scroll-view/scroll-view.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;MAmEO;;;;;;;;;;;;;;;;;;;;;;;;;AAML,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,WAAW;AAAA,MACX,cAAc;AAAA,MACd,YAAY;AAAA,MACZ,eAAe;AAAA;AAAA,MAEf,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,qBAAqB;AAAA,MACrB,kBAAkB;AAAA,MAClB,qBAAqB;AAAA;EAExB;AAAA,EACD,SAAS;AAAA,IACP,OAAO,SAAU,GAAyB;AACxCC,oBAAG,MAAC,MAAM,OAAM,sDAAqD,YAAY,CAAC;AAClF,WAAK,eAAe,IAAA,gBAAA;AAAA,QAClB,MAAM,EAAE;AAAA,QACR,QAAQ,EAAE;AAAA,QACV,eAAe,EAAE;AAAA,QACjB,WAAW,EAAE,OAAO;AAAA,OACF,GAAE,eAAe;AAAA,IACtC;AAAA,IACD,OAAO,SAAU,GAAyB;AACxCA,oBAAG,MAAC,MAAM,OAAM,uDAAsD,YAAY,CAAC;AACnF,WAAK,eAAe,IAAA,gBAAA;AAAA,QAClB,MAAM,EAAE;AAAA,QACR,QAAQ,EAAE;AAAA,QACV,eAAe,EAAE;AAAA,QACjB,WAAW,EAAE,OAAO;AAAA,OACF,GAAE,eAAe;AAAA,IACtC;AAAA,IACD,QAAQ,SAAU,GAAkB;AAClC,WAAK,mBAAmB,EAAE;AAC1B,WAAK,eAAe,IAAA,gBAAA;AAAA,QAClB,MAAM,EAAE;AAAA,QACR,QAAQ,EAAE;AAAA,QACV,eAAe,EAAE;AAAA,OACC,GAAE,QAAQ;AAC9B,WAAK,eAAe,EAAE,OAAO;AAAA,IAC9B;AAAA,IACD,KAAK,SAAU,GAAkB;AAC/BA,oBAAG,MAAC,MAAM,OAAM,uDAAsD,WAAW,CAAC;AAClF,WAAK,sBAAsB,EAAE;AAC7B,WAAK,eAAe,IAAA,gBAAA;AAAA,QAClB,MAAM,EAAE;AAAA,QACR,QAAQ,EAAE;AAAA,QACV,eAAe,EAAE;AAAA,OACC,GAAE,WAAW;AAAA,IAClC;AAAA,IACD,OAAO,WAAA;AAEL,WAAK,YAAY,KAAK;AACtB,WAAK,UAAU,MAAA;AACb,aAAK,YAAY;AAAA,MACnB,CAAC;AACDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,MAAM;AAAA,QACN,OAAO;AAAA,MACR,CAAA;AAAA,IACF;AAAA;AAAA,IAED,eAAe,GAAqB,WAAkB;AAOpD,YAAM,SAAkB,GAAG,SAAS;AACpC,cAAQ,WAAS;AAAA,QACf,KAAK;AACH,eAAK,eAAe;AACpB;AAAA,QACF,KAAK;AACH,eAAK,sBAAsB,SAAS,IAAI,EAAE,SAAS;AACnD;AAAA,QACF,KAAK;AACH,eAAK,sBAAsB,SAAS,IAAI,EAAE,SAAS;AACnD;AAAA,MAGJ;AAAA,IACD;AAAA;AAAA,IAED,oBAAoB,GAAU;AAC5B,YAAM,UAAUA,cAAAA,MAAI,eAAe,oBAAoB;AACvD,UAAI,WAAW,MAAM;AACnB,gBAAQ,SAAS,GAAG,CAAC;AAAA,MACvB;AAAA,IACF;AAAA,EACD;CACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtKF,GAAG,WAAW,eAAe;"}