{"version":3,"file":"video-format.js","sources":["pages/component/video/video-format.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tcG9uZW50L3ZpZGVvL3ZpZGVvLWZvcm1hdC51dnVl"],"sourcesContent":["<template>\r\n\r\n\r\n\r\n    <page-head title=\"video-format\"></page-head>\r\n    <view class=\"uni-padding-wrap uni-common-mt\">\r\n      <view class=\"uni-title\">\r\n        <text class=\"uni-title-text\">支持的视频格式示例</text>\r\n      </view>\r\n      <view v-for=\"(item,index) in supportFormats\" :key=\"index\">\r\n        <text class=\"uni-subtitle-text\">{{item.format}}</text>\r\n        <video :id=\"'video-' + item.format\" class=\"video\" :src=\"item.src\" :controls=\"true\" :direction=\"-90\"\r\n          @error=\"onError(item.format, $event as UniVideoErrorEvent)\"></video>\r\n      </view>\r\n      <view class=\"uni-title\">\r\n        <text class=\"uni-title-text\">暂不支持的格式</text>\r\n      </view>\r\n      <view v-for=\"(item,index) in notSupportFormats\" :key=\"index\">\r\n        <text class=\"uni-subtitle-text\">{{item.format}}</text>\r\n        <video :id=\"'video-' + item.format\" :ref=\"'videoRef-' + item.format\" class=\"video\" :src=\"item.src\"\r\n          :controls=\"true\" :direction=\"-90\"></video>\r\n      </view>\r\n    </view>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script setup lang=\"uts\">\r\n  type VideoFormat = {\r\n    format : string\r\n    src : string\r\n  }\r\n  let supportFormats = ref([\r\n    // TODO web本地运行时本地服务返回的content-type不对，导致本地视频无法播放。此外web端原生video不支持flv、m3u8、avi格式，但是和app端相比多了ogg格式的支持\r\n    {\r\n      format: 'mp4',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.mp4'\r\n    },\r\n    {\r\n      format: 'm4v',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.m4v'\r\n    },\r\n    {\r\n      format: 'mov',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.mov'\r\n    },\r\n    {\r\n      format: 'webm（iOS、Safari、鸿蒙不支持）',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.webm'\r\n    },\r\n    {\r\n      format: '3gp',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.3gp'\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    {\r\n      format: 'm3u8',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.m3u8'\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    {\r\n      format: '错误路径',\r\n      src: 'https://www.dcloud.net.cn/errorpath.mp4'\r\n    },\r\n  ] as Array<VideoFormat>)\r\n\r\n  let notSupportFormats = ref([\r\n\r\n    {\r\n      format: 'ogg',\r\n      src: 'https://qiniu-web-assets.dcloud.net.cn/video/sample/2minute-demo.ogg'\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  ] as Array<VideoFormat>)\r\n\r\n  // 自动化测试\r\n  const isError = reactive({ value: false })\r\n\r\n  const onError = (format : string, e : UniVideoErrorEvent) => {\r\n    uni.__f__('log','at pages/component/video/video-format.uvue:99',format + \":\" + JSON.stringify(e));\r\n    if (format != \"错误路径\") {\r\n      isError['value'] = true;\r\n    }\r\n  }\r\n\r\n  onReady(() => {\r\n    // const v = uni.createVideoContext(\"video-mp4\",getCurrentInstance()!.proxy!)\r\n    // v?.play()\r\n  })\r\n\r\n  defineExpose({ isError })\r\n</script>\r\n\r\n<style>\r\n  .video {\r\n    height: 200px;\r\n  }\r\n</style>\r\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/component/video/video-format.uvue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","uni","onReady","MiniProgramPage"],"mappings":";;;;;;;;;;MA6BO,oBAAW,IAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAIhB,QAAI,iBAAiBA,cAAAA,IAAI;AAAA;;QAEvB;AAAA,UACE,QAAQ;AAAA,UACR,KAAK;AAAA,QACN;AAAA,MAAA;AAAA,MACD,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,MACD,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,MACD,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,MACD,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,MAQD,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,MAQD,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,IACoB,CAAA;AAEvB,QAAI,oBAAoBA,cAAAA,IAAI;AAAA,MAE1B,IAAA,YAAA;AAAA,QACE,QAAQ;AAAA,QACR,KAAK;AAAA,MACN,CAAA;AAAA,IAQoB,CAAA;AAGvB,UAAM,UAAUC,cAAAA,SAAS,IAAA,cAAA,EAAE,OAAO,MAAO,CAAA,CAAA;AAEzC,UAAM,UAAU,CAAC,QAAiB,MAAsB;AACtDC,oBAAAA,MAAI,MAAM,OAAM,iDAAgD,SAAS,MAAM,IAAK,KAAA,UAAU,CAAC,CAAC;AAChG,UAAI,UAAU,QAAQ;AACpB,gBAAQ,OAAO,IAAI;AAAA,MACpB;AAAA,IACH;AAEAC,kBAAAA,QAAQ,MAAA;AAAA,IAGR,CAAC;AAED,aAAa,IAAA,cAAA,EAAE,QAAO,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5G1B,GAAG,WAAWC,SAAe;"}