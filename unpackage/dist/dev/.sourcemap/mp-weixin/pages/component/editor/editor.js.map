{"version":3,"file":"editor.js","sources":["pages/component/editor/editor.uvue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tcG9uZW50L2VkaXRvci9lZGl0b3IudXZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"page-body\">\r\n      <view class='wrapper'>\r\n        <view class='toolbar' @tap=\"format\">\r\n          <view :class=\"formats.bold ? 'ql-active' : ''\" class=\"iconfont icon-zitijiacu\" data-name=\"bold\"></view>\r\n          <view :class=\"formats.italic ? 'ql-active' : ''\" class=\"iconfont icon-zitixieti\" data-name=\"italic\"></view>\r\n          <view :class=\"formats.underline ? 'ql-active' : ''\" class=\"iconfont icon-zitixiahuaxian\"\r\n            data-name=\"underline\"></view>\r\n          <view :class=\"formats.strike ? 'ql-active' : ''\" class=\"iconfont icon-zitishanchuxian\" data-name=\"strike\">\r\n          </view>\r\n\r\n          <view :class=\"formats.align === 'left' ? 'ql-active' : ''\" class=\"iconfont icon-zuoduiqi\" data-name=\"align\"\r\n            data-value=\"left\"></view>\r\n\r\n          <view :class=\"formats.align === 'center' ? 'ql-active' : ''\" class=\"iconfont icon-juzhongduiqi\"\r\n            data-name=\"align\" data-value=\"center\"></view>\r\n          <view :class=\"formats.align === 'right' ? 'ql-active' : ''\" class=\"iconfont icon-youduiqi\" data-name=\"align\"\r\n            data-value=\"right\"></view>\r\n          <view :class=\"formats.align === 'justify' ? 'ql-active' : ''\" class=\"iconfont icon-zuoyouduiqi\"\r\n            data-name=\"align\" data-value=\"justify\"></view>\r\n\r\n          <view :class=\"formats.lineHeight ? 'ql-active' : ''\" class=\"iconfont icon-line-height\" data-name=\"lineHeight\"\r\n            data-value=\"2\"></view>\r\n          <view :class=\"formats.letterSpacing ? 'ql-active' : ''\" class=\"iconfont icon-Character-Spacing\"\r\n            data-name=\"letterSpacing\" data-value=\"2em\"></view>\r\n          <view :class=\"formats.marginTop ? 'ql-active' : ''\" class=\"iconfont icon-722bianjiqi_duanqianju\"\r\n            data-name=\"marginTop\" data-value=\"20px\"></view>\r\n          <view :class=\"formats.marginBottom ? 'ql-active' : ''\" class=\"iconfont icon-723bianjiqi_duanhouju\"\r\n            data-name=\"marginBottom\" data-value=\"20px\"></view>\r\n\r\n          <view :class=\"formats.fontFamily ? 'ql-active' : ''\" class=\"iconfont icon-font\" data-name=\"fontFamily\"\r\n            data-value=\"Pacifico\"></view>\r\n          <view :class=\"formats.fontSize === '24px' ? 'ql-active' : ''\" class=\"iconfont icon-fontsize\"\r\n            data-name=\"fontSize\" data-value=\"24px\"></view>\r\n          <view :class=\"formats.color === '#0000ff' ? 'ql-active' : ''\" class=\"iconfont icon-text_color\"\r\n            data-name=\"color\" data-value=\"#0000ff\"></view>\r\n          <view :class=\"formats.backgroundColor === '#00ff00' ? 'ql-active' : ''\" class=\"iconfont icon-fontbgcolor\"\r\n            data-name=\"backgroundColor\" data-value=\"#00ff00\"></view>\r\n\r\n          <view class=\"iconfont icon--checklist\" data-name=\"list\" data-value=\"check\"></view>\r\n          <view :class=\"formats.list === 'ordered' ? 'ql-active' : ''\" class=\"iconfont icon-youxupailie\"\r\n            data-name=\"list\" data-value=\"ordered\"></view>\r\n          <view :class=\"formats.list === 'bullet' ? 'ql-active' : ''\" class=\"iconfont icon-wuxupailie\" data-name=\"list\"\r\n            data-value=\"bullet\"></view>\r\n\r\n\r\n          <view class=\"iconfont icon-outdent\" data-name=\"indent\" data-value=\"-1\"></view>\r\n          <view class=\"iconfont icon-indent\" data-name=\"indent\" data-value=\"+1\"></view>\r\n\r\n\r\n          <view :class=\"formats.header === 1 ? 'ql-active' : ''\" class=\"iconfont icon-format-header-1\"\r\n            data-name=\"header\" :data-value=\"1\"></view>\r\n          <view :class=\"formats.script === 'sub' ? 'ql-active' : ''\" class=\"iconfont icon-zitixiabiao\"\r\n            data-name=\"script\" data-value=\"sub\"></view>\r\n          <view :class=\"formats.script === 'super' ? 'ql-active' : ''\" class=\"iconfont icon-zitishangbiao\"\r\n            data-name=\"script\" data-value=\"super\"></view>\r\n\r\n          <view :class=\"formats.direction === 'rtl' ? 'ql-active' : ''\" class=\"iconfont icon-direction-rtl\"\r\n            data-name=\"direction\" data-value=\"rtl\"></view>\r\n\r\n          <view class=\"iconfont icon-date\" @tap=\"insertDate\"></view>\r\n          <view class=\"iconfont icon-fengexian\" @tap=\"insertDivider\"></view>\r\n          <view class=\"iconfont icon-charutupian\" @tap=\"chooseInsertImage\"></view>\r\n          <view class=\"iconfont icon-clearedformat\" @tap=\"removeFormat\"></view>\r\n          <view class=\"iconfont icon-undo\" @tap=\"undo\"></view>\r\n          <view class=\"iconfont icon-redo\" @tap=\"redo\"></view>\r\n          <view class=\"iconfont icon-shanchu\" @tap=\"clearShowModal\"></view>\r\n        </view>\r\n\r\n        <view class=\"editor-wrapper\">\r\n          <editor id=\"editor\" class=\"ql-container\" placeholder=\"开始输入...\" show-img-size show-img-toolbar show-img-resize\r\n            @statuschange=\"onStatusChange\" :read-only=\"readOnly\" @ready=\"onEditorReady\">\r\n          </editor>\r\n        </view>\r\n        <view>\r\n          <button @tap=\"getCon\">控制台打印文本内容</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n  type Context = {\r\n    id ?: string;\r\n    pageId ?: number;\r\n  }\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        readOnly: false,\r\n        formats: {},\r\n        editorCtx: {} as Context,\r\n        // 自动化测试\r\n        autoTest: false,\r\n        undoTest: false,\r\n        redoTest: false,\r\n        removeFormatTest: false,\r\n        insertImageTest: false,\r\n        blurTest: false\r\n      }\r\n    },\r\n    onLoad() {\r\n      uni.loadFontFace({\r\n        family: 'Pacifico',\r\n        source: 'url(\"/static/font/Pacifico-Regular.ttf\")',\r\n        success() {\r\n          uni.__f__('log','at pages/component/editor/editor.uvue:110','success load font')\r\n        },\r\n        fail() {\r\n          uni.__f__('log','at pages/component/editor/editor.uvue:113','fail load font load')\r\n        }\r\n      })\r\n    },\r\n    methods: {\r\n      readOnlyChange() {\r\n        this.readOnly = !this.readOnly\r\n      },\r\n      onEditorReady() {\r\n        uni.createSelectorQuery().select('#editor').context((res) => {\r\n          this.editorCtx = res.context\r\n        }).exec()\r\n      },\r\n      // 自动化测试专用\r\n      setContents(options) {\r\n        this.editorCtx.setContents({\r\n          delta: {\r\n            ops: options\r\n          },\r\n          success: (res) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:133','setContents-success', res)\r\n          },\r\n          fail: (err) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:136',err)\r\n          }\r\n        })\r\n      },\r\n      blur() {\r\n        this.editorCtx.blur({\r\n          success: (res) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:143','编辑器失焦：', res)\r\n            this.blurTest = true\r\n          },\r\n          fail: (err) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:147',err)\r\n          }\r\n        })\r\n      },\r\n      getCon() {\r\n        this.editorCtx.getContents({\r\n          success: (res) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:154','文本详情：', res)\r\n          },\r\n          fail: (err) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:157',err)\r\n          }\r\n        })\r\n      },\r\n      undo() {\r\n        this.editorCtx.undo({\r\n          success: (res) => {\r\n            this.undoTest = true\r\n          },\r\n          fail: (err) => {\r\n            this.undoTest = false\r\n          }\r\n        })\r\n      },\r\n      redo() {\r\n        this.editorCtx.redo({\r\n          success: (res) => {\r\n            this.redoTest = true\r\n          },\r\n          fail: (err) => {\r\n            this.redoTest = false\r\n          }\r\n        })\r\n      },\r\n      format(e) {\r\n        let { name, value } = e.target.dataset\r\n        if (!name) return\r\n        // uni.__f__('log','at pages/component/editor/editor.uvue:184','format', name, value)\r\n        this.editorCtx.format(name, value)\r\n      },\r\n      onStatusChange(e) {\r\n        const formats = e.detail\r\n        this.formats = formats\r\n      },\r\n      insertDivider() {\r\n        this.editorCtx.insertDivider({\r\n          success: function () {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:194','insert divider success')\r\n          }\r\n        })\r\n      },\r\n      clear() {\r\n        this.editorCtx.clear({\r\n          success: function (res) {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:201',\"clear success\")\r\n          }\r\n        })\r\n      },\r\n      clearShowModal() {\r\n        uni.showModal({\r\n          title: '清空编辑器',\r\n          content: '确定清空编辑器全部内容？',\r\n          success: res => {\r\n            if (res.confirm) {\r\n              this.clear()\r\n            }\r\n          }\r\n        })\r\n      },\r\n      removeFormat() {\r\n        this.editorCtx.removeFormat({\r\n          success: (res) => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:219','removeFormat-success', res)\r\n            this.removeFormatTest = true\r\n          },\r\n          fail: (err) => {\r\n            this.removeFormatTest = false\r\n          }\r\n        })\r\n      },\r\n      insertDate() {\r\n        const date = new Date()\r\n        const formatDate = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`\r\n        this.editorCtx.insertText({\r\n          text: formatDate\r\n        })\r\n      },\r\n      insertImage(image) {\r\n        this.editorCtx.insertImage({\r\n          src: image,\r\n          alt: '图像',\r\n          success: () => {\r\n            uni.__f__('log','at pages/component/editor/editor.uvue:239','insert image success')\r\n            this.insertImageTest = true\r\n          }\r\n        })\r\n      },\r\n      chooseInsertImage() {\r\n        uni.chooseImage({\r\n          count: 1,\r\n          success: (res) => {\r\n            this.insertImage(res.tempFilePaths[0])\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  @import \"./editor-icon.css\";\r\n\r\n  .page-body {\r\n    height: calc(100vh - var(--window-top) - var(--status-bar-height));\r\n  }\r\n\r\n  .wrapper {\r\n    height: 100%;\r\n  }\r\n\r\n  .editor-wrapper {\r\n    height: calc(100vh - var(--window-top) - var(--status-bar-height) - 140px - 46px);\r\n    background: #fff;\r\n  }\r\n\r\n  .iconfont {\r\n    display: inline-block;\r\n    width: 30px;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    font-size: 20px;\r\n    margin: 0px 6px;\r\n    align-content: center;\r\n  }\r\n\r\n  .toolbar {\r\n    box-sizing: border-box;\r\n    border-bottom: 0;\r\n    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    height: 140px;\r\n    padding-left: 10px;\r\n  }\r\n\r\n  .ql-container {\r\n    box-sizing: border-box;\r\n    padding: 12px 15px;\r\n    width: 100%;\r\n    min-height: 30vh;\r\n    height: 100%;\r\n    font-size: 16px;\r\n    line-height: 1.5;\r\n  }\r\n\r\n  .ql-active {\r\n    color: #06c;\r\n  }\r\n</style>\n","import MiniProgramPage from 'W:/Workplace/2.小程序/lihai-app/pages/component/editor/editor.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":"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"}